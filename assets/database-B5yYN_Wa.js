const __vite__fileDeps=["assets/useFireStorage-H2zJQsii.js","assets/index-BAnCtb42.js","assets/index-NxtES4SC.css","assets/user-QzlZX5LK.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Eh=Object.defineProperty;var Ah=(e,t,r)=>t in e?Eh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ht=(e,t,r)=>(Ah(e,typeof t!="symbol"?t+"":t,r),r);import{a0 as Ch,a1 as G,a2 as wh,a3 as Th,a4 as Dh,a5 as Ih,a6 as ba,a7 as Rh,a8 as Fh,a9 as Bh,aa as Sh,ab as _e,ac as Ph,ad as bh,ae as Jt,af as Vh,ag as kh,R as Nh,ah as Cn}from"./index-BAnCtb42.js";class wn{constructor(t,r,n,i,s,o,a,c,u){Ht(this,"collection");Ht(this,"document");Ht(this,"methods");Ht(this,"timestamp");Ht(this,"useremail");Ht(this,"userip");Ht(this,"useruid");Ht(this,"state");Ht(this,"id");this.collection=t,this.document=r,this.methods=n,this.timestamp=i,this.useruid=s,this.useremail=o,this.userip=a,this.state=c,this.id=u}}var Fu={exports:{}};function Oh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ui={exports:{}};const Lh={},Mh=Object.freeze(Object.defineProperty({__proto__:null,default:Lh},Symbol.toStringTag,{value:"Module"})),Uh=Ch(Mh);var Va;function X(){return Va||(Va=1,function(e,t){(function(r,n){e.exports=n()})(G,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof G<"u"&&G.crypto&&(s=G.crypto),!s&&typeof Oh=="function")try{s=Uh}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function g(){}return function(_){var y;return g.prototype=_,y=new g,g.prototype=null,y}}(),c={},u=c.lib={},l=u.Base=function(){return{extend:function(g){var _=a(this);return g&&_.mixIn(g),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var _ in g)g.hasOwnProperty(_)&&(this[_]=g[_]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=u.WordArray=l.extend({init:function(g,_){g=this.words=g||[],_!=i?this.sigBytes=_:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var _=this.words,y=g.words,C=this.sigBytes,A=g.sigBytes;if(this.clamp(),C%4)for(var w=0;w<A;w++){var D=y[w>>>2]>>>24-w%4*8&255;_[C+w>>>2]|=D<<24-(C+w)%4*8}else for(var N=0;N<A;N+=4)_[C+N>>>2]=y[N>>>2];return this.sigBytes+=A,this},clamp:function(){var g=this.words,_=this.sigBytes;g[_>>>2]&=4294967295<<32-_%4*8,g.length=n.ceil(_/4)},clone:function(){var g=l.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var _=[],y=0;y<g;y+=4)_.push(o());return new h.init(_,g)}}),f=c.enc={},d=f.Hex={stringify:function(g){for(var _=g.words,y=g.sigBytes,C=[],A=0;A<y;A++){var w=_[A>>>2]>>>24-A%4*8&255;C.push((w>>>4).toString(16)),C.push((w&15).toString(16))}return C.join("")},parse:function(g){for(var _=g.length,y=[],C=0;C<_;C+=2)y[C>>>3]|=parseInt(g.substr(C,2),16)<<24-C%8*4;return new h.init(y,_/2)}},x=f.Latin1={stringify:function(g){for(var _=g.words,y=g.sigBytes,C=[],A=0;A<y;A++){var w=_[A>>>2]>>>24-A%4*8&255;C.push(String.fromCharCode(w))}return C.join("")},parse:function(g){for(var _=g.length,y=[],C=0;C<_;C++)y[C>>>2]|=(g.charCodeAt(C)&255)<<24-C%4*8;return new h.init(y,_)}},p=f.Utf8={stringify:function(g){try{return decodeURIComponent(escape(x.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return x.parse(unescape(encodeURIComponent(g)))}},m=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=p.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var _,y=this._data,C=y.words,A=y.sigBytes,w=this.blockSize,D=w*4,N=A/D;g?N=n.ceil(N):N=n.max((N|0)-this._minBufferSize,0);var E=N*w,T=n.min(E*4,A);if(E){for(var B=0;B<E;B+=w)this._doProcessBlock(C,B);_=C.splice(0,E),y.sigBytes-=T}return new h.init(_,T)},clone:function(){var g=l.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});u.Hasher=m.extend({cfg:l.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(g){return function(_,y){return new g.init(y).finalize(_)}},_createHmacHelper:function(g){return function(_,y){return new v.HMAC.init(g,y).finalize(_)}}});var v=c.algo={};return c}(Math);return r})}(Ui)),Ui.exports}var qi={exports:{}},ka;function ti(){return ka||(ka=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,c=i.x64={};c.Word=o.extend({init:function(u,l){this.high=u,this.low=l}}),c.WordArray=o.extend({init:function(u,l){u=this.words=u||[],l!=n?this.sigBytes=l:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,l=u.length,h=[],f=0;f<l;f++){var d=u[f];h.push(d.high),h.push(d.low)}return a.create(h,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),l=u.words=this.words.slice(0),h=l.length,f=0;f<h;f++)l[f]=l[f].clone();return u}})}(),r})}(qi)),qi.exports}var zi={exports:{}},Na;function qh(){return Na||(Na=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,l=[],h=0;h<u;h++)l[h>>>2]|=c[h]<<24-h%4*8;o.call(this,l,u)}else o.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})}(zi)),zi.exports}var Hi={exports:{}},Oa;function zh(){return Oa||(Oa=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var u=c.words,l=c.sigBytes,h=[],f=0;f<l;f+=2){var d=u[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(d))}return h.join("")},parse:function(c){for(var u=c.length,l=[],h=0;h<u;h++)l[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return s.create(l,u*2)}},o.Utf16LE={stringify:function(c){for(var u=c.words,l=c.sigBytes,h=[],f=0;f<l;f+=2){var d=a(u[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(d))}return h.join("")},parse:function(c){for(var u=c.length,l=[],h=0;h<u;h++)l[h>>>1]|=a(c.charCodeAt(h)<<16-h%2*16);return s.create(l,u*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(Hi)),Hi.exports}var ji={exports:{}},La;function Ne(){return La||(La=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var u=c.words,l=c.sigBytes,h=this._map;c.clamp();for(var f=[],d=0;d<l;d+=3)for(var x=u[d>>>2]>>>24-d%4*8&255,p=u[d+1>>>2]>>>24-(d+1)%4*8&255,m=u[d+2>>>2]>>>24-(d+2)%4*8&255,v=x<<16|p<<8|m,g=0;g<4&&d+g*.75<l;g++)f.push(h.charAt(v>>>6*(3-g)&63));var _=h.charAt(64);if(_)for(;f.length%4;)f.push(_);return f.join("")},parse:function(c){var u=c.length,l=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<l.length;f++)h[l.charCodeAt(f)]=f}var d=l.charAt(64);if(d){var x=c.indexOf(d);x!==-1&&(u=x)}return a(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,u,l){for(var h=[],f=0,d=0;d<u;d++)if(d%4){var x=l[c.charCodeAt(d-1)]<<d%4*2,p=l[c.charCodeAt(d)]>>>6-d%4*2,m=x|p;h[f>>>2]|=m<<24-f%4*8,f++}return s.create(h,f)}}(),r.enc.Base64})}(ji)),ji.exports}var $i={exports:{}},Ma;function Hh(){return Ma||(Ma=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var l=c.words,h=c.sigBytes,f=u?this._safe_map:this._map;c.clamp();for(var d=[],x=0;x<h;x+=3)for(var p=l[x>>>2]>>>24-x%4*8&255,m=l[x+1>>>2]>>>24-(x+1)%4*8&255,v=l[x+2>>>2]>>>24-(x+2)%4*8&255,g=p<<16|m<<8|v,_=0;_<4&&x+_*.75<h;_++)d.push(f.charAt(g>>>6*(3-_)&63));var y=f.charAt(64);if(y)for(;d.length%4;)d.push(y);return d.join("")},parse:function(c,u){u===void 0&&(u=!0);var l=c.length,h=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<h.length;d++)f[h.charCodeAt(d)]=d}var x=h.charAt(64);if(x){var p=c.indexOf(x);p!==-1&&(l=p)}return a(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,u,l){for(var h=[],f=0,d=0;d<u;d++)if(d%4){var x=l[c.charCodeAt(d-1)]<<d%4*2,p=l[c.charCodeAt(d)]>>>6-d%4*2,m=x|p;h[f>>>2]|=m<<24-f%4*8,f++}return s.create(h,f)}}(),r.enc.Base64url})}($i)),$i.exports}var Ki={exports:{}},Ua;function Oe(){return Ua||(Ua=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=[];(function(){for(var p=0;p<64;p++)u[p]=n.abs(n.sin(p+1))*4294967296|0})();var l=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,m){for(var v=0;v<16;v++){var g=m+v,_=p[g];p[g]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var y=this._hash.words,C=p[m+0],A=p[m+1],w=p[m+2],D=p[m+3],N=p[m+4],E=p[m+5],T=p[m+6],B=p[m+7],S=p[m+8],U=p[m+9],H=p[m+10],K=p[m+11],at=p[m+12],et=p[m+13],st=p[m+14],nt=p[m+15],F=y[0],V=y[1],k=y[2],P=y[3];F=h(F,V,k,P,C,7,u[0]),P=h(P,F,V,k,A,12,u[1]),k=h(k,P,F,V,w,17,u[2]),V=h(V,k,P,F,D,22,u[3]),F=h(F,V,k,P,N,7,u[4]),P=h(P,F,V,k,E,12,u[5]),k=h(k,P,F,V,T,17,u[6]),V=h(V,k,P,F,B,22,u[7]),F=h(F,V,k,P,S,7,u[8]),P=h(P,F,V,k,U,12,u[9]),k=h(k,P,F,V,H,17,u[10]),V=h(V,k,P,F,K,22,u[11]),F=h(F,V,k,P,at,7,u[12]),P=h(P,F,V,k,et,12,u[13]),k=h(k,P,F,V,st,17,u[14]),V=h(V,k,P,F,nt,22,u[15]),F=f(F,V,k,P,A,5,u[16]),P=f(P,F,V,k,T,9,u[17]),k=f(k,P,F,V,K,14,u[18]),V=f(V,k,P,F,C,20,u[19]),F=f(F,V,k,P,E,5,u[20]),P=f(P,F,V,k,H,9,u[21]),k=f(k,P,F,V,nt,14,u[22]),V=f(V,k,P,F,N,20,u[23]),F=f(F,V,k,P,U,5,u[24]),P=f(P,F,V,k,st,9,u[25]),k=f(k,P,F,V,D,14,u[26]),V=f(V,k,P,F,S,20,u[27]),F=f(F,V,k,P,et,5,u[28]),P=f(P,F,V,k,w,9,u[29]),k=f(k,P,F,V,B,14,u[30]),V=f(V,k,P,F,at,20,u[31]),F=d(F,V,k,P,E,4,u[32]),P=d(P,F,V,k,S,11,u[33]),k=d(k,P,F,V,K,16,u[34]),V=d(V,k,P,F,st,23,u[35]),F=d(F,V,k,P,A,4,u[36]),P=d(P,F,V,k,N,11,u[37]),k=d(k,P,F,V,B,16,u[38]),V=d(V,k,P,F,H,23,u[39]),F=d(F,V,k,P,et,4,u[40]),P=d(P,F,V,k,C,11,u[41]),k=d(k,P,F,V,D,16,u[42]),V=d(V,k,P,F,T,23,u[43]),F=d(F,V,k,P,U,4,u[44]),P=d(P,F,V,k,at,11,u[45]),k=d(k,P,F,V,nt,16,u[46]),V=d(V,k,P,F,w,23,u[47]),F=x(F,V,k,P,C,6,u[48]),P=x(P,F,V,k,B,10,u[49]),k=x(k,P,F,V,st,15,u[50]),V=x(V,k,P,F,E,21,u[51]),F=x(F,V,k,P,at,6,u[52]),P=x(P,F,V,k,D,10,u[53]),k=x(k,P,F,V,H,15,u[54]),V=x(V,k,P,F,A,21,u[55]),F=x(F,V,k,P,S,6,u[56]),P=x(P,F,V,k,nt,10,u[57]),k=x(k,P,F,V,T,15,u[58]),V=x(V,k,P,F,et,21,u[59]),F=x(F,V,k,P,N,6,u[60]),P=x(P,F,V,k,K,10,u[61]),k=x(k,P,F,V,w,15,u[62]),V=x(V,k,P,F,U,21,u[63]),y[0]=y[0]+F|0,y[1]=y[1]+V|0,y[2]=y[2]+k|0,y[3]=y[3]+P|0},_doFinalize:function(){var p=this._data,m=p.words,v=this._nDataBytes*8,g=p.sigBytes*8;m[g>>>5]|=128<<24-g%32;var _=n.floor(v/4294967296),y=v;m[(g+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m[(g+64>>>9<<4)+14]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,p.sigBytes=(m.length+1)*4,this._process();for(var C=this._hash,A=C.words,w=0;w<4;w++){var D=A[w];A[w]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return C},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});function h(p,m,v,g,_,y,C){var A=p+(m&v|~m&g)+_+C;return(A<<y|A>>>32-y)+m}function f(p,m,v,g,_,y,C){var A=p+(m&g|v&~g)+_+C;return(A<<y|A>>>32-y)+m}function d(p,m,v,g,_,y,C){var A=p+(m^v^g)+_+C;return(A<<y|A>>>32-y)+m}function x(p,m,v,g,_,y,C){var A=p+(v^(m|~g))+_+C;return(A<<y|A>>>32-y)+m}i.MD5=a._createHelper(l),i.HmacMD5=a._createHmacHelper(l)}(Math),r.MD5})}(Ki)),Ki.exports}var Gi={exports:{}},qa;function Bu(){return qa||(qa=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,c=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,h){for(var f=this._hash.words,d=f[0],x=f[1],p=f[2],m=f[3],v=f[4],g=0;g<80;g++){if(g<16)c[g]=l[h+g]|0;else{var _=c[g-3]^c[g-8]^c[g-14]^c[g-16];c[g]=_<<1|_>>>31}var y=(d<<5|d>>>27)+v+c[g];g<20?y+=(x&p|~x&m)+1518500249:g<40?y+=(x^p^m)+1859775393:g<60?y+=(x&p|x&m|p&m)-1894007588:y+=(x^p^m)-899497514,v=m,m=p,p=x<<30|x>>>2,x=d,d=y}f[0]=f[0]+d|0,f[1]=f[1]+x|0,f[2]=f[2]+p|0,f[3]=f[3]+m|0,f[4]=f[4]+v|0},_doFinalize:function(){var l=this._data,h=l.words,f=this._nDataBytes*8,d=l.sigBytes*8;return h[d>>>5]|=128<<24-d%32,h[(d+64>>>9<<4)+14]=Math.floor(f/4294967296),h[(d+64>>>9<<4)+15]=f,l.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var l=o.clone.call(this);return l._hash=this._hash.clone(),l}});n.SHA1=o._createHelper(u),n.HmacSHA1=o._createHmacHelper(u)}(),r.SHA1})}(Gi)),Gi.exports}var Wi={exports:{}},za;function fo(){return za||(za=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=[],l=[];(function(){function d(v){for(var g=n.sqrt(v),_=2;_<=g;_++)if(!(v%_))return!1;return!0}function x(v){return(v-(v|0))*4294967296|0}for(var p=2,m=0;m<64;)d(p)&&(m<8&&(u[m]=x(n.pow(p,1/2))),l[m]=x(n.pow(p,1/3)),m++),p++})();var h=[],f=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(d,x){for(var p=this._hash.words,m=p[0],v=p[1],g=p[2],_=p[3],y=p[4],C=p[5],A=p[6],w=p[7],D=0;D<64;D++){if(D<16)h[D]=d[x+D]|0;else{var N=h[D-15],E=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,T=h[D-2],B=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;h[D]=E+h[D-7]+B+h[D-16]}var S=y&C^~y&A,U=m&v^m&g^v&g,H=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),K=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),at=w+K+S+l[D]+h[D],et=H+U;w=A,A=C,C=y,y=_+at|0,_=g,g=v,v=m,m=at+et|0}p[0]=p[0]+m|0,p[1]=p[1]+v|0,p[2]=p[2]+g|0,p[3]=p[3]+_|0,p[4]=p[4]+y|0,p[5]=p[5]+C|0,p[6]=p[6]+A|0,p[7]=p[7]+w|0},_doFinalize:function(){var d=this._data,x=d.words,p=this._nDataBytes*8,m=d.sigBytes*8;return x[m>>>5]|=128<<24-m%32,x[(m+64>>>9<<4)+14]=n.floor(p/4294967296),x[(m+64>>>9<<4)+15]=p,d.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),r.SHA256})}(Wi)),Wi.exports}var Qi={exports:{}},Ha;function jh(){return Ha||(Ha=1,function(e,t){(function(r,n,i){e.exports=n(X(),fo())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),r.SHA224})}(Qi)),Qi.exports}var Xi={exports:{}},ja;function Su(){return ja||(ja=1,function(e,t){(function(r,n,i){e.exports=n(X(),ti())})(G,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,c=o.WordArray,u=n.algo;function l(){return a.create.apply(a,arguments)}var h=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var x=0;x<80;x++)f[x]=l()})();var d=u.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(x,p){for(var m=this._hash.words,v=m[0],g=m[1],_=m[2],y=m[3],C=m[4],A=m[5],w=m[6],D=m[7],N=v.high,E=v.low,T=g.high,B=g.low,S=_.high,U=_.low,H=y.high,K=y.low,at=C.high,et=C.low,st=A.high,nt=A.low,F=w.high,V=w.low,k=D.high,P=D.low,ct=N,ot=E,Ot=T,W=B,pr=S,qe=U,Li=H,mr=K,Xt=at,Mt=et,vn=st,gr=nt,En=F,_r=V,Mi=k,yr=P,Yt=0;Yt<80;Yt++){var zt,pe,An=f[Yt];if(Yt<16)pe=An.high=x[p+Yt*2]|0,zt=An.low=x[p+Yt*2+1]|0;else{var Ea=f[Yt-15],ze=Ea.high,vr=Ea.low,uh=(ze>>>1|vr<<31)^(ze>>>8|vr<<24)^ze>>>7,Aa=(vr>>>1|ze<<31)^(vr>>>8|ze<<24)^(vr>>>7|ze<<25),Ca=f[Yt-2],He=Ca.high,Er=Ca.low,ch=(He>>>19|Er<<13)^(He<<3|Er>>>29)^He>>>6,wa=(Er>>>19|He<<13)^(Er<<3|He>>>29)^(Er>>>6|He<<26),Ta=f[Yt-7],lh=Ta.high,hh=Ta.low,Da=f[Yt-16],fh=Da.high,Ia=Da.low;zt=Aa+hh,pe=uh+lh+(zt>>>0<Aa>>>0?1:0),zt=zt+wa,pe=pe+ch+(zt>>>0<wa>>>0?1:0),zt=zt+Ia,pe=pe+fh+(zt>>>0<Ia>>>0?1:0),An.high=pe,An.low=zt}var dh=Xt&vn^~Xt&En,Ra=Mt&gr^~Mt&_r,xh=ct&Ot^ct&pr^Ot&pr,ph=ot&W^ot&qe^W&qe,mh=(ct>>>28|ot<<4)^(ct<<30|ot>>>2)^(ct<<25|ot>>>7),Fa=(ot>>>28|ct<<4)^(ot<<30|ct>>>2)^(ot<<25|ct>>>7),gh=(Xt>>>14|Mt<<18)^(Xt>>>18|Mt<<14)^(Xt<<23|Mt>>>9),_h=(Mt>>>14|Xt<<18)^(Mt>>>18|Xt<<14)^(Mt<<23|Xt>>>9),Ba=h[Yt],yh=Ba.high,Sa=Ba.low,Ut=yr+_h,me=Mi+gh+(Ut>>>0<yr>>>0?1:0),Ut=Ut+Ra,me=me+dh+(Ut>>>0<Ra>>>0?1:0),Ut=Ut+Sa,me=me+yh+(Ut>>>0<Sa>>>0?1:0),Ut=Ut+zt,me=me+pe+(Ut>>>0<zt>>>0?1:0),Pa=Fa+ph,vh=mh+xh+(Pa>>>0<Fa>>>0?1:0);Mi=En,yr=_r,En=vn,_r=gr,vn=Xt,gr=Mt,Mt=mr+Ut|0,Xt=Li+me+(Mt>>>0<mr>>>0?1:0)|0,Li=pr,mr=qe,pr=Ot,qe=W,Ot=ct,W=ot,ot=Ut+Pa|0,ct=me+vh+(ot>>>0<Ut>>>0?1:0)|0}E=v.low=E+ot,v.high=N+ct+(E>>>0<ot>>>0?1:0),B=g.low=B+W,g.high=T+Ot+(B>>>0<W>>>0?1:0),U=_.low=U+qe,_.high=S+pr+(U>>>0<qe>>>0?1:0),K=y.low=K+mr,y.high=H+Li+(K>>>0<mr>>>0?1:0),et=C.low=et+Mt,C.high=at+Xt+(et>>>0<Mt>>>0?1:0),nt=A.low=nt+gr,A.high=st+vn+(nt>>>0<gr>>>0?1:0),V=w.low=V+_r,w.high=F+En+(V>>>0<_r>>>0?1:0),P=D.low=P+yr,D.high=k+Mi+(P>>>0<yr>>>0?1:0)},_doFinalize:function(){var x=this._data,p=x.words,m=this._nDataBytes*8,v=x.sigBytes*8;p[v>>>5]|=128<<24-v%32,p[(v+128>>>10<<5)+30]=Math.floor(m/4294967296),p[(v+128>>>10<<5)+31]=m,x.sigBytes=p.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});n.SHA512=s._createHelper(d),n.HmacSHA512=s._createHmacHelper(d)}(),r.SHA512})}(Xi)),Xi.exports}var Yi={exports:{}},$a;function $h(){return $a||($a=1,function(e,t){(function(r,n,i){e.exports=n(X(),ti(),Su())})(G,function(r){return function(){var n=r,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var l=c._doFinalize.call(this);return l.sigBytes-=16,l}});n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u)}(),r.SHA384})}(Yi)),Yi.exports}var Ji={exports:{}},Ka;function Kh(){return Ka||(Ka=1,function(e,t){(function(r,n,i){e.exports=n(X(),ti())})(G,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.x64,u=c.Word,l=i.algo,h=[],f=[],d=[];(function(){for(var m=1,v=0,g=0;g<24;g++){h[m+5*v]=(g+1)*(g+2)/2%64;var _=v%5,y=(2*m+3*v)%5;m=_,v=y}for(var m=0;m<5;m++)for(var v=0;v<5;v++)f[m+5*v]=v+(2*m+3*v)%5*5;for(var C=1,A=0;A<24;A++){for(var w=0,D=0,N=0;N<7;N++){if(C&1){var E=(1<<N)-1;E<32?D^=1<<E:w^=1<<E-32}C&128?C=C<<1^113:C<<=1}d[A]=u.create(w,D)}})();var x=[];(function(){for(var m=0;m<25;m++)x[m]=u.create()})();var p=l.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],v=0;v<25;v++)m[v]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,v){for(var g=this._state,_=this.blockSize/2,y=0;y<_;y++){var C=m[v+2*y],A=m[v+2*y+1];C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var w=g[y];w.high^=A,w.low^=C}for(var D=0;D<24;D++){for(var N=0;N<5;N++){for(var E=0,T=0,B=0;B<5;B++){var w=g[N+5*B];E^=w.high,T^=w.low}var S=x[N];S.high=E,S.low=T}for(var N=0;N<5;N++)for(var U=x[(N+4)%5],H=x[(N+1)%5],K=H.high,at=H.low,E=U.high^(K<<1|at>>>31),T=U.low^(at<<1|K>>>31),B=0;B<5;B++){var w=g[N+5*B];w.high^=E,w.low^=T}for(var et=1;et<25;et++){var E,T,w=g[et],st=w.high,nt=w.low,F=h[et];F<32?(E=st<<F|nt>>>32-F,T=nt<<F|st>>>32-F):(E=nt<<F-32|st>>>64-F,T=st<<F-32|nt>>>64-F);var V=x[f[et]];V.high=E,V.low=T}var k=x[0],P=g[0];k.high=P.high,k.low=P.low;for(var N=0;N<5;N++)for(var B=0;B<5;B++){var et=N+5*B,w=g[et],ct=x[et],ot=x[(N+1)%5+5*B],Ot=x[(N+2)%5+5*B];w.high=ct.high^~ot.high&Ot.high,w.low=ct.low^~ot.low&Ot.low}var w=g[0],W=d[D];w.high^=W.high,w.low^=W.low}},_doFinalize:function(){var m=this._data,v=m.words;this._nDataBytes*8;var g=m.sigBytes*8,_=this.blockSize*32;v[g>>>5]|=1<<24-g%32,v[(n.ceil((g+1)/_)*_>>>5)-1]|=128,m.sigBytes=v.length*4,this._process();for(var y=this._state,C=this.cfg.outputLength/8,A=C/8,w=[],D=0;D<A;D++){var N=y[D],E=N.high,T=N.low;E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,w.push(T),w.push(E)}return new o.init(w,C)},clone:function(){for(var m=a.clone.call(this),v=m._state=this._state.slice(0),g=0;g<25;g++)v[g]=v[g].clone();return m}});i.SHA3=a._createHelper(p),i.HmacSHA3=a._createHmacHelper(p)}(Math),r.SHA3})}(Ji)),Ji.exports}var Zi={exports:{}},Ga;function Gh(){return Ga||(Ga=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),p=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,w){for(var D=0;D<16;D++){var N=w+D,E=A[N];A[N]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var T=this._hash.words,B=d.words,S=x.words,U=u.words,H=l.words,K=h.words,at=f.words,et,st,nt,F,V,k,P,ct,ot,Ot;k=et=T[0],P=st=T[1],ct=nt=T[2],ot=F=T[3],Ot=V=T[4];for(var W,D=0;D<80;D+=1)W=et+A[w+U[D]]|0,D<16?W+=m(st,nt,F)+B[0]:D<32?W+=v(st,nt,F)+B[1]:D<48?W+=g(st,nt,F)+B[2]:D<64?W+=_(st,nt,F)+B[3]:W+=y(st,nt,F)+B[4],W=W|0,W=C(W,K[D]),W=W+V|0,et=V,V=F,F=C(nt,10),nt=st,st=W,W=k+A[w+H[D]]|0,D<16?W+=y(P,ct,ot)+S[0]:D<32?W+=_(P,ct,ot)+S[1]:D<48?W+=g(P,ct,ot)+S[2]:D<64?W+=v(P,ct,ot)+S[3]:W+=m(P,ct,ot)+S[4],W=W|0,W=C(W,at[D]),W=W+Ot|0,k=Ot,Ot=ot,ot=C(ct,10),ct=P,P=W;W=T[1]+nt+ot|0,T[1]=T[2]+F+Ot|0,T[2]=T[3]+V+k|0,T[3]=T[4]+et+P|0,T[4]=T[0]+st+ct|0,T[0]=W},_doFinalize:function(){var A=this._data,w=A.words,D=this._nDataBytes*8,N=A.sigBytes*8;w[N>>>5]|=128<<24-N%32,w[(N+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,A.sigBytes=(w.length+1)*4,this._process();for(var E=this._hash,T=E.words,B=0;B<5;B++){var S=T[B];T[B]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return E},clone:function(){var A=a.clone.call(this);return A._hash=this._hash.clone(),A}});function m(A,w,D){return A^w^D}function v(A,w,D){return A&w|~A&D}function g(A,w,D){return(A|~w)^D}function _(A,w,D){return A&D|w&~D}function y(A,w,D){return A^(w|~D)}function C(A,w){return A<<w|A>>>32-w}i.RIPEMD160=a._createHelper(p),i.HmacRIPEMD160=a._createHmacHelper(p)}(),r.RIPEMD160})}(Zi)),Zi.exports}var ts={exports:{}},Wa;function xo(){return Wa||(Wa=1,function(e,t){(function(r,n){e.exports=n(X())})(G,function(r){(function(){var n=r,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,c=n.algo;c.HMAC=s.extend({init:function(u,l){u=this._hasher=new u.init,typeof l=="string"&&(l=a.parse(l));var h=u.blockSize,f=h*4;l.sigBytes>f&&(l=u.finalize(l)),l.clamp();for(var d=this._oKey=l.clone(),x=this._iKey=l.clone(),p=d.words,m=x.words,v=0;v<h;v++)p[v]^=1549556828,m[v]^=909522486;d.sigBytes=x.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var l=this._hasher,h=l.finalize(u);l.reset();var f=l.finalize(this._oKey.clone().concat(h));return f}})})()})}(ts)),ts.exports}var es={exports:{}},Qa;function Wh(){return Qa||(Qa=1,function(e,t){(function(r,n,i){e.exports=n(X(),fo(),xo())})(G,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.SHA256,u=a.HMAC,l=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,f){for(var d=this.cfg,x=u.create(d.hasher,h),p=o.create(),m=o.create([1]),v=p.words,g=m.words,_=d.keySize,y=d.iterations;v.length<_;){var C=x.update(f).finalize(m);x.reset();for(var A=C.words,w=A.length,D=C,N=1;N<y;N++){D=x.finalize(D),x.reset();for(var E=D.words,T=0;T<w;T++)A[T]^=E[T]}p.concat(C),g[0]++}return p.sigBytes=_*4,p}});n.PBKDF2=function(h,f,d){return l.create(d).compute(h,f)}}(),r.PBKDF2})}(es)),es.exports}var rs={exports:{}},Xa;function we(){return Xa||(Xa=1,function(e,t){(function(r,n,i){e.exports=n(X(),Bu(),xo())})(G,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,c=a.MD5,u=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,h){for(var f,d=this.cfg,x=d.hasher.create(),p=o.create(),m=p.words,v=d.keySize,g=d.iterations;m.length<v;){f&&x.update(f),f=x.update(l).finalize(h),x.reset();for(var _=1;_<g;_++)f=x.finalize(f),x.reset();p.concat(f)}return p.sigBytes=v*4,p}});n.EvpKDF=function(l,h,f){return u.create(f).compute(l,h)}}(),r.EvpKDF})}(rs)),rs.exports}var ns={exports:{}},Ya;function Ct(){return Ya||(Ya=1,function(e,t){(function(r,n,i){e.exports=n(X(),we())})(G,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var l=u.Base64,h=i.algo,f=h.EvpKDF,d=s.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(E,T){return this.create(this._ENC_XFORM_MODE,E,T)},createDecryptor:function(E,T){return this.create(this._DEC_XFORM_MODE,E,T)},init:function(E,T,B){this.cfg=this.cfg.extend(B),this._xformMode=E,this._key=T,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var T=this._doFinalize();return T},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(T){return typeof T=="string"?N:A}return function(T){return{encrypt:function(B,S,U){return E(S).encrypt(T,B,S,U)},decrypt:function(B,S,U){return E(S).decrypt(T,B,S,U)}}}}()});s.StreamCipher=d.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1});var x=i.mode={},p=s.BlockCipherMode=o.extend({createEncryptor:function(E,T){return this.Encryptor.create(E,T)},createDecryptor:function(E,T){return this.Decryptor.create(E,T)},init:function(E,T){this._cipher=E,this._iv=T}}),m=x.CBC=function(){var E=p.extend();E.Encryptor=E.extend({processBlock:function(B,S){var U=this._cipher,H=U.blockSize;T.call(this,B,S,H),U.encryptBlock(B,S),this._prevBlock=B.slice(S,S+H)}}),E.Decryptor=E.extend({processBlock:function(B,S){var U=this._cipher,H=U.blockSize,K=B.slice(S,S+H);U.decryptBlock(B,S),T.call(this,B,S,H),this._prevBlock=K}});function T(B,S,U){var H,K=this._iv;K?(H=K,this._iv=n):H=this._prevBlock;for(var at=0;at<U;at++)B[S+at]^=H[at]}return E}(),v=i.pad={},g=v.Pkcs7={pad:function(E,T){for(var B=T*4,S=B-E.sigBytes%B,U=S<<24|S<<16|S<<8|S,H=[],K=0;K<S;K+=4)H.push(U);var at=a.create(H,S);E.concat(at)},unpad:function(E){var T=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=T}};s.BlockCipher=d.extend({cfg:d.cfg.extend({mode:m,padding:g}),reset:function(){var E;d.reset.call(this);var T=this.cfg,B=T.iv,S=T.mode;this._xformMode==this._ENC_XFORM_MODE?E=S.createEncryptor:(E=S.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,B&&B.words):(this._mode=E.call(S,this,B&&B.words),this._mode.__creator=E)},_doProcessBlock:function(E,T){this._mode.processBlock(E,T)},_doFinalize:function(){var E,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),T.unpad(E)),E},blockSize:128/32});var _=s.CipherParams=o.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),y=i.format={},C=y.OpenSSL={stringify:function(E){var T,B=E.ciphertext,S=E.salt;return S?T=a.create([1398893684,1701076831]).concat(S).concat(B):T=B,T.toString(l)},parse:function(E){var T,B=l.parse(E),S=B.words;return S[0]==1398893684&&S[1]==1701076831&&(T=a.create(S.slice(2,4)),S.splice(0,4),B.sigBytes-=16),_.create({ciphertext:B,salt:T})}},A=s.SerializableCipher=o.extend({cfg:o.extend({format:C}),encrypt:function(E,T,B,S){S=this.cfg.extend(S);var U=E.createEncryptor(B,S),H=U.finalize(T),K=U.cfg;return _.create({ciphertext:H,key:B,iv:K.iv,algorithm:E,mode:K.mode,padding:K.padding,blockSize:E.blockSize,formatter:S.format})},decrypt:function(E,T,B,S){S=this.cfg.extend(S),T=this._parse(T,S.format);var U=E.createDecryptor(B,S).finalize(T.ciphertext);return U},_parse:function(E,T){return typeof E=="string"?T.parse(E,this):E}}),w=i.kdf={},D=w.OpenSSL={execute:function(E,T,B,S,U){if(S||(S=a.random(64/8)),U)var H=f.create({keySize:T+B,hasher:U}).compute(E,S);else var H=f.create({keySize:T+B}).compute(E,S);var K=a.create(H.words.slice(T),B*4);return H.sigBytes=T*4,_.create({key:H,iv:K,salt:S})}},N=s.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:D}),encrypt:function(E,T,B,S){S=this.cfg.extend(S);var U=S.kdf.execute(B,E.keySize,E.ivSize,S.salt,S.hasher);S.iv=U.iv;var H=A.encrypt.call(this,E,T,U.key,S);return H.mixIn(U),H},decrypt:function(E,T,B,S){S=this.cfg.extend(S),T=this._parse(T,S.format);var U=S.kdf.execute(B,E.keySize,E.ivSize,T.salt,S.hasher);S.iv=U.iv;var H=A.decrypt.call(this,E,T,U.key,S);return H}})}()})}(ns)),ns.exports}var is={exports:{}},Ja;function Qh(){return Ja||(Ja=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize;i.call(this,s,o,c,a),this._prevBlock=s.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=s.slice(o,o+c);i.call(this,s,o,c,a),this._prevBlock=u}});function i(s,o,a,c){var u,l=this._iv;l?(u=l.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var h=0;h<a;h++)s[o+h]^=u[h]}return n}(),r.mode.CFB})}(is)),is.exports}var ss={exports:{}},Za;function Xh(){return Za||(Za=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,l=this._counter;u&&(l=this._counter=u.slice(0),this._iv=void 0);var h=l.slice(0);a.encryptBlock(h,0),l[c-1]=l[c-1]+1|0;for(var f=0;f<c;f++)s[o+f]^=h[f]}});return n.Decryptor=i,n}(),r.mode.CTR})}(ss)),ss.exports}var os={exports:{}},t0;function Yh(){return t0||(t0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,u=a>>8&255,l=a&255;c===255?(c=0,u===255?(u=0,l===255?l=0:++l):++u):++c,a=0,a+=c<<16,a+=u<<8,a+=l}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,c){var u=this._cipher,l=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0),s(f);var d=f.slice(0);u.encryptBlock(d,0);for(var x=0;x<l;x++)a[c+x]^=d[x]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(os)),os.exports}var as={exports:{}},e0;function Jh(){return e0||(e0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,u=this._iv,l=this._keystream;u&&(l=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(l,0);for(var h=0;h<c;h++)s[o+h]^=l[h]}});return n.Decryptor=i,n}(),r.mode.OFB})}(as)),as.exports}var us={exports:{}},r0;function Zh(){return r0||(r0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(us)),us.exports}var cs={exports:{}},n0;function tf(){return n0||(n0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,c=s+a-1;n.clamp(),n.words[c>>>2]|=a<<24-c%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(cs)),cs.exports}var ls={exports:{}},i0;function ef(){return i0||(i0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(ls)),ls.exports}var hs={exports:{}},s0;function rf(){return s0||(s0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(hs)),hs.exports}var fs={exports:{}},o0;function nf(){return o0||(o0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(fs)),fs.exports}var ds={exports:{}},a0;function sf(){return a0||(a0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(ds)),ds.exports}var xs={exports:{}},u0;function of(){return u0||(u0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ct())})(G,function(r){return function(n){var i=r,s=i.lib,o=s.CipherParams,a=i.enc,c=a.Hex,u=i.format;u.Hex={stringify:function(l){return l.ciphertext.toString(c)},parse:function(l){var h=c.parse(l);return o.create({ciphertext:h})}}}(),r.format.Hex})}(xs)),xs.exports}var ps={exports:{}},c0;function af(){return c0||(c0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],c=[],u=[],l=[],h=[],f=[],d=[],x=[],p=[],m=[];(function(){for(var _=[],y=0;y<256;y++)y<128?_[y]=y<<1:_[y]=y<<1^283;for(var C=0,A=0,y=0;y<256;y++){var w=A^A<<1^A<<2^A<<3^A<<4;w=w>>>8^w&255^99,a[C]=w,c[w]=C;var D=_[C],N=_[D],E=_[N],T=_[w]*257^w*16843008;u[C]=T<<24|T>>>8,l[C]=T<<16|T>>>16,h[C]=T<<8|T>>>24,f[C]=T;var T=E*16843009^N*65537^D*257^C*16843008;d[w]=T<<24|T>>>8,x[w]=T<<16|T>>>16,p[w]=T<<8|T>>>24,m[w]=T,C?(C=D^_[_[_[E^D]]],A^=_[_[A]]):C=A=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=s.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var y=this._keyPriorReset=this._key,C=y.words,A=y.sigBytes/4,w=this._nRounds=A+6,D=(w+1)*4,N=this._keySchedule=[],E=0;E<D;E++)E<A?N[E]=C[E]:(_=N[E-1],E%A?A>6&&E%A==4&&(_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255]):(_=_<<8|_>>>24,_=a[_>>>24]<<24|a[_>>>16&255]<<16|a[_>>>8&255]<<8|a[_&255],_^=v[E/A|0]<<24),N[E]=N[E-A]^_);for(var T=this._invKeySchedule=[],B=0;B<D;B++){var E=D-B;if(B%4)var _=N[E];else var _=N[E-4];B<4||E<=4?T[B]=_:T[B]=d[a[_>>>24]]^x[a[_>>>16&255]]^p[a[_>>>8&255]]^m[a[_&255]]}}},encryptBlock:function(_,y){this._doCryptBlock(_,y,this._keySchedule,u,l,h,f,a)},decryptBlock:function(_,y){var C=_[y+1];_[y+1]=_[y+3],_[y+3]=C,this._doCryptBlock(_,y,this._invKeySchedule,d,x,p,m,c);var C=_[y+1];_[y+1]=_[y+3],_[y+3]=C},_doCryptBlock:function(_,y,C,A,w,D,N,E){for(var T=this._nRounds,B=_[y]^C[0],S=_[y+1]^C[1],U=_[y+2]^C[2],H=_[y+3]^C[3],K=4,at=1;at<T;at++){var et=A[B>>>24]^w[S>>>16&255]^D[U>>>8&255]^N[H&255]^C[K++],st=A[S>>>24]^w[U>>>16&255]^D[H>>>8&255]^N[B&255]^C[K++],nt=A[U>>>24]^w[H>>>16&255]^D[B>>>8&255]^N[S&255]^C[K++],F=A[H>>>24]^w[B>>>16&255]^D[S>>>8&255]^N[U&255]^C[K++];B=et,S=st,U=nt,H=F}var et=(E[B>>>24]<<24|E[S>>>16&255]<<16|E[U>>>8&255]<<8|E[H&255])^C[K++],st=(E[S>>>24]<<24|E[U>>>16&255]<<16|E[H>>>8&255]<<8|E[B&255])^C[K++],nt=(E[U>>>24]<<24|E[H>>>16&255]<<16|E[B>>>8&255]<<8|E[S&255])^C[K++],F=(E[H>>>24]<<24|E[B>>>16&255]<<16|E[S>>>8&255]<<8|E[U&255])^C[K++];_[y]=et,_[y+1]=st,_[y+2]=nt,_[y+3]=F},keySize:256/32});n.AES=s._createHelper(g)}(),r.AES})}(ps)),ps.exports}var ms={exports:{}},l0;function uf(){return l0||(l0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=a.DES=o.extend({_doReset:function(){for(var v=this._key,g=v.words,_=[],y=0;y<56;y++){var C=c[y]-1;_[y]=g[C>>>5]>>>31-C%32&1}for(var A=this._subKeys=[],w=0;w<16;w++){for(var D=A[w]=[],N=l[w],y=0;y<24;y++)D[y/6|0]|=_[(u[y]-1+N)%28]<<31-y%6,D[4+(y/6|0)]|=_[28+(u[y+24]-1+N)%28]<<31-y%6;D[0]=D[0]<<1|D[0]>>>31;for(var y=1;y<7;y++)D[y]=D[y]>>>(y-1)*4+3;D[7]=D[7]<<5|D[7]>>>27}for(var E=this._invSubKeys=[],y=0;y<16;y++)E[y]=A[15-y]},encryptBlock:function(v,g){this._doCryptBlock(v,g,this._subKeys)},decryptBlock:function(v,g){this._doCryptBlock(v,g,this._invSubKeys)},_doCryptBlock:function(v,g,_){this._lBlock=v[g],this._rBlock=v[g+1],x.call(this,4,252645135),x.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),x.call(this,1,1431655765);for(var y=0;y<16;y++){for(var C=_[y],A=this._lBlock,w=this._rBlock,D=0,N=0;N<8;N++)D|=h[N][((w^C[N])&f[N])>>>0];this._lBlock=w,this._rBlock=A^D}var E=this._lBlock;this._lBlock=this._rBlock,this._rBlock=E,x.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),v[g]=this._lBlock,v[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(v,g){var _=(this._lBlock>>>v^this._rBlock)&g;this._rBlock^=_,this._lBlock^=_<<v}function p(v,g){var _=(this._rBlock>>>v^this._lBlock)&g;this._lBlock^=_,this._rBlock^=_<<v}n.DES=o._createHelper(d);var m=a.TripleDES=o.extend({_doReset:function(){var v=this._key,g=v.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=g.slice(0,2),y=g.length<4?g.slice(0,2):g.slice(2,4),C=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=d.createEncryptor(s.create(_)),this._des2=d.createEncryptor(s.create(y)),this._des3=d.createEncryptor(s.create(C))},encryptBlock:function(v,g){this._des1.encryptBlock(v,g),this._des2.decryptBlock(v,g),this._des3.encryptBlock(v,g)},decryptBlock:function(v,g){this._des3.decryptBlock(v,g),this._des2.encryptBlock(v,g),this._des1.decryptBlock(v,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(m)}(),r.TripleDES})}(ms)),ms.exports}var gs={exports:{}},h0;function cf(){return h0||(h0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var l=this._key,h=l.words,f=l.sigBytes,d=this._S=[],x=0;x<256;x++)d[x]=x;for(var x=0,p=0;x<256;x++){var m=x%f,v=h[m>>>2]>>>24-m%4*8&255;p=(p+d[x]+v)%256;var g=d[x];d[x]=d[p],d[p]=g}this._i=this._j=0},_doProcessBlock:function(l,h){l[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var l=this._S,h=this._i,f=this._j,d=0,x=0;x<4;x++){h=(h+1)%256,f=(f+l[h])%256;var p=l[h];l[h]=l[f],l[f]=p,d|=l[(l[h]+l[f])%256]<<24-x*8}return this._i=h,this._j=f,d}n.RC4=s._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)c.call(this)}});n.RC4Drop=s._createHelper(u)}(),r.RC4})}(gs)),gs.exports}var _s={exports:{}},f0;function lf(){return f0||(f0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],u=[],l=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,d=this.cfg.iv,x=0;x<4;x++)f[x]=(f[x]<<8|f[x]>>>24)&16711935|(f[x]<<24|f[x]>>>8)&4278255360;var p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var x=0;x<4;x++)h.call(this);for(var x=0;x<8;x++)m[x]^=p[x+4&7];if(d){var v=d.words,g=v[0],_=v[1],y=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,C=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A=y>>>16|C&4294901760,w=C<<16|y&65535;m[0]^=y,m[1]^=A,m[2]^=C,m[3]^=w,m[4]^=y,m[5]^=A,m[6]^=C,m[7]^=w;for(var x=0;x<4;x++)h.call(this)}},_doProcessBlock:function(f,d){var x=this._X;h.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,f[d+p]^=a[p]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,d=this._C,x=0;x<8;x++)c[x]=d[x];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var p=f[x]+d[x],m=p&65535,v=p>>>16,g=((m*m>>>17)+m*v>>>15)+v*v,_=((p&4294901760)*p|0)+((p&65535)*p|0);u[x]=g^_}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=s._createHelper(l)}(),r.Rabbit})}(_s)),_s.exports}var ys={exports:{}},d0;function hf(){return d0||(d0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],c=[],u=[],l=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,d=this.cfg.iv,x=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],p=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)h.call(this);for(var m=0;m<8;m++)p[m]^=x[m+4&7];if(d){var v=d.words,g=v[0],_=v[1],y=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,C=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A=y>>>16|C&4294901760,w=C<<16|y&65535;p[0]^=y,p[1]^=A,p[2]^=C,p[3]^=w,p[4]^=y,p[5]^=A,p[6]^=C,p[7]^=w;for(var m=0;m<4;m++)h.call(this)}},_doProcessBlock:function(f,d){var x=this._X;h.call(this),a[0]=x[0]^x[5]>>>16^x[3]<<16,a[1]=x[2]^x[7]>>>16^x[5]<<16,a[2]=x[4]^x[1]>>>16^x[7]<<16,a[3]=x[6]^x[3]>>>16^x[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,f[d+p]^=a[p]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,d=this._C,x=0;x<8;x++)c[x]=d[x];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var p=f[x]+d[x],m=p&65535,v=p>>>16,g=((m*m>>>17)+m*v>>>15)+v*v,_=((p&4294901760)*p|0)+((p&65535)*p|0);u[x]=g^_}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=s._createHelper(l)}(),r.RabbitLegacy})}(ys)),ys.exports}var vs={exports:{}},x0;function ff(){return x0||(x0=1,function(e,t){(function(r,n,i){e.exports=n(X(),Ne(),Oe(),we(),Ct())})(G,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function h(m,v){let g=v>>24&255,_=v>>16&255,y=v>>8&255,C=v&255,A=m.sbox[0][g]+m.sbox[1][_];return A=A^m.sbox[2][y],A=A+m.sbox[3][C],A}function f(m,v,g){let _=v,y=g,C;for(let A=0;A<a;++A)_=_^m.pbox[A],y=h(m,_)^y,C=_,_=y,y=C;return C=_,_=y,y=C,y=y^m.pbox[a],_=_^m.pbox[a+1],{left:_,right:y}}function d(m,v,g){let _=v,y=g,C;for(let A=a+1;A>1;--A)_=_^m.pbox[A],y=h(m,_)^y,C=_,_=y,y=C;return C=_,_=y,y=C,y=y^m.pbox[1],_=_^m.pbox[0],{left:_,right:y}}function x(m,v,g){for(let w=0;w<4;w++){m.sbox[w]=[];for(let D=0;D<256;D++)m.sbox[w][D]=u[w][D]}let _=0;for(let w=0;w<a+2;w++)m.pbox[w]=c[w]^v[_],_++,_>=g&&(_=0);let y=0,C=0,A=0;for(let w=0;w<a+2;w+=2)A=f(m,y,C),y=A.left,C=A.right,m.pbox[w]=y,m.pbox[w+1]=C;for(let w=0;w<4;w++)for(let D=0;D<256;D+=2)A=f(m,y,C),y=A.left,C=A.right,m.sbox[w][D]=y,m.sbox[w][D+1]=C;return!0}var p=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var m=this._keyPriorReset=this._key,v=m.words,g=m.sigBytes/4;x(l,v,g)}},encryptBlock:function(m,v){var g=f(l,m[v],m[v+1]);m[v]=g.left,m[v+1]=g.right},decryptBlock:function(m,v){var g=d(l,m[v],m[v+1]);m[v]=g.left,m[v+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(p)}(),r.Blowfish})}(vs)),vs.exports}(function(e,t){(function(r,n,i){e.exports=n(X(),ti(),qh(),zh(),Ne(),Hh(),Oe(),Bu(),fo(),jh(),Su(),$h(),Kh(),Gh(),xo(),Wh(),we(),Ct(),Qh(),Xh(),Yh(),Jh(),Zh(),tf(),ef(),rf(),nf(),sf(),of(),af(),uf(),cf(),lf(),hf(),ff())})(G,function(r){return r})})(Fu);var df=Fu.exports;const k1=wh(df);class xf{constructor(){}generateRandomString(t){for(var r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",i=0;i<t;i++){var s=Math.floor(Math.random()*r.length);n+=r[s]}return n}}var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,po=po||{},$=pf||self;function ei(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function ri(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function mf(e){return Object.prototype.hasOwnProperty.call(e,Es)&&e[Es]||(e[Es]=++gf)}var Es="closure_uid_"+(1e9*Math.random()>>>0),gf=0;function _f(e,t,r){return e.call.apply(e.bind,arguments)}function yf(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Pt(e,t,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Pt=_f:Pt=yf,Pt.apply(null,arguments)}function Tn(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function wt(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(n,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(n,o)}}function Te(){this.s=this.s,this.o=this.o}var vf=0;Te.prototype.s=!1;Te.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),vf!=0)&&mf(this)};Te.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function mo(e){const t=e.length;if(0<t){const r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function p0(e,t){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(ei(n)){const i=e.length||0,s=n.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=n[o]}else e.push(n)}}function bt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var Ef=function(){if(!$.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const r=()=>{};$.addEventListener("test",r,t),$.removeEventListener("test",r,t)}catch{}return e}();function Mr(e){return/^[\s\xa0]*$/.test(e)}function ni(){var e=$.navigator;return e&&(e=e.userAgent)?e:""}function ee(e){return ni().indexOf(e)!=-1}function go(e){return go[" "](e),e}go[" "]=function(){};function Af(e,t){var r=pd;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}var Cf=ee("Opera"),Ze=ee("Trident")||ee("MSIE"),bu=ee("Edge"),Os=bu||Ze,Vu=ee("Gecko")&&!(ni().toLowerCase().indexOf("webkit")!=-1&&!ee("Edge"))&&!(ee("Trident")||ee("MSIE"))&&!ee("Edge"),wf=ni().toLowerCase().indexOf("webkit")!=-1&&!ee("Edge");function ku(){var e=$.document;return e?e.documentMode:void 0}var Ls;t:{var As="",Cs=function(){var e=ni();if(Vu)return/rv:([^\);]+)(\)|;)/.exec(e);if(bu)return/Edge\/([\d\.]+)/.exec(e);if(Ze)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(wf)return/WebKit\/(\S+)/.exec(e);if(Cf)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Cs&&(As=Cs?Cs[1]:""),Ze){var ws=ku();if(ws!=null&&ws>parseFloat(As)){Ls=String(ws);break t}}Ls=As}var Ms;if($.document&&Ze){var m0=ku();Ms=m0||parseInt(Ls,10)||void 0}else Ms=void 0;var Tf=Ms;function Ur(e,t){if(bt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vu){t:{try{go(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else r=="mouseover"?t=e.fromElement:r=="mouseout"&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Df[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ur.$.h.call(this)}}wt(Ur,bt);var Df={2:"touch",3:"pen",4:"mouse"};Ur.prototype.h=function(){Ur.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ii="closure_listenable_"+(1e6*Math.random()|0),If=0;function Rf(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=i,this.key=++If,this.fa=this.ia=!1}function si(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _o(e,t,r){for(const n in e)t.call(r,e[n],n,e)}function Ff(e,t){for(const r in e)t.call(void 0,e[r],r,e)}function Nu(e){const t={};for(const r in e)t[r]=e[r];return t}const g0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ou(e,t){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)e[r]=n[r];for(let s=0;s<g0.length;s++)r=g0[s],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function oi(e){this.src=e,this.g={},this.h=0}oi.prototype.add=function(e,t,r,n,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=qs(e,t,n,i);return-1<o?(t=e[o],r||(t.ia=!1)):(t=new Rf(t,this.src,s,!!n,i),t.ia=r,e.push(t)),t};function Us(e,t){var r=t.type;if(r in e.g){var n=e.g[r],i=Pu(n,t),s;(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(si(t),e.g[r].length==0&&(delete e.g[r],e.h--))}}function qs(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!r&&s.la==n)return i}return-1}var yo="closure_lm_"+(1e6*Math.random()|0),Ts={};function Lu(e,t,r,n,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Lu(e,t[s],r,n,i);return null}return r=qu(r),e&&e[ii]?e.O(t,r,ri(n)?!!n.capture:!!n,i):Bf(e,t,r,!1,n,i)}function Bf(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=ri(i)?!!i.capture:!!i,a=Eo(e);if(a||(e[yo]=a=new oi(e)),r=a.add(t,r,n,o,s),r.proxy)return r;if(n=Sf(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)Ef||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(Uu(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function Sf(){function e(r){return t.call(e.src,e.listener,r)}const t=Pf;return e}function Mu(e,t,r,n,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Mu(e,t[s],r,n,i);else n=ri(n)?!!n.capture:!!n,r=qu(r),e&&e[ii]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],r=qs(s,r,n,i),-1<r&&(si(s[r]),Array.prototype.splice.call(s,r,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Eo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=qs(t,r,n,i)),(r=-1<e?t[e]:null)&&vo(r))}function vo(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[ii])Us(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(Uu(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=Eo(t))?(Us(r,e),r.h==0&&(r.src=null,t[yo]=null)):si(e)}}}function Uu(e){return e in Ts?Ts[e]:Ts[e]="on"+e}function Pf(e,t){if(e.fa)e=!0;else{t=new Ur(t,this);var r=e.listener,n=e.la||e.src;e.ia&&vo(e),e=r.call(n,t)}return e}function Eo(e){return e=e[yo],e instanceof oi?e:null}var Ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function qu(e){return typeof e=="function"?e:(e[Ds]||(e[Ds]=function(t){return e.handleEvent(t)}),e[Ds])}function At(){Te.call(this),this.i=new oi(this),this.S=this,this.J=null}wt(At,Te);At.prototype[ii]=!0;At.prototype.removeEventListener=function(e,t,r,n){Mu(this,e,t,r,n)};function It(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,typeof t=="string")t=new bt(t,e);else if(t instanceof bt)t.target=t.target||e;else{var i=t;t=new bt(n,e),Ou(t,i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=Dn(o,n,!0,t)&&i}if(o=t.g=e,i=Dn(o,n,!0,t)&&i,i=Dn(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)o=t.g=r[s],i=Dn(o,n,!1,t)&&i}At.prototype.N=function(){if(At.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var r=e.g[t],n=0;n<r.length;n++)si(r[n]);delete e.g[t],e.h--}}this.J=null};At.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)};At.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};function Dn(e,t,r,n){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==r){var a=o.listener,c=o.la||o.src;o.ia&&Us(e.i,o),i=a.call(c,n)!==!1&&i}}return i&&!n.defaultPrevented}var Ao=$.JSON.stringify;class bf{constructor(t,r){this.i=t,this.j=r,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function Vf(){var e=Co;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class kf{constructor(){this.h=this.g=null}add(t,r){const n=zu.get();n.set(t,r),this.h?this.h.next=n:this.g=n,this.h=n}}var zu=new bf(()=>new Nf,e=>e.reset());class Nf{constructor(){this.next=this.g=this.h=null}set(t,r){this.h=t,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Of(e){var t=1;e=e.split(":");const r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function Lf(e){$.setTimeout(()=>{throw e},0)}let qr,zr=!1,Co=new kf,Hu=()=>{const e=$.Promise.resolve(void 0);qr=()=>{e.then(Mf)}};var Mf=()=>{for(var e;e=Vf();){try{e.h.call(e.g)}catch(r){Lf(r)}var t=zu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zr=!1};function ai(e,t){At.call(this),this.h=e||1,this.g=t||$,this.j=Pt(this.qb,this),this.l=Date.now()}wt(ai,At);O=ai.prototype;O.ga=!1;O.T=null;O.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&(wo(this),this.start()))}};O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}O.N=function(){ai.$.N.call(this),wo(this),delete this.g};function To(e,t,r){if(typeof e=="function")r&&(e=Pt(e,r));else if(e&&typeof e.handleEvent=="function")e=Pt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:$.setTimeout(e,t||0)}function ju(e){e.g=To(()=>{e.g=null,e.i&&(e.i=!1,ju(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Uf extends Te{constructor(t,r){super(),this.m=t,this.j=r,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&($.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(e){Te.call(this),this.h=e,this.g={}}wt(Hr,Te);var _0=[];function $u(e,t,r,n){Array.isArray(r)||(r&&(_0[0]=r.toString()),r=_0);for(var i=0;i<r.length;i++){var s=Lu(t,r[i],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ku(e){_o(e.g,function(t,r){this.g.hasOwnProperty(r)&&vo(t)},e),e.g={}}Hr.prototype.N=function(){Hr.$.N.call(this),Ku(this)};Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ui(){this.g=!0}ui.prototype.Ea=function(){this.g=!1};function qf(e,t,r,n,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+`
`+r+`
`+o})}function zf(e,t,r,n,i,s,o){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+`
`+r+`
`+s+" "+o})}function We(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+jf(e,r)+(n?" "+n:"")})}function Hf(e,t){e.info(function(){return"TIMEOUT: "+t})}ui.prototype.info=function(){};function jf(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ao(r)}catch{return t}}var Le={},y0=null;function ci(){return y0=y0||new At}Le.Ta="serverreachability";function Gu(e){bt.call(this,Le.Ta,e)}wt(Gu,bt);function jr(e){const t=ci();It(t,new Gu(t))}Le.STAT_EVENT="statevent";function Wu(e,t){bt.call(this,Le.STAT_EVENT,e),this.stat=t}wt(Wu,bt);function kt(e){const t=ci();It(t,new Wu(t,e))}Le.Ua="timingevent";function Qu(e,t){bt.call(this,Le.Ua,e),this.size=t}wt(Qu,bt);function en(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return $.setTimeout(function(){e()},t)}var li={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Do(){}Do.prototype.h=null;function v0(e){return e.h||(e.h=e.i())}function Yu(){}var rn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Io(){bt.call(this,"d")}wt(Io,bt);function Ro(){bt.call(this,"c")}wt(Ro,bt);var zs;function hi(){}wt(hi,Do);hi.prototype.g=function(){return new XMLHttpRequest};hi.prototype.i=function(){return{}};zs=new hi;function nn(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new Hr(this),this.P=$f,e=Os?125:void 0,this.V=new ai(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var $f=45e3,Zu={},Hs={};O=nn.prototype;O.setTimeout=function(e){this.P=e};function js(e,t,r){e.L=1,e.A=di(de(t)),e.u=r,e.S=!0,tc(e,null)}function tc(e,t){e.G=Date.now(),sn(e),e.B=de(e.A);var r=e.B,n=e.W;Array.isArray(n)||(n=[String(n)]),uc(r.i,"t",n),e.o=0,r=e.l.J,e.h=new Ju,e.g=Fc(e.l,r?t:null,!e.u),0<e.O&&(e.M=new Uf(Pt(e.Pa,e,e.g),e.O)),$u(e.U,e.g,"readystatechange",e.nb),t=e.I?Nu(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),jr(),qf(e.j,e.v,e.B,e.m,e.W,e.u)}O.nb=function(e){e=e.target;const t=this.M;t&&re(e)==3?t.l():this.Pa(e)};O.Pa=function(e){try{if(e==this.g)t:{const l=re(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>l)&&(l!=3||Os||this.g&&(this.h.h||this.g.ja()||w0(this.g)))){this.J||l!=4||t==7||(t==8||0>=h?jr(3):jr(2)),fi(this);var r=this.g.da();this.ca=r;e:if(ec(this)){var n=w0(this.g);e="";var i=n.length,s=re(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ie(this),br(this);var o="";break e}this.h.i=new $.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==i-1});n.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=r==200,zf(this.j,this.v,this.B,this.m,this.W,l,r),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mr(a)){var u=a;break e}}u=null}if(r=u)We(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$s(this,r);else{this.i=!1,this.s=3,kt(12),Ie(this),br(this);break t}}this.S?(rc(this,l,o),Os&&this.i&&l==3&&($u(this.U,this.V,"tick",this.mb),this.V.start())):(We(this.j,this.m,o,null),$s(this,o)),l==4&&Ie(this),this.i&&!this.J&&(l==4?Tc(this.l,this):(this.i=!1,sn(this)))}else fd(this.g),r==400&&0<o.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Ie(this),br(this)}}}catch{}finally{}};function ec(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function rc(e,t,r){let n=!0,i;for(;!e.J&&e.o<r.length;)if(i=Kf(e,r),i==Hs){t==4&&(e.s=4,kt(14),n=!1),We(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Zu){e.s=4,kt(15),We(e.j,e.m,r,"[Invalid Chunk]"),n=!1;break}else We(e.j,e.m,i,null),$s(e,i);ec(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||r.length!=0||e.h.h||(e.s=1,kt(16),n=!1),e.i=e.i&&n,n?0<r.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),Vo(t),t.M=!0,kt(11))):(We(e.j,e.m,r,"[Invalid Chunked Response]"),Ie(e),br(e))}O.mb=function(){if(this.g){var e=re(this.g),t=this.g.ja();this.o<t.length&&(fi(this),rc(this,e,t),this.i&&e!=4&&sn(this))}};function Kf(e,t){var r=e.o,n=t.indexOf(`
`,r);return n==-1?Hs:(r=Number(t.substring(r,n)),isNaN(r)?Zu:(n+=1,n+r>t.length?Hs:(t=t.slice(n,n+r),e.o=n+r,t)))}O.cancel=function(){this.J=!0,Ie(this)};function sn(e){e.Y=Date.now()+e.P,nc(e,e.P)}function nc(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=en(Pt(e.lb,e),t)}function fi(e){e.C&&($.clearTimeout(e.C),e.C=null)}O.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(Hf(this.j,this.B),this.L!=2&&(jr(),kt(17)),Ie(this),this.s=2,br(this)):nc(this,this.Y-e)};function br(e){e.l.H==0||e.J||Tc(e.l,e)}function Ie(e){fi(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,wo(e.V),Ku(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function $s(e,t){try{var r=e.l;if(r.H!=0&&(r.g==e||Ks(r.i,e))){if(!e.K&&Ks(r.i,e)&&r.H==3){try{var n=r.Ja.g.parse(t)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){t:if(!r.u){if(r.g)if(r.g.G+3e3<e.G)qn(r),mi(r);else break t;bo(r),kt(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=en(Pt(r.ib,r),6e3));if(1>=hc(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Re(r,11)}else if((e.K||r.g==e)&&qn(r),!Mr(t))for(i=r.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(r.V=u[0],u=u[1],r.H==2)if(u[0]=="c"){r.K=u[1],r.pa=u[2];const l=u[3];l!=null&&(r.ra=l,r.l.info("VER="+r.ra));const h=u[4];h!=null&&(r.Ga=h,r.l.info("SVER="+r.Ga));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(n=1.5*f,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const d=e.g;if(d){const x=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var s=n.i;s.g||x.indexOf("spdy")==-1&&x.indexOf("quic")==-1&&x.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Fo(s,s.h),s.h=null))}if(n.F){const p=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(n.Da=p,ut(n.I,n.F,p))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-e.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var o=e;if(n.wa=Rc(n,n.J?n.pa:null,n.Y),o.K){fc(n.i,o);var a=o,c=n.L;c&&a.setTimeout(c),a.C&&(fi(a),sn(a)),n.g=o}else Cc(n);0<r.j.length&&gi(r)}else u[0]!="stop"&&u[0]!="close"||Re(r,7);else r.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Re(r,7):Po(r):u[0]!="noop"&&r.h&&r.h.Aa(u),r.A=0)}}jr(4)}catch{}}function Gf(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(ei(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}t=[],r=0;for(n in e)t[r++]=e[n];return t}function Wf(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(ei(e)||typeof e=="string"){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}t=[],r=0;for(const n in e)t[r++]=n;return t}}}function ic(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(ei(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var r=Wf(e),n=Gf(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}var sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qf(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Be(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Be){this.h=e.h,Mn(this,e.j),this.s=e.s,this.g=e.g,Un(this,e.m),this.l=e.l;var t=e.i,r=new $r;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),E0(this,r),this.o=e.o}else e&&(t=String(e).match(sc))?(this.h=!1,Mn(this,t[1]||"",!0),this.s=Fr(t[2]||""),this.g=Fr(t[3]||"",!0),Un(this,t[4]),this.l=Fr(t[5]||"",!0),E0(this,t[6]||"",!0),this.o=Fr(t[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}Be.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Br(t,A0,!0),":");var r=this.g;return(r||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Br(t,A0,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&e.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&e.push("/"),e.push(Br(r,r.charAt(0)=="/"?Jf:Yf,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",Br(r,td)),e.join("")};function de(e){return new Be(e)}function Mn(e,t,r){e.j=r?Fr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Un(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function E0(e,t,r){t instanceof $r?(e.i=t,ed(e.i,e.h)):(r||(t=Br(t,Zf)),e.i=new $r(t,e.h))}function ut(e,t,r){e.i.set(t,r)}function di(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Br(e,t,r){return typeof e=="string"?(e=encodeURI(e).replace(t,Xf),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xf(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var A0=/[#\/\?@]/g,Yf=/[#\?:]/g,Jf=/[#\?]/g,Zf=/[#\?@]/g,td=/#/g;function $r(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function De(e){e.g||(e.g=new Map,e.h=0,e.i&&Qf(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}O=$r.prototype;O.add=function(e,t){De(this),this.i=null,e=ur(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this};function oc(e,t){De(e),t=ur(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ac(e,t){return De(e),t=ur(e,t),e.g.has(t)}O.forEach=function(e,t){De(this),this.g.forEach(function(r,n){r.forEach(function(i){e.call(t,i,n,this)},this)},this)};O.ta=function(){De(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){const i=e[n];for(let s=0;s<i.length;s++)r.push(t[n])}return r};O.Z=function(e){De(this);let t=[];if(typeof e=="string")ac(this,e)&&(t=t.concat(this.g.get(ur(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t};O.set=function(e,t){return De(this),this.i=null,e=ur(this,e),ac(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};O.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function uc(e,t,r){oc(e,t),0<r.length&&(e.i=null,e.g.set(ur(e,t),mo(r)),e.h+=r.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];const s=encodeURIComponent(String(n)),o=this.Z(n);for(n=0;n<o.length;n++){var i=s;o[n]!==""&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")};function ur(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ed(e,t){t&&!e.j&&(De(e),e.i=null,e.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(oc(this,n),uc(this,i,r))},e)),e.j=t}var rd=class{constructor(e,t){this.g=e,this.map=t}};function cc(e){this.l=e||nd,$.PerformanceNavigationTiming?(e=$.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!($.g&&$.g.Ka&&$.g.Ka()&&$.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nd=10;function lc(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function hc(e){return e.h?1:e.g?e.g.size:0}function Ks(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Fo(e,t){e.g?e.g.add(t):e.h=t}function fc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}cc.prototype.cancel=function(){if(this.i=dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function dc(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const r of e.g.values())t=t.concat(r.F);return t}return mo(e.i)}var id=class{stringify(e){return $.JSON.stringify(e,void 0)}parse(e){return $.JSON.parse(e,void 0)}};function sd(){this.g=new id}function od(e,t,r){const n=r||"";try{ic(e,function(i,s){let o=i;ri(i)&&(o=Ao(i)),t.push(n+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(n+"type="+encodeURIComponent("_badmap")),i}}function ad(e,t){const r=new ui;if($.Image){const n=new Image;n.onload=Tn(In,r,n,"TestLoadImage: loaded",!0,t),n.onerror=Tn(In,r,n,"TestLoadImage: error",!1,t),n.onabort=Tn(In,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=Tn(In,r,n,"TestLoadImage: timeout",!1,t),$.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}function In(e,t,r,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch{}}function on(e){this.l=e.ec||null,this.j=e.ob||!1}wt(on,Do);on.prototype.g=function(){return new xi(this.l,this.j)};on.prototype.i=function(e){return function(){return e}}({});function xi(e,t){At.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(xi,At);var Bo=0;O=xi.prototype;O.open=function(e,t){if(this.readyState!=Bo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kr(this)};O.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||$).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,an(this)),this.readyState=Bo};O.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function xc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}O.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?an(this):Kr(this),this.readyState==3&&xc(this)}};O.Za=function(e){this.g&&(this.response=this.responseText=e,an(this))};O.Ya=function(e){this.g&&(this.response=e,an(this))};O.ka=function(){this.g&&an(this)};function an(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kr(e)}O.setRequestHeader=function(e,t){this.v.append(e,t)};O.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join(`\r
`)};function Kr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var ud=$.JSON.parse;function ht(e){At.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pc,this.L=this.M=!1}wt(ht,At);var pc="",cd=/^https?$/i,ld=["POST","PUT"];O=ht.prototype;O.Oa=function(e){this.M=e};O.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zs.g(),this.C=this.u?v0(this.u):v0(zs),this.g.onreadystatechange=Pt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){C0(this,s);return}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const s of n.keys())r.set(s,n.get(s));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(s=>s.toLowerCase()=="content-type"),i=$.FormData&&e instanceof $.FormData,!(0<=Pu(ld,t))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of r)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_c(this),0<this.B&&((this.L=hd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pt(this.ua,this)):this.A=To(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){C0(this,s)}};function hd(e){return Ze&&typeof e.timeout=="number"&&e.ontimeout!==void 0}O.ua=function(){typeof po<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))};function C0(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mc(e),pi(e)}function mc(e){e.F||(e.F=!0,It(e,"complete"),It(e,"error"))}O.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,It(this,"complete"),It(this,"abort"),pi(this))};O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pi(this,!0)),ht.$.N.call(this)};O.La=function(){this.s||(this.G||this.v||this.l?gc(this):this.kb())};O.kb=function(){gc(this)};function gc(e){if(e.h&&typeof po<"u"&&(!e.C[1]||re(e)!=4||e.da()!=2)){if(e.v&&re(e)==4)To(e.La,0,e);else if(It(e,"readystatechange"),re(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var r;if(!(r=t)){var n;if(n=o===0){var i=String(e.I).match(sc)[1]||null;!i&&$.self&&$.self.location&&(i=$.self.location.protocol.slice(0,-1)),n=!cd.test(i?i.toLowerCase():"")}r=n}if(r)It(e,"complete"),It(e,"success");else{e.m=6;try{var s=2<re(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",mc(e)}}finally{pi(e)}}}}function pi(e,t){if(e.g){_c(e);const r=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||It(e,"ready");try{r.onreadystatechange=n}catch{}}}function _c(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&($.clearTimeout(e.A),e.A=null)}O.isActive=function(){return!!this.g};function re(e){return e.g?e.g.readyState:0}O.da=function(){try{return 2<re(this)?this.g.status:-1}catch{return-1}};O.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),ud(t)}};function w0(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case pc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function fd(e){const t={};e=(e.g&&2<=re(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<e.length;n++){if(Mr(e[n]))continue;var r=Of(e[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const s=t[i]||[];t[i]=s,s.push(r)}Ff(t,function(n){return n.join(", ")})}O.Ia=function(){return this.m};O.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function yc(e){let t="";return _o(e,function(r,n){t+=n,t+=":",t+=r,t+=`\r
`}),t}function So(e,t,r){t:{for(n in r){var n=!1;break t}n=!0}n||(r=yc(r),typeof e=="string"?r!=null&&encodeURIComponent(String(r)):ut(e,t,r))}function Ar(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function vc(e){this.Ga=0,this.j=[],this.l=new ui,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ar("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ar("baseRetryDelayMs",5e3,e),this.hb=Ar("retryDelaySeedMs",1e4,e),this.eb=Ar("forwardChannelMaxRetries",2,e),this.xa=Ar("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new cc(e&&e.concurrentRequestLimit),this.Ja=new sd,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}O=vc.prototype;O.ra=8;O.H=1;function Po(e){if(Ec(e),e.H==3){var t=e.W++,r=de(e.I);if(ut(r,"SID",e.K),ut(r,"RID",t),ut(r,"TYPE","terminate"),un(e,r),t=new nn(e,e.l,t),t.L=2,t.A=di(de(r)),r=!1,$.navigator&&$.navigator.sendBeacon)try{r=$.navigator.sendBeacon(t.A.toString(),"")}catch{}!r&&$.Image&&(new Image().src=t.A,r=!0),r||(t.g=Fc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),sn(t)}Ic(e)}function mi(e){e.g&&(Vo(e),e.g.cancel(),e.g=null)}function Ec(e){mi(e),e.u&&($.clearTimeout(e.u),e.u=null),qn(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&$.clearTimeout(e.m),e.m=null)}function gi(e){if(!lc(e.i)&&!e.m){e.m=!0;var t=e.Na;qr||Hu(),zr||(qr(),zr=!0),Co.add(t,e),e.C=0}}function dd(e,t){return hc(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=en(Pt(e.Na,e,t),Dc(e,e.C)),e.C++,!0)}O.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new nn(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Nu(s),Ou(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)t:{for(var t=0,r=0;r<this.j.length;r++){e:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break e}n=void 0}if(n===void 0)break;if(t+=n,4096<t){t=r;break t}if(t===4096||r===this.j.length-1){t=r+1;break t}}t=1e3}else t=1e3;t=Ac(this,i,t),r=de(this.I),ut(r,"RID",e),ut(r,"CVER",22),this.F&&ut(r,"X-HTTP-Session-Id",this.F),un(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(yc(s)))+"&"+t:this.o&&So(r,this.o,s)),Fo(this.i,i),this.bb&&ut(r,"TYPE","init"),this.P?(ut(r,"$req",t),ut(r,"SID","null"),i.aa=!0,js(i,r,null)):js(i,r,t),this.H=2}}else this.H==3&&(e?T0(this,e):this.j.length==0||lc(this.i)||T0(this))};function T0(e,t){var r;t?r=t.m:r=e.W++;const n=de(e.I);ut(n,"SID",e.K),ut(n,"RID",r),ut(n,"AID",e.V),un(e,n),e.o&&e.s&&So(n,e.o,e.s),r=new nn(e,e.l,r,e.C+1),e.o===null&&(r.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ac(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Fo(e.i,r),js(r,n,t)}function un(e,t){e.na&&_o(e.na,function(r,n){ut(t,n,r)}),e.h&&ic({},function(r,n){ut(t,n,r)})}function Ac(e,t,r){r=Math.min(e.j.length,r);var n=e.h?Pt(e.h.Va,e.h,e):null;t:{var i=e.j;let s=-1;for(;;){const o=["count="+r];s==-1?0<r?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<r;c++){let u=i[c].g;const l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{od(l,o,"req"+u+"_")}catch{n&&n(l)}}if(a){n=o.join("&");break t}}}return e=e.j.splice(0,r),t.F=e,n}function Cc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;qr||Hu(),zr||(qr(),zr=!0),Co.add(t,e),e.A=0}}function bo(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=en(Pt(e.Ma,e),Dc(e,e.A)),e.A++,!0)}O.Ma=function(){if(this.u=null,wc(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=en(Pt(this.jb,this),e)}};O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),mi(this),wc(this))};function Vo(e){e.B!=null&&($.clearTimeout(e.B),e.B=null)}function wc(e){e.g=new nn(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=de(e.wa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.V),ut(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ut(t,"TO",e.qa),ut(t,"TYPE","xmlhttp"),un(e,t),e.o&&e.s&&So(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var r=e.g;e=e.pa,r.L=1,r.A=di(de(t)),r.u=null,r.S=!0,tc(r,e)}O.ib=function(){this.v!=null&&(this.v=null,mi(this),bo(this),kt(19))};function qn(e){e.v!=null&&($.clearTimeout(e.v),e.v=null)}function Tc(e,t){var r=null;if(e.g==t){qn(e),Vo(e),e.g=null;var n=2}else if(Ks(e.i,t))r=t.F,fc(e.i,t),n=1;else return;if(e.H!=0){if(t.i)if(n==1){r=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;n=ci(),It(n,new Qu(n,r)),gi(e)}else Cc(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(n==1&&dd(e,t)||n==2&&bo(e)))switch(r&&0<r.length&&(t=e.i,t.i=t.i.concat(r)),i){case 1:Re(e,5);break;case 4:Re(e,10);break;case 3:Re(e,6);break;default:Re(e,2)}}}function Dc(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(r*=2),r*t}function Re(e,t){if(e.l.info("Error code "+t),t==2){var r=null;e.h&&(r=null);var n=Pt(e.pb,e);r||(r=new Be("//www.google.com/images/cleardot.gif"),$.location&&$.location.protocol=="http"||Mn(r,"https"),di(r)),ad(r.toString(),n)}else kt(2);e.H=0,e.h&&e.h.za(t),Ic(e),Ec(e)}O.pb=function(e){e?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))};function Ic(e){if(e.H=0,e.ma=[],e.h){const t=dc(e.i);(t.length!=0||e.j.length!=0)&&(p0(e.ma,t),p0(e.ma,e.j),e.i.i.length=0,mo(e.j),e.j.length=0),e.h.ya()}}function Rc(e,t,r){var n=r instanceof Be?de(r):new Be(r);if(n.g!="")t&&(n.g=t+"."+n.g),Un(n,n.m);else{var i=$.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Be(null);n&&Mn(s,n),t&&(s.g=t),i&&Un(s,i),r&&(s.l=r),n=s}return r=e.F,t=e.Da,r&&t&&ut(n,r,t),ut(n,"VER",e.ra),un(e,n),n}function Fc(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new ht(new on({ob:r})):new ht(e.va),t.Oa(e.J),t}O.isActive=function(){return!!this.h&&this.h.isActive(this)};function Bc(){}O=Bc.prototype;O.Ba=function(){};O.Aa=function(){};O.za=function(){};O.ya=function(){};O.isActive=function(){return!0};O.Va=function(){};function zn(){if(Ze&&!(10<=Number(Tf)))throw Error("Environmental error: no available transport.")}zn.prototype.g=function(e,t){return new qt(e,t)};function qt(e,t){At.call(this),this.g=new vc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Mr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Mr(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new cr(this)}wt(qt,At);qt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,r=this.h||void 0;kt(0),e.Y=t,e.na=r||{},e.G=e.aa,e.I=Rc(e,null,e.Y),gi(e)};qt.prototype.close=function(){Po(this.g)};qt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var r={};r.__data__=e,e=r}else this.v&&(r={},r.__data__=Ao(e),e=r);t.j.push(new rd(t.fb++,e)),t.H==3&&gi(t)};qt.prototype.N=function(){this.g.h=null,delete this.j,Po(this.g),delete this.g,qt.$.N.call(this)};function Sc(e){Io.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const r in t){e=r;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}wt(Sc,Io);function Pc(){Ro.call(this),this.status=1}wt(Pc,Ro);function cr(e){this.g=e}wt(cr,Bc);cr.prototype.Ba=function(){It(this.g,"a")};cr.prototype.Aa=function(e){It(this.g,new Sc(e))};cr.prototype.za=function(e){It(this.g,new Pc)};cr.prototype.ya=function(){It(this.g,"b")};function xd(){this.blockSize=-1}function Zt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}wt(Zt,xd);Zt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Is(e,t,r){r||(r=0);var n=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^r&(i^s))+n[0]+3614090360&4294967295;t=r+(o<<7&4294967295|o>>>25),o=s+(i^t&(r^i))+n[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(r^s&(t^r))+n[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=r+(t^i&(s^t))+n[3]+3250441966&4294967295,r=i+(o<<22&4294967295|o>>>10),o=t+(s^r&(i^s))+n[4]+4118548399&4294967295,t=r+(o<<7&4294967295|o>>>25),o=s+(i^t&(r^i))+n[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(r^s&(t^r))+n[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=r+(t^i&(s^t))+n[7]+4249261313&4294967295,r=i+(o<<22&4294967295|o>>>10),o=t+(s^r&(i^s))+n[8]+1770035416&4294967295,t=r+(o<<7&4294967295|o>>>25),o=s+(i^t&(r^i))+n[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(r^s&(t^r))+n[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=r+(t^i&(s^t))+n[11]+2304563134&4294967295,r=i+(o<<22&4294967295|o>>>10),o=t+(s^r&(i^s))+n[12]+1804603682&4294967295,t=r+(o<<7&4294967295|o>>>25),o=s+(i^t&(r^i))+n[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(r^s&(t^r))+n[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=r+(t^i&(s^t))+n[15]+1236535329&4294967295,r=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(r^i))+n[1]+4129170786&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[0]+3921069994&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[5]+3593408605&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[4]+3889429448&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[9]+568446438&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[8]+1163531501&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[13]+2850285829&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[12]+2368359562&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(r^i^s)+n[5]+4294588738&4294967295,t=r+(o<<4&4294967295|o>>>28),o=s+(t^r^i)+n[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^r)+n[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=r+(i^s^t)+n[14]+4259657740&4294967295,r=i+(o<<23&4294967295|o>>>9),o=t+(r^i^s)+n[1]+2763975236&4294967295,t=r+(o<<4&4294967295|o>>>28),o=s+(t^r^i)+n[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^r)+n[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=r+(i^s^t)+n[10]+3200236656&4294967295,r=i+(o<<23&4294967295|o>>>9),o=t+(r^i^s)+n[13]+681279174&4294967295,t=r+(o<<4&4294967295|o>>>28),o=s+(t^r^i)+n[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^r)+n[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=r+(i^s^t)+n[6]+76029189&4294967295,r=i+(o<<23&4294967295|o>>>9),o=t+(r^i^s)+n[9]+3654602809&4294967295,t=r+(o<<4&4294967295|o>>>28),o=s+(t^r^i)+n[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^r)+n[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=r+(i^s^t)+n[2]+3299628645&4294967295,r=i+(o<<23&4294967295|o>>>9),o=t+(i^(r|~s))+n[0]+4096336452&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[5]+4237533241&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[12]+1700485571&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[1]+2240044497&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[8]+1873313359&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[13]+1309151649&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[4]+4149444226&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}Zt.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var r=t-this.blockSize,n=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=r;)Is(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(n[i++]=e.charCodeAt(s++),i==this.blockSize){Is(this,n),i=0;break}}else for(;s<t;)if(n[i++]=e[s++],i==this.blockSize){Is(this,n),i=0;break}}this.h=i,this.i+=t};Zt.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=r&255,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};function rt(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;n&&s==t||(r[i]=s,n=!1)}this.g=r}var pd={};function ko(e){return-128<=e&&128>e?Af(e,function(t){return new rt([t|0],0>t?-1:0)}):new rt([e|0],0>e?-1:0)}function ne(e){if(isNaN(e)||!isFinite(e))return Xe;if(0>e)return Dt(ne(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=Gs;return new rt(t,0)}function bc(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Dt(bc(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ne(Math.pow(t,8)),n=Xe,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=ne(Math.pow(t,s)),n=n.R(s).add(ne(o))):(n=n.R(r),n=n.add(ne(o)))}return n}var Gs=4294967296,Xe=ko(0),Ws=ko(1),D0=ko(16777216);O=rt.prototype;O.ea=function(){if($t(this))return-Dt(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:Gs+n)*t,t*=Gs}return e};O.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(ce(this))return"0";if($t(this))return"-"+Dt(this).toString(e);for(var t=ne(Math.pow(e,6)),r=this,n="";;){var i=jn(r,t).g;r=Hn(r,i.R(t));var s=((0<r.g.length?r.g[0]:r.h)>>>0).toString(e);if(r=i,ce(r))return s+n;for(;6>s.length;)s="0"+s;n=s+n}};O.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function ce(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function $t(e){return e.h==-1}O.X=function(e){return e=Hn(this,e),$t(e)?-1:ce(e)?0:1};function Dt(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new rt(r,~e.h).add(Ws)}O.abs=function(){return $t(this)?Dt(this):this};O.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,i=0;i<=t;i++){var s=n+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);n=o>>>16,s&=65535,o&=65535,r[i]=o<<16|s}return new rt(r,r[r.length-1]&-2147483648?-1:0)};function Hn(e,t){return e.add(Dt(t))}O.R=function(e){if(ce(this)||ce(e))return Xe;if($t(this))return $t(e)?Dt(this).R(Dt(e)):Dt(Dt(this).R(e));if($t(e))return Dt(this.R(Dt(e)));if(0>this.X(D0)&&0>e.X(D0))return ne(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<e.g.length;i++){var s=this.D(n)>>>16,o=this.D(n)&65535,a=e.D(i)>>>16,c=e.D(i)&65535;r[2*n+2*i]+=o*c,Rn(r,2*n+2*i),r[2*n+2*i+1]+=s*c,Rn(r,2*n+2*i+1),r[2*n+2*i+1]+=o*a,Rn(r,2*n+2*i+1),r[2*n+2*i+2]+=s*a,Rn(r,2*n+2*i+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new rt(r,0)};function Rn(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Cr(e,t){this.g=e,this.h=t}function jn(e,t){if(ce(t))throw Error("division by zero");if(ce(e))return new Cr(Xe,Xe);if($t(e))return t=jn(Dt(e),t),new Cr(Dt(t.g),Dt(t.h));if($t(t))return t=jn(e,Dt(t)),new Cr(Dt(t.g),t.h);if(30<e.g.length){if($t(e)||$t(t))throw Error("slowDivide_ only works with positive integers.");for(var r=Ws,n=t;0>=n.X(e);)r=I0(r),n=I0(n);var i=je(r,1),s=je(n,1);for(n=je(n,2),r=je(r,2);!ce(n);){var o=s.add(n);0>=o.X(e)&&(i=i.add(r),s=o),n=je(n,1),r=je(r,1)}return t=Hn(e,i.R(t)),new Cr(i,t)}for(i=Xe;0<=e.X(t);){for(r=Math.max(1,Math.floor(e.ea()/t.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),s=ne(r),o=s.R(t);$t(o)||0<o.X(e);)r-=n,s=ne(r),o=s.R(t);ce(s)&&(s=Ws),i=i.add(s),e=Hn(e,o)}return new Cr(i,e)}O.gb=function(e){return jn(this,e).h};O.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new rt(r,this.h&e.h)};O.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new rt(r,this.h|e.h)};O.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new rt(r,this.h^e.h)};function I0(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new rt(r,e.h)}function je(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,i=[],s=0;s<n;s++)i[s]=0<t?e.D(s+r)>>>t|e.D(s+r+1)<<32-t:e.D(s+r);return new rt(i,e.h)}zn.prototype.createWebChannel=zn.prototype.g;qt.prototype.send=qt.prototype.u;qt.prototype.open=qt.prototype.m;qt.prototype.close=qt.prototype.close;li.NO_ERROR=0;li.TIMEOUT=8;li.HTTP_ERROR=6;Xu.COMPLETE="complete";Yu.EventType=rn;rn.OPEN="a";rn.CLOSE="b";rn.ERROR="c";rn.MESSAGE="d";At.prototype.listen=At.prototype.O;ht.prototype.listenOnce=ht.prototype.P;ht.prototype.getLastError=ht.prototype.Sa;ht.prototype.getLastErrorCode=ht.prototype.Ia;ht.prototype.getStatus=ht.prototype.da;ht.prototype.getResponseJson=ht.prototype.Wa;ht.prototype.getResponseText=ht.prototype.ja;ht.prototype.send=ht.prototype.ha;ht.prototype.setWithCredentials=ht.prototype.Oa;Zt.prototype.digest=Zt.prototype.l;Zt.prototype.reset=Zt.prototype.reset;Zt.prototype.update=Zt.prototype.j;rt.prototype.add=rt.prototype.add;rt.prototype.multiply=rt.prototype.R;rt.prototype.modulo=rt.prototype.gb;rt.prototype.compare=rt.prototype.X;rt.prototype.toNumber=rt.prototype.ea;rt.prototype.toString=rt.prototype.toString;rt.prototype.getBits=rt.prototype.D;rt.fromNumber=ne;rt.fromString=bc;var md=function(){return new zn},gd=function(){return ci()},Rs=li,_d=Xu,yd=Le,R0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vd=on,Fn=Yu,Ed=ht,Ad=Zt,Ye=rt;const F0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lr="10.11.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe=new Th("@firebase/firestore");function wr(){return Pe.logLevel}function M(e,...t){if(Pe.logLevel<=_e.DEBUG){const r=t.map(No);Pe.debug(`Firestore (${lr}): ${e}`,...r)}}function xe(e,...t){if(Pe.logLevel<=_e.ERROR){const r=t.map(No);Pe.error(`Firestore (${lr}): ${e}`,...r)}}function tr(e,...t){if(Pe.logLevel<=_e.WARN){const r=t.map(No);Pe.warn(`Firestore (${lr}): ${e}`,...r)}}function No(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e="Unexpected state"){const t=`FIRESTORE (${lr}) INTERNAL ASSERTION FAILED: `+e;throw xe(t),new Error(t)}function lt(e,t){e||z()}function Q(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Rh{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Cd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Bt.UNAUTHENTICATED))}shutdown(){}}class wd{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Td{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new le;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new le,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new le)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(lt(typeof n.accessToken=="string"),new Vc(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string"),new Bt(t)}}class Dd{constructor(t,r,n){this.l=t,this.h=r,this.P=n,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Id{constructor(t,r,n){this.l=t,this.h=r,this.P=n}getToken(){return Promise.resolve(new Dd(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fd{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const n=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(lt(typeof r.token=="string"),this.R=r.token,new Rd(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=Bd(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=t.charAt(i[s]%t.length))}return n}}function tt(e,t){return e<t?-1:e>t?1:0}function er(e,t,r){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Et.fromMillis(Date.now())}static fromDate(t){return Et.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*r));return new Et(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.timestamp=t}static fromTimestamp(t){return new j(t)}static min(){return new j(new Et(0,0))}static max(){return new j(new Et(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t,r,n){r===void 0?r=0:r>t.length&&z(),n===void 0?n=t.length-r:n>t.length-r&&z(),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Gr.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Gr?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let i=0;i<n;i++){const s=t.get(i),o=r.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class it extends Gr{construct(t,r,n){return new it(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new L(R.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new it(r)}static emptyPath(){return new it([])}}const Sd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Gr{construct(t,r,n){return new St(t,r,n)}static isValidIdentifier(t){return Sd.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(t){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new L(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new L(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(n+=a,i++):(s(),i++)}if(s(),o)throw new L(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new St(r)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(t){this.path=t}static fromPath(t){return new q(it.fromString(t))}static fromName(t){return new q(it.fromString(t).popFirst(5))}static empty(){return new q(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&it.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return it.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new q(new it(t.slice()))}}function Pd(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=j.fromTimestamp(n===1e9?new Et(r+1,0):new Et(r,n));return new Ee(i,q.empty(),t)}function bd(e){return new Ee(e.readTime,e.key,-1)}class Ee{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new Ee(j.min(),q.empty(),-1)}static max(){return new Ee(j.max(),q.empty(),-1)}}function Vd(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=q.comparator(e.documentKey,t.documentKey),r!==0?r:tt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(e){if(e.code!==R.FAILED_PRECONDITION||e.message!==kd)throw e;M("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new b((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof b?r:b.resolve(r)}catch(r){return b.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):b.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):b.reject(r)}static resolve(t){return new b((r,n)=>{r(t)})}static reject(t){return new b((r,n)=>{n(t)})}static waitFor(t){return new b((r,n)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&r()},c=>n(c))}),o=!0,s===i&&r()})}static or(t){let r=b.resolve(!1);for(const n of t)r=r.next(i=>i?b.resolve(i):n());return r}static forEach(t,r){const n=[];return t.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(t,r){return new b((n,i)=>{const s=t.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(l=>{o[u]=l,++a,a===s&&n(o)},l=>i(l))}})}static doWhile(t,r){return new b((n,i)=>{const s=()=>{t()===!0?r().next(()=>{s()},i):n()};s()})}}function Od(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function cn(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Lo.oe=-1;function ln(e){return e==null}function $n(e){return e===0&&1/e==-1/0}function Ld(e){return typeof e=="number"&&Number.isInteger(e)&&!$n(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function hr(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Nc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t,r){this.comparator=t,this.root=r||Tt.EMPTY}insert(t,r){return new ft(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(t){return new ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bn(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bn(this.root,t,this.comparator,!0)}}class Bn{constructor(t,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Tt{constructor(t,r,n,i,s){this.key=t,this.value=r,this.color=n??Tt.RED,this.left=i??Tt.EMPTY,this.right=s??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,i,s){return new Tt(t??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const t=this.left.check();if(t!==this.right.check())throw z();return t+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,r,n,i,s){return this}insert(t,r,n){return new Tt(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.comparator=t,this.data=new ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(t){return new S0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Rt)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Rt(this.comparator);return r.data=t,r}}class S0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.fields=t,t.sort(St.comparator)}static empty(){return new Gt([])}unionWith(t){let r=new Rt(St.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Gt(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return er(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Oc("Invalid base64 string: "+s):s}}(t);return new Vt(r)}static fromUint8Array(t){const r=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Vt(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const Md=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ae(e){if(lt(!!e),typeof e=="string"){let t=0;const r=Md.exec(e);if(lt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function be(e){return typeof e=="string"?Vt.fromBase64String(e):Vt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Uo(e){const t=e.mapValue.fields.__previous_value__;return Mo(t)?Uo(t):t}function Wr(e){const t=Ae(e.mapValue.fields.__local_write_time__.timestampValue);return new Et(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,r,n,i,s,o,a,c,u){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Qr{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Qr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Qr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ve(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mo(e)?4:qd(e)?9007199254740991:10:z()}function oe(e,t){if(e===t)return!0;const r=Ve(e);if(r!==Ve(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wr(e).isEqual(Wr(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ae(i.timestampValue),a=Ae(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return be(i.bytesValue).isEqual(be(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xt(i.doubleValue),a=xt(s.doubleValue);return o===a?$n(o)===$n(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return er(e.arrayValue.values||[],t.arrayValue.values||[],oe);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(B0(o)!==B0(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!oe(o[c],a[c])))return!1;return!0}(e,t);default:return z()}}function Xr(e,t){return(e.values||[]).find(r=>oe(r,t))!==void 0}function rr(e,t){if(e===t)return 0;const r=Ve(e),n=Ve(t);if(r!==n)return tt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return tt(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=xt(s.integerValue||s.doubleValue),c=xt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return P0(e.timestampValue,t.timestampValue);case 4:return P0(Wr(e),Wr(t));case 5:return tt(e.stringValue,t.stringValue);case 6:return function(s,o){const a=be(s),c=be(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const l=tt(a[u],c[u]);if(l!==0)return l}return tt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=tt(xt(s.latitude),xt(o.latitude));return a!==0?a:tt(xt(s.longitude),xt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){const l=rr(a[u],c[u]);if(l)return l}return tt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Sn.mapValue&&o===Sn.mapValue)return 0;if(s===Sn.mapValue)return 1;if(o===Sn.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){const f=tt(c[h],l[h]);if(f!==0)return f;const d=rr(a[c[h]],u[l[h]]);if(d!==0)return d}return tt(c.length,l.length)}(e.mapValue,t.mapValue);default:throw z()}}function P0(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return tt(e,t);const r=Ae(e),n=Ae(t),i=tt(r.seconds,n.seconds);return i!==0?i:tt(r.nanos,n.nanos)}function nr(e){return Qs(e)}function Qs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=Ae(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return be(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return q.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=Qs(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const o of n)s?s=!1:i+=",",i+=`${o}:${Qs(r.fields[o])}`;return i+"}"}(e.mapValue):z()}function b0(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Xs(e){return!!e&&"integerValue"in e}function qo(e){return!!e&&"arrayValue"in e}function V0(e){return!!e&&"nullValue"in e}function k0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fs(e){return!!e&&"mapValue"in e}function Vr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hr(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Vr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Vr(e.arrayValue.values[r]);return t}return Object.assign({},e)}function qd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.value=t}static empty(){return new Lt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!Fs(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vr(r)}setAll(t){let r=St.emptyPath(),n={},i=[];t.forEach((o,a)=>{if(!r.isImmediateParentOf(a)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=a.popLast()}o?n[a.lastSegment()]=Vr(o):i.push(a.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(t){const r=this.field(t.popLast());Fs(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return oe(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=r.mapValue.fields[t.get(n)];Fs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,n){hr(r,(i,s)=>t[i]=s);for(const i of n)delete t[i]}clone(){return new Lt(Vr(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t,r,n,i,s,o,a){this.key=t,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new vt(t,0,j.min(),j.min(),j.min(),Lt.empty(),0)}static newFoundDocument(t,r,n,i){return new vt(t,1,r,j.min(),n,i,0)}static newNoDocument(t,r){return new vt(t,2,r,j.min(),j.min(),Lt.empty(),0)}static newUnknownDocument(t,r){return new vt(t,3,r,j.min(),j.min(),Lt.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof vt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,r){this.position=t,this.inclusive=r}}function N0(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?n=q.comparator(q.fromName(o.referenceValue),r.key):n=rr(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function O0(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!oe(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t,r="asc"){this.field=t,this.dir=r}}function zd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{}class pt extends Lc{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new jd(t,r,n):r==="array-contains"?new Gd(t,n):r==="in"?new Wd(t,n):r==="not-in"?new Qd(t,n):r==="array-contains-any"?new Xd(t,n):new pt(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new $d(t,n):new Kd(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(rr(r,this.value)):r!==null&&Ve(this.value)===Ve(r)&&this.matchesComparison(rr(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class te extends Lc{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new te(t,r)}matches(t){return Mc(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Mc(e){return e.op==="and"}function Uc(e){return Hd(e)&&Mc(e)}function Hd(e){for(const t of e.filters)if(t instanceof te)return!1;return!0}function Ys(e){if(e instanceof pt)return e.field.canonicalString()+e.op.toString()+nr(e.value);if(Uc(e))return e.filters.map(t=>Ys(t)).join(",");{const t=e.filters.map(r=>Ys(r)).join(",");return`${e.op}(${t})`}}function qc(e,t){return e instanceof pt?function(n,i){return i instanceof pt&&n.op===i.op&&n.field.isEqual(i.field)&&oe(n.value,i.value)}(e,t):e instanceof te?function(n,i){return i instanceof te&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,a)=>s&&qc(o,i.filters[a]),!0):!1}(e,t):void z()}function zc(e){return e instanceof pt?function(r){return`${r.field.canonicalString()} ${r.op} ${nr(r.value)}`}(e):e instanceof te?function(r){return r.op.toString()+" {"+r.getFilters().map(zc).join(" ,")+"}"}(e):"Filter"}class jd extends pt{constructor(t,r,n){super(t,r,n),this.key=q.fromName(n.referenceValue)}matches(t){const r=q.comparator(t.key,this.key);return this.matchesComparison(r)}}class $d extends pt{constructor(t,r){super(t,"in",r),this.keys=Hc("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Kd extends pt{constructor(t,r){super(t,"not-in",r),this.keys=Hc("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Hc(e,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>q.fromName(n.referenceValue))}class Gd extends pt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return qo(r)&&Xr(r.arrayValue,this.value)}}class Wd extends pt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Xr(this.value.arrayValue,r)}}class Qd extends pt{constructor(t,r){super(t,"not-in",r)}matches(t){if(Xr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Xr(this.value.arrayValue,r)}}class Xd extends pt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!qo(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Xr(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,r=null,n=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function L0(e,t=null,r=[],n=[],i=null,s=null,o=null){return new Yd(e,t,r,n,i,s,o)}function zo(e){const t=Q(e);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>Ys(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),ln(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>nr(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>nr(n)).join(",")),t.ue=r}return t.ue}function Ho(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!zd(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!qc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!O0(e.startAt,t.startAt)&&O0(e.endAt,t.endAt)}function Js(e){return q.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,r=null,n=[],i=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jd(e,t,r,n,i,s,o,a){return new hn(e,t,r,n,i,s,o,a)}function _i(e){return new hn(e)}function M0(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jc(e){return e.collectionGroup!==null}function kr(e){const t=Q(e);if(t.ce===null){t.ce=[];const r=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Gn(s,n))}),r.has(St.keyField().canonicalString())||t.ce.push(new Gn(St.keyField(),n))}return t.ce}function se(e){const t=Q(e);return t.le||(t.le=Zd(t,kr(e))),t.le}function Zd(e,t){if(e.limitType==="F")return L0(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gn(i.field,s)});const r=e.endAt?new Kn(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Kn(e.startAt.position,e.startAt.inclusive):null;return L0(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function Zs(e,t){const r=e.filters.concat([t]);return new hn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function to(e,t,r){return new hn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function yi(e,t){return Ho(se(e),se(t))&&e.limitType===t.limitType}function $c(e){return`${zo(se(e))}|lt:${e.limitType}`}function $e(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>zc(i)).join(", ")}]`),ln(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>nr(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>nr(i)).join(",")),`Target(${n})`}(se(e))}; limitType=${e.limitType})`}function vi(e,t){return t.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):q.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,i){for(const s of kr(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(n,i){return!(n.startAt&&!function(o,a,c){const u=N0(o,a,c);return o.inclusive?u<=0:u<0}(n.startAt,kr(n),i)||n.endAt&&!function(o,a,c){const u=N0(o,a,c);return o.inclusive?u>=0:u>0}(n.endAt,kr(n),i))}(e,t)}function tx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kc(e){return(t,r)=>{let n=!1;for(const i of kr(e)){const s=ex(i,t,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function ex(e,t,r){const n=e.field.isKeyField()?q.comparator(t.key,r.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?rr(c,u):z()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){hr(this.inner,(r,n)=>{for(const[i,s]of n)t(i,s)})}isEmpty(){return Nc(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new ft(q.comparator);function Ce(){return rx}const Gc=new ft(q.comparator);function Sr(...e){let t=Gc;for(const r of e)t=t.insert(r.key,r);return t}function nx(e){let t=Gc;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Fe(){return Nr()}function Wc(){return Nr()}function Nr(){return new fr(e=>e.toString(),(e,t)=>e.isEqual(t))}const ix=new Rt(q.comparator);function Z(...e){let t=ix;for(const r of e)t=t.add(r);return t}const sx=new Rt(tt);function ox(){return sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$n(t)?"-0":t}}function Xc(e){return{integerValue:""+e}}function ax(e,t){return Ld(t)?Xc(t):Qc(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this._=void 0}}function ux(e,t,r){return e instanceof Yr?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mo(s)&&(s=Uo(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,t):e instanceof Jr?Yc(e,t):e instanceof Zr?Jc(e,t):function(i,s){const o=lx(i,s),a=U0(o)+U0(i.Pe);return Xs(o)&&Xs(i.Pe)?Xc(a):Qc(i.serializer,a)}(e,t)}function cx(e,t,r){return e instanceof Jr?Yc(e,t):e instanceof Zr?Jc(e,t):r}function lx(e,t){return e instanceof Wn?function(n){return Xs(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Yr extends Ei{}class Jr extends Ei{constructor(t){super(),this.elements=t}}function Yc(e,t){const r=Zc(t);for(const n of e.elements)r.some(i=>oe(i,n))||r.push(n);return{arrayValue:{values:r}}}class Zr extends Ei{constructor(t){super(),this.elements=t}}function Jc(e,t){let r=Zc(t);for(const n of e.elements)r=r.filter(i=>!oe(i,n));return{arrayValue:{values:r}}}class Wn extends Ei{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function U0(e){return xt(e.integerValue||e.doubleValue)}function Zc(e){return qo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,r){this.field=t,this.transform=r}}function fx(e,t){return e.field.isEqual(t.field)&&function(n,i){return n instanceof Jr&&i instanceof Jr||n instanceof Zr&&i instanceof Zr?er(n.elements,i.elements,oe):n instanceof Wn&&i instanceof Wn?oe(n.Pe,i.Pe):n instanceof Yr&&i instanceof Yr}(e.transform,t.transform)}class Kt{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Kt}static exists(t){return new Kt(void 0,t)}static updateTime(t){return new Kt(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vn(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ai{}function tl(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new jo(e.key,Kt.none()):new fn(e.key,e.data,Kt.none());{const r=e.data,n=Lt.empty();let i=new Rt(St.comparator);for(let s of t.fields)if(!i.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),i=i.add(s)}return new Me(e.key,n,new Gt(i.toArray()),Kt.none())}}function dx(e,t,r){e instanceof fn?function(i,s,o){const a=i.value.clone(),c=z0(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,r):e instanceof Me?function(i,s,o){if(!Vn(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=z0(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(el(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function Or(e,t,r,n){return e instanceof fn?function(s,o,a,c){if(!Vn(s.precondition,o))return a;const u=s.value.clone(),l=H0(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Me?function(s,o,a,c){if(!Vn(s.precondition,o))return a;const u=H0(s.fieldTransforms,c,o),l=o.data;return l.setAll(el(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,r,n):function(s,o,a){return Vn(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,r)}function q0(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&er(n,i,(s,o)=>fx(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fn extends Ai{constructor(t,r,n,i=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Me extends Ai{constructor(t,r,n,i,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function el(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function z0(e,t,r){const n=new Map;lt(e.length===r.length);for(let i=0;i<r.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);n.set(s.field,cx(o,a,r[i]))}return n}function H0(e,t,r){const n=new Map;for(const i of e){const s=i.transform,o=r.data.field(i.field);n.set(i.field,ux(s,o,t))}return n}class jo extends Ai{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rl extends Ai{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t,r,n,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&dx(s,t,n[i])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Or(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Or(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=Wc();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=r.has(i.key)?null:a;const c=tl(o,a);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(j.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Z())}isEqual(t){return this.batchId===t.batchId&&er(this.mutations,t.mutations,(r,n)=>q0(r,n))&&er(this.baseMutations,t.baseMutations,(r,n)=>q0(r,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Y;function gx(e){switch(e){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function nl(e){if(e===void 0)return xe("GRPC error has no .code"),R.UNKNOWN;switch(e){case dt.OK:return R.OK;case dt.CANCELLED:return R.CANCELLED;case dt.UNKNOWN:return R.UNKNOWN;case dt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case dt.INTERNAL:return R.INTERNAL;case dt.UNAVAILABLE:return R.UNAVAILABLE;case dt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case dt.NOT_FOUND:return R.NOT_FOUND;case dt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case dt.ABORTED:return R.ABORTED;case dt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case dt.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(Y=dt||(dt={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Ye([4294967295,4294967295],0);function j0(e){const t=_x().encode(e),r=new Ad;return r.update(t),new Uint8Array(r.digest())}function $0(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ye([r,n],0),new Ye([i,s],0)]}class $o{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Pr(`Invalid padding: ${r}`);if(n<0)throw new Pr(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Pr(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Pr(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Ye.fromNumber(this.Ie)}Ee(t,r,n){let i=t.add(r.multiply(Ye.fromNumber(n)));return i.compare(yx)===1&&(i=new Ye([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const r=j0(t),[n,i]=$0(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);if(!this.de(o))return!1}return!0}static create(t,r,n){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new $o(s,i,r);return n.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const r=j0(t),[n,i]=$0(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,i,s);this.Ae(o)}}Ae(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Pr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,r,n,i,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const i=new Map;return i.set(t,dn.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Ci(j.min(),i,new ft(tt),Ce(),Z())}}class dn{constructor(t,r,n,i,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new dn(n,r,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t,r,n,i){this.Re=t,this.removedTargetIds=r,this.key=n,this.Ve=i}}class il{constructor(t,r){this.targetId=t,this.me=r}}class sl{constructor(t,r,n=Vt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=i}}class K0{constructor(){this.fe=0,this.ge=W0(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Z(),r=Z(),n=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:z()}}),new dn(this.pe,this.ye,t,r,n)}ve(){this.we=!1,this.ge=W0()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ce(),this.qe=G0(),this.Qe=new ft(tt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const n=this.Ge(r);switch(t.state){case 0:this.ze(r)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(t.resumeToken));break;default:z()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(t){const r=t.targetId,n=t.me.count,i=this.Je(r);if(i){const s=i.target;if(Js(s))if(n===0){const o=new q(s.path);this.Ue(r,o,vt.newNoDocument(o,j.min()))}else lt(n===1);else{const o=this.Ye(r);if(o!==n){const a=this.Ze(t),c=a?this.Xe(a,t,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let o,a;try{o=be(n).toUint8Array()}catch(c){if(c instanceof Oc)return tr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new $o(o,i,s)}catch(c){return tr(c instanceof Pr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(t,r,n){return r.me.count===n-this.nt(t,r.targetId)?0:2}nt(t,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(r,s,null),i++)}),i}rt(t){const r=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Js(a.target)){const c=new q(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,vt.newNoDocument(c,t))}s.be&&(r.set(o,s.Ce()),s.ve())}});let n=Z();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Ci(t,r,this.Qe,this.ke,n);return this.ke=Ce(),this.qe=G0(),this.Qe=new ft(tt),i}$e(t,r){if(!this.ze(t))return;const n=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,n){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new K0,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Rt(tt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=this.Je(t)!==null;return r||M("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new K0),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function G0(){return new ft(q.comparator)}function W0(){return new ft(q.comparator)}const Ex={asc:"ASCENDING",desc:"DESCENDING"},Ax={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cx={and:"AND",or:"OR"};class wx{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function eo(e,t){return e.useProto3Json||ln(t)?t:{value:t}}function Qn(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ol(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Tx(e,t){return Qn(e,t.toTimestamp())}function he(e){return lt(!!e),j.fromTimestamp(function(r){const n=Ae(r);return new Et(n.seconds,n.nanos)}(e))}function Ko(e,t){return ro(e,t).canonicalString()}function ro(e,t){const r=function(i){return new it(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?r:r.child(t)}function al(e){const t=it.fromString(e);return lt(fl(t)),t}function Xn(e,t){return Ko(e.databaseId,t.path)}function Lr(e,t){const r=al(t);if(r.get(1)!==e.databaseId.projectId)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new q(cl(r))}function ul(e,t){return Ko(e.databaseId,t)}function Dx(e){const t=al(e);return t.length===4?it.emptyPath():cl(t)}function Q0(e){return new it(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cl(e){return lt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function X0(e,t,r){return{name:Xn(e,t),fields:r.value.mapValue.fields}}function Ix(e,t){return"found"in t?function(n,i){lt(!!i.found),i.found.name,i.found.updateTime;const s=Lr(n,i.found.name),o=he(i.found.updateTime),a=i.found.createTime?he(i.found.createTime):j.min(),c=new Lt({mapValue:{fields:i.found.fields}});return vt.newFoundDocument(s,o,a,c)}(e,t):"missing"in t?function(n,i){lt(!!i.missing),lt(!!i.readTime);const s=Lr(n,i.missing),o=he(i.readTime);return vt.newNoDocument(s,o)}(e,t):z()}function Rx(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:z()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(lt(l===void 0||typeof l=="string"),Vt.fromBase64String(l||"")):(lt(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Vt.fromUint8Array(l||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const l=u.code===void 0?R.UNKNOWN:nl(u.code);return new L(l,u.message||"")}(o);r=new sl(n,i,s,a||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=Lr(e,n.document.name),s=he(n.document.updateTime),o=n.document.createTime?he(n.document.createTime):j.min(),a=new Lt({mapValue:{fields:n.document.fields}}),c=vt.newFoundDocument(i,s,o,a),u=n.targetIds||[],l=n.removedTargetIds||[];r=new kn(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=Lr(e,n.document),s=n.readTime?he(n.readTime):j.min(),o=vt.newNoDocument(i,s),a=n.removedTargetIds||[];r=new kn([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=Lr(e,n.document),s=n.removedTargetIds||[];r=new kn([],s,i,null)}else{if(!("filter"in t))return z();{t.filter;const n=t.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,o=new mx(i,s),a=n.targetId;r=new il(a,o)}}return r}function Fx(e,t){let r;if(t instanceof fn)r={update:X0(e,t.key,t.value)};else if(t instanceof jo)r={delete:Xn(e,t.key)};else if(t instanceof Me)r={update:X0(e,t.key,t.data),updateMask:Ox(t.fieldMask)};else{if(!(t instanceof rl))return z();r={verify:Xn(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const a=o.transform;if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wn)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw z()}(0,n))),t.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Tx(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(e,t.precondition)),r}function Bx(e,t){return{documents:[ul(e,t.path)]}}function Sx(e,t){const r={structuredQuery:{}},n=t.path;let i;t.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=ul(e,i);const s=function(u){if(u.length!==0)return hl(te.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:Ke(f.field),direction:Vx(f.dir)}}(l))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const a=eo(e,t.limit);return a!==null&&(r.structuredQuery.limit=a),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:r,parent:i}}function Px(e){let t=Dx(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){lt(n===1);const l=r.from[0];l.allDescendants?i=l.collectionId:t=t.child(l.collectionId)}let s=[];r.where&&(s=function(h){const f=ll(h);return f instanceof te&&Uc(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(f=>function(x){return new Gn(Ge(x.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ln(f)?null:f}(r.limit));let c=null;r.startAt&&(c=function(h){const f=!!h.before,d=h.values||[];return new Kn(d,f)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const f=!h.before,d=h.values||[];return new Kn(d,f)}(r.endAt)),Jd(t,i,o,s,a,"F",c,u)}function bx(e,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function ll(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Ge(r.unaryFilter.field);return pt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ge(r.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ge(r.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ge(r.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(e):e.fieldFilter!==void 0?function(r){return pt.create(Ge(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return te.create(r.compositeFilter.filters.map(n=>ll(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(r.compositeFilter.op))}(e):z()}function Vx(e){return Ex[e]}function kx(e){return Ax[e]}function Nx(e){return Cx[e]}function Ke(e){return{fieldPath:e.canonicalString()}}function Ge(e){return St.fromServerFormat(e.fieldPath)}function hl(e){return e instanceof pt?function(r){if(r.op==="=="){if(k0(r.value))return{unaryFilter:{field:Ke(r.field),op:"IS_NAN"}};if(V0(r.value))return{unaryFilter:{field:Ke(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(k0(r.value))return{unaryFilter:{field:Ke(r.field),op:"IS_NOT_NAN"}};if(V0(r.value))return{unaryFilter:{field:Ke(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ke(r.field),op:kx(r.op),value:r.value}}}(e):e instanceof te?function(r){const n=r.getFilters().map(i=>hl(i));return n.length===1?n[0]:{compositeFilter:{op:Nx(r.op),filters:n}}}(e):z()}function Ox(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function fl(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,r,n,i,s=j.min(),o=j.min(),a=Vt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new ye(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ye(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ye(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ye(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t){this.ut=t}}function Mx(e){const t=Px({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?to(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.on=new qx}addToCollectionParentIndex(t,r){return this.on.add(r),b.resolve()}getCollectionParents(t,r){return b.resolve(this.on.getEntries(r))}addFieldIndex(t,r){return b.resolve()}deleteFieldIndex(t,r){return b.resolve()}deleteAllFieldIndexes(t){return b.resolve()}createTargetIndexes(t,r){return b.resolve()}getDocumentsMatchingTarget(t,r){return b.resolve(null)}getIndexType(t,r){return b.resolve(0)}getFieldIndexes(t,r){return b.resolve([])}getNextCollectionGroupToUpdate(t){return b.resolve(null)}getMinOffset(t,r){return b.resolve(Ee.min())}getMinOffsetFromCollectionGroup(t,r){return b.resolve(Ee.min())}updateCollectionGroup(t,r,n){return b.resolve()}updateIndexEntries(t,r){return b.resolve()}}class qx{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),i=this.index[r]||new Rt(it.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Rt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new ir(0)}static Nn(){return new ir(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.changes=new fr(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,vt.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?b.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(t,r,n,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(n!==null&&Or(n.mutation,i,Gt.empty(),Et.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Z()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Z()){const i=Fe();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,n).next(s=>{let o=Sr();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=Fe();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Z()))}populateOverlays(t,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{r.set(o,a)})})}computeViews(t,r,n,i){let s=Ce();const o=Nr(),a=function(){return Nr()}();return r.forEach((c,u)=>{const l=n.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Me)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Or(l.mutation,u,l.mutation.getFieldMask(),Et.now())):o.set(u.key,Gt.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),r.forEach((u,l)=>{var h;return a.set(u,new Hx(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,r){const n=Nr();let i=new ft((o,a)=>o-a),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let l=n.get(c)||Gt.empty();l=a.applyToLocalView(u,l),n.set(c,l);const h=(i.get(a.batchId)||Z()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,h=Wc();l.forEach(f=>{if(!s.has(f)){const d=tl(r.get(f),n.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,h))}return b.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):jc(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,i):this.getDocumentsMatchingCollectionQuery(t,r,n,i)}getNextDocuments(t,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,i-s.size):b.resolve(Fe());let a=-1,c=s;return o.next(u=>b.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?b.resolve():this.remoteDocumentCache.getEntry(t,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Z())).next(l=>({batchId:a,changes:nx(l)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new q(r)).next(n=>{let i=Sr();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,n,i){const s=r.collectionGroup;let o=Sr();return this.indexManager.getCollectionParents(t,s).next(a=>b.forEach(a,c=>{const u=function(h,f){return new hn(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,i).next(l=>{l.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,i))).next(o=>{s.forEach((c,u)=>{const l=u.getKey();o.get(l)===null&&(o=o.insert(l,vt.newInvalidDocument(l)))});let a=Sr();return o.forEach((c,u)=>{const l=s.get(c);l!==void 0&&Or(l.mutation,u,Gt.empty(),Et.now()),vi(r,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,r){return b.resolve(this.ur.get(r))}saveBundleMetadata(t,r){return this.ur.set(r.id,function(i){return{id:i.id,version:i.version,createTime:he(i.createTime)}}(r)),b.resolve()}getNamedQuery(t,r){return b.resolve(this.cr.get(r))}saveNamedQuery(t,r){return this.cr.set(r.name,function(i){return{name:i.name,query:Mx(i.bundledQuery),readTime:he(i.readTime)}}(r)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.overlays=new ft(q.comparator),this.lr=new Map}getOverlay(t,r){return b.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Fe();return b.forEach(r,i=>this.getOverlay(t,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((i,s)=>{this.lt(t,r,s)}),b.resolve()}removeOverlaysForBatchId(t,r,n){const i=this.lr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(n)),b.resolve()}getOverlaysForCollection(t,r,n){const i=Fe(),s=r.length+1,o=new q(r.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return b.resolve(i)}getOverlaysForCollectionGroup(t,r,n,i){let s=new ft((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let l=s.get(u.largestBatchId);l===null&&(l=Fe(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=Fe(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return b.resolve(a)}lt(t,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new px(r,n));let s=this.lr.get(r);s===void 0&&(s=Z(),this.lr.set(r,s)),this.lr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.hr=new Rt(yt.Pr),this.Ir=new Rt(yt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,r){const n=new yt(t,r);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.dr(new yt(t,r))}Ar(t,r){t.forEach(n=>this.removeReference(n,r))}Rr(t){const r=new q(new it([])),n=new yt(r,t),i=new yt(r,t+1),s=[];return this.Ir.forEachInRange([n,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const r=new q(new it([])),n=new yt(r,t),i=new yt(r,t+1);let s=Z();return this.Ir.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new yt(t,0),n=this.hr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class yt{constructor(t,r){this.key=t,this.gr=r}static Pr(t,r){return q.comparator(t.key,r.key)||tt(t.gr,r.gr)}static Tr(t,r){return tt(t.gr,r.gr)||q.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.pr=1,this.yr=new Rt(yt.Pr)}checkEmpty(t){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xx(s,r,n,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(t,r){return b.resolve(this.wr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,i=this.Sr(n),s=i<0?0:i;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new yt(r,0),i=new yt(r,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([n,i],o=>{const a=this.wr(o.gr);s.push(a)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Rt(tt);return r.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{n=n.add(a.gr)})}),b.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,i=n.length+1;let s=n;q.isDocumentKey(s)||(s=s.child(""));const o=new yt(new q(s),0);let a=new Rt(tt);return this.yr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),b.resolve(this.br(a))}br(t){const r=[];return t.forEach(n=>{const i=this.wr(n);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){lt(this.Dr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.yr;return b.forEach(r.mutations,i=>{const s=new yt(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=n})}Fn(t){}containsKey(t,r){const n=new yt(r,0),i=this.yr.firstAfterOrEqual(n);return b.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,b.resolve()}Dr(t,r){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const r=this.Sr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.Cr=t,this.docs=function(){return new ft(q.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,o=this.Cr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return b.resolve(n?n.document.mutableCopy():vt.newInvalidDocument(r))}getEntries(t,r){let n=Ce();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),b.resolve(n)}getDocumentsMatchingQuery(t,r,n,i){let s=Ce();const o=r.path,a=new q(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Vd(bd(l),n)<=0||(i.has(l.key)||vi(r,l))&&(s=s.insert(l.key,l.mutableCopy()))}return b.resolve(s)}getAllFromCollectionGroup(t,r,n,i){z()}vr(t,r){return b.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Qx(this)}getSize(t){return b.resolve(this.size)}}class Qx extends zx{constructor(t){super(),this._r=t}applyChanges(t){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this._r.addEntry(t,i)):this._r.removeEntry(n)}),b.waitFor(r)}getFromCache(t,r){return this._r.getEntry(t,r)}getAllFromCache(t,r){return this._r.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(t){this.persistence=t,this.Fr=new fr(r=>zo(r),Ho),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Go,this.targetCount=0,this.Nr=ir.On()}forEachTarget(t,r){return this.Fr.forEach((n,i)=>r(i)),b.resolve()}getLastRemoteSnapshotVersion(t){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return b.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Mr&&(this.Mr=r),b.resolve()}kn(t){this.Fr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Nr=new ir(r),this.highestTargetId=r),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,r){return this.kn(r),this.targetCount+=1,b.resolve()}updateTargetData(t,r){return this.kn(r),b.resolve()}removeTargetData(t,r){return this.Fr.delete(r.target),this.Or.Rr(r.targetId),this.targetCount-=1,b.resolve()}removeTargets(t,r,n){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),b.waitFor(s).next(()=>i)}getTargetCount(t){return b.resolve(this.targetCount)}getTargetData(t,r){const n=this.Fr.get(r)||null;return b.resolve(n)}addMatchingKeys(t,r,n){return this.Or.Er(r,n),b.resolve()}removeMatchingKeys(t,r,n){this.Or.Ar(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),b.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this.Or.Rr(r),b.resolve()}getMatchingKeysForTargetId(t,r){const n=this.Or.mr(r);return b.resolve(n)}containsKey(t,r){return b.resolve(this.Or.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,r){this.Lr={},this.overlays={},this.Br=new Lo(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Xx(this),this.indexManager=new Ux,this.remoteDocumentCache=function(i){return new Wx(i)}(n=>this.referenceDelegate.Qr(n)),this.serializer=new Lx(r),this.Kr=new $x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Kx,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.Lr[t.toKey()];return n||(n=new Gx(r,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,r,n){M("MemoryPersistence","Starting transaction:",t);const i=new Jx(this.Br.next());return this.referenceDelegate.$r(),n(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,r){return b.or(Object.values(this.Lr).map(n=>()=>n.containsKey(t,r)))}}class Jx extends Nd{constructor(t){super(),this.currentSequenceNumber=t}}class Wo{constructor(t){this.persistence=t,this.Gr=new Go,this.zr=null}static jr(t){return new Wo(t)}get Hr(){if(this.zr)return this.zr;throw z()}addReference(t,r,n){return this.Gr.addReference(n,r),this.Hr.delete(n.toString()),b.resolve()}removeReference(t,r,n){return this.Gr.removeReference(n,r),this.Hr.add(n.toString()),b.resolve()}markPotentiallyOrphaned(t,r){return this.Hr.add(r.toString()),b.resolve()}removeTarget(t,r){this.Gr.Rr(r.targetId).forEach(i=>this.Hr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}$r(){this.zr=new Set}Ur(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Hr,n=>{const i=q.fromPath(n);return this.Jr(t,i).next(s=>{s||r.removeEntry(i,j.min())})}).next(()=>(this.zr=null,r.apply(t)))}updateLimboDocument(t,r){return this.Jr(t,r).next(n=>{n?this.Hr.delete(r.toString()):this.Hr.add(r.toString())})}Qr(t){return 0}Jr(t,r){return b.or([()=>b.resolve(this.Gr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Wr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t,r,n,i){this.targetId=t,this.fromCache=r,this.ki=n,this.qi=i}static Qi(t,r){let n=Z(),i=Z();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Qo(t,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Vh()?8:Od(kh())>0?6:4}()}initialize(t,r){this.Gi=t,this.indexManager=r,this.Ki=!0}getDocumentsMatchingQuery(t,r,n,i){const s={result:null};return this.zi(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,r,i,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Zx;return this.Hi(t,r,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,r,o,a.size)})}).next(()=>s.result)}Ji(t,r,n,i){return n.documentReadCount<this.Ui?(wr()<=_e.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",$e(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),b.resolve()):(wr()<=_e.DEBUG&&M("QueryEngine","Query:",$e(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(wr()<=_e.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",$e(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,se(r))):b.resolve())}zi(t,r){if(M0(r))return b.resolve(null);let n=se(r);return this.indexManager.getIndexType(t,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=to(r,null,"F"),n=se(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Z(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Yi(r,a);return this.Zi(r,u,o,c.readTime)?this.zi(t,to(r,null,"F")):this.Xi(t,u,r,c)}))})))}ji(t,r,n,i){return M0(r)||i.isEqual(j.min())?b.resolve(null):this.Gi.getDocuments(t,n).next(s=>{const o=this.Yi(r,s);return this.Zi(r,o,n,i)?b.resolve(null):(wr()<=_e.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$e(r)),this.Xi(t,o,r,Pd(i,-1)).next(a=>a))})}Yi(t,r){let n=new Rt(Kc(t));return r.forEach((i,s)=>{vi(t,s)&&(n=n.add(s))}),n}Zi(t,r,n,i){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,r,n){return wr()<=_e.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",$e(r)),this.Gi.getDocumentsMatchingQuery(t,r,Ee.min(),n)}Xi(t,r,n,i){return this.Gi.getDocumentsMatchingQuery(t,n,i).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t,r,n,i){this.persistence=t,this.es=r,this.serializer=i,this.ts=new ft(tt),this.ns=new fr(s=>zo(s),Ho),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(n)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jx(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.ts))}}function rp(e,t,r,n){return new ep(e,t,r,n)}async function dl(e,t){const r=Q(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.os(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],a=[];let c=Z();for(const u of i){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return r.localDocuments.getDocuments(n,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}function xl(e){const t=Q(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.qr.getLastRemoteSnapshotVersion(r))}function np(e,t){const r=Q(e),n=t.snapshotVersion;let i=r.ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.ss.newChangeBuffer({trackRemovals:!0});i=r.ts;const a=[];t.targetChanges.forEach((l,h)=>{const f=i.get(h);if(!f)return;a.push(r.qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>r.qr.addMatchingKeys(s,l.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?d=d.withResumeToken(Vt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):l.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(l.resumeToken,n)),i=i.insert(h,d),function(p,m,v){return p.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,d,l)&&a.push(r.qr.updateTargetData(s,d))});let c=Ce(),u=Z();if(t.documentUpdates.forEach(l=>{t.resolvedLimboDocuments.has(l)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(ip(s,o,t.documentUpdates).next(l=>{c=l.us,u=l.cs})),!n.isEqual(j.min())){const l=r.qr.getLastRemoteSnapshotVersion(s).next(h=>r.qr.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(l)}return b.waitFor(a).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.ts=i,s))}function ip(e,t,r){let n=Z(),i=Z();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=Ce();return r.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(j.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function sp(e,t){const r=Q(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.qr.getTargetData(n,t).next(s=>s?(i=s,b.resolve(i)):r.qr.allocateTargetId(n).next(o=>(i=new ye(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ts=r.ts.insert(n.targetId,n),r.ns.set(t,n.targetId)),n})}async function no(e,t,r){const n=Q(e),i=n.ts.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!cn(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ts=n.ts.remove(t),n.ns.delete(i.target)}function Y0(e,t,r){const n=Q(e);let i=j.min(),s=Z();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){const h=Q(c),f=h.ns.get(l);return f!==void 0?b.resolve(h.ts.get(f)):h.qr.getTargetData(u,l)}(n,o,se(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>n.es.getDocumentsMatchingQuery(o,t,r?i:j.min(),r?s:Z())).next(a=>(op(n,tx(t),a),{documents:a,ls:s})))}function op(e,t,r){let n=e.rs.get(t)||j.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.rs.set(t,n)}class J0{constructor(){this.activeTargetIds=ox()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ap{constructor(){this.eo=new J0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,r,n){this.no[t]=r}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new J0,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=null;function Bs(){return Pn===null?Pn=function(){return 268435456+Math.round(2147483648*Math.random())}():Pn++,"0x"+Pn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.lo()}send(t){this.co(t)}Vo(){this.Po()}mo(){this.To()}fo(t){this.Ao(t)}po(t){this.Ro(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class hp extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=n+"://"+r.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(r,n,i,s,o){const a=Bs(),c=this.Co(r,n.toUriEncodedString());M("RestConnection",`Sending RPC '${r}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(u,s,o),this.Fo(r,c,u,i).then(l=>(M("RestConnection",`Received RPC '${r}' ${a}: `,l),l),l=>{throw tr("RestConnection",`RPC '${r}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Mo(r,n,i,s,o,a){return this.Do(r,n,i,s,o)}vo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lr}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),i&&i.headers.forEach((s,o)=>r[o]=s)}Co(r,n){const i=cp[r];return`${this.yo}/v1/${n}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Fo(t,r,n,i){const s=Bs();return new Promise((o,a)=>{const c=new Ed;c.setWithCredentials(!0),c.listenOnce(_d.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rs.NO_ERROR:const l=c.getResponseJson();M(Ft,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(l)),o(l);break;case Rs.TIMEOUT:M(Ft,`RPC '${t}' ${s} timed out`),a(new L(R.DEADLINE_EXCEEDED,"Request time out"));break;case Rs.HTTP_ERROR:const h=c.getStatus();if(M(Ft,`RPC '${t}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const x=function(m){const v=m.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(v)>=0?v:R.UNKNOWN}(d.status);a(new L(x,d.message))}else a(new L(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new L(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{M(Ft,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(i);M(Ft,`RPC '${t}' ${s} sending request:`,i),c.send(r,"POST",u,n,15)})}xo(t,r,n){const i=Bs(),s=[this.yo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=md(),a=gd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new vd({})),this.vo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const l=s.join("");M(Ft,`Creating RPC '${t}' stream ${i}: ${l}`,c);const h=o.createWebChannel(l,c);let f=!1,d=!1;const x=new lp({co:m=>{d?M(Ft,`Not sending because RPC '${t}' stream ${i} is closed:`,m):(f||(M(Ft,`Opening RPC '${t}' stream ${i} transport.`),h.open(),f=!0),M(Ft,`RPC '${t}' stream ${i} sending:`,m),h.send(m))},lo:()=>h.close()}),p=(m,v,g)=>{m.listen(v,_=>{try{g(_)}catch(y){setTimeout(()=>{throw y},0)}})};return p(h,Fn.EventType.OPEN,()=>{d||(M(Ft,`RPC '${t}' stream ${i} transport opened.`),x.Vo())}),p(h,Fn.EventType.CLOSE,()=>{d||(d=!0,M(Ft,`RPC '${t}' stream ${i} transport closed`),x.fo())}),p(h,Fn.EventType.ERROR,m=>{d||(d=!0,tr(Ft,`RPC '${t}' stream ${i} transport errored:`,m),x.fo(new L(R.UNAVAILABLE,"The operation could not be completed")))}),p(h,Fn.EventType.MESSAGE,m=>{var v;if(!d){const g=m.data[0];lt(!!g);const _=g,y=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(y){M(Ft,`RPC '${t}' stream ${i} received error:`,y);const C=y.status;let A=function(N){const E=dt[N];if(E!==void 0)return nl(E)}(C),w=y.message;A===void 0&&(A=R.INTERNAL,w="Unknown error status: "+C+" with message "+y.message),d=!0,x.fo(new L(A,w)),h.close()}else M(Ft,`RPC '${t}' stream ${i} received:`,g),x.po(g)}}),p(a,yd.STAT_EVENT,m=>{m.stat===R0.PROXY?M(Ft,`RPC '${t}' stream ${i} detected buffering proxy`):m.stat===R0.NOPROXY&&M(Ft,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.mo()},0),x}}function Ss(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e){return new wx(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,r,n=1e3,i=1.5,s=6e4){this.si=t,this.timerId=r,this.Oo=n,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(t){this.cancel();const r=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),i=Math.max(0,r-n);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),t())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t,r,n,i,s,o,a,c){this.si=t,this.Wo=n,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Xo(t,r)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(t){this.i_(),this.stream.send(t)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(t,r){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,t!==4?this.Jo.reset():r&&r.code===R.RESOURCE_EXHAUSTED?(xe(r.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):r&&r.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(r)}o_(){}auth(){this.state=1;const t=this.__(this.zo),r=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.zo===r&&this.a_(n,i)},n=>{t(()=>{const i=new L(R.UNKNOWN,"Fetching auth token failed: "+n.message);return this.u_(i)})})}a_(t,r){const n=this.__(this.zo);this.stream=this.c_(t,r),this.stream.ho(()=>{n(()=>this.listener.ho())}),this.stream.Io(()=>{n(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{n(()=>this.u_(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(async()=>{this.state=0,this.start()})}u_(t){return M("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}__(t){return r=>{this.si.enqueueAndForget(()=>this.zo===t?r():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dp extends fp{constructor(t,r,n,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=s}c_(t,r){return this.connection.xo("Listen",t,r)}onMessage(t){this.Jo.reset();const r=Rx(this.serializer,t),n=function(s){if(!("targetChange"in s))return j.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?j.min():o.readTime?he(o.readTime):j.min()}(t);return this.listener.l_(r,n)}h_(t){const r={};r.database=Q0(this.serializer),r.addTarget=function(s,o){let a;const c=o.target;if(a=Js(c)?{documents:Bx(s,c)}:{query:Sx(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ol(s,o.resumeToken);const u=eo(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(j.min())>0){a.readTime=Qn(s,o.snapshotVersion.toTimestamp());const u=eo(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const n=bx(this.serializer,t);n&&(r.labels=n),this.r_(r)}P_(t){const r={};r.database=Q0(this.serializer),r.removeTarget=t,this.r_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends class{}{constructor(t,r,n,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}Do(t,r,n,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(t,ro(r,n),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(R.UNKNOWN,s.toString())})}Mo(t,r,n,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(t,ro(r,n),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(R.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}}class pp{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xe(r),this.y_=!1):M("OnlineStateTracker",r)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,r,n,i,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{n.enqueueAndForget(async()=>{pn(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Q(c);u.M_.add(4),await xn(u),u.N_.set("Unknown"),u.M_.delete(4),await Ti(u)}(this))})}),this.N_=new pp(n,i)}}async function Ti(e){if(pn(e))for(const t of e.x_)await t(!0)}async function xn(e){for(const t of e.x_)await t(!1)}function pl(e,t){const r=Q(e);r.F_.has(t.targetId)||(r.F_.set(t.targetId,t),ta(r)?Zo(r):dr(r).Zo()&&Jo(r,t))}function Yo(e,t){const r=Q(e),n=dr(r);r.F_.delete(t),n.Zo()&&ml(r,t),r.F_.size===0&&(n.Zo()?n.t_():pn(r)&&r.N_.set("Unknown"))}function Jo(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}dr(e).h_(t)}function ml(e,t){e.L_.xe(t),dr(e).P_(t)}function Zo(e){e.L_=new vx({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),dr(e).start(),e.N_.w_()}function ta(e){return pn(e)&&!dr(e).Yo()&&e.F_.size>0}function pn(e){return Q(e).M_.size===0}function gl(e){e.L_=void 0}async function gp(e){e.N_.set("Online")}async function _p(e){e.F_.forEach((t,r)=>{Jo(e,t)})}async function yp(e,t){gl(e),ta(e)?(e.N_.D_(t),Zo(e)):e.N_.set("Unknown")}async function vp(e,t,r){if(e.N_.set("Online"),t instanceof sl&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(n){M("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tu(e,n)}else if(t instanceof kn?e.L_.Ke(t):t instanceof il?e.L_.He(t):e.L_.We(t),!r.isEqual(j.min()))try{const n=await xl(e.localStore);r.compareTo(n)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.F_.get(u);l&&s.F_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const l=s.F_.get(c);if(!l)return;s.F_.set(c,l.withResumeToken(Vt.EMPTY_BYTE_STRING,l.snapshotVersion)),ml(s,c);const h=new ye(l.target,c,u,l.sequenceNumber);Jo(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(e,r)}catch(n){M("RemoteStore","Failed to raise snapshot:",n),await tu(e,n)}}async function tu(e,t,r){if(!cn(t))throw t;e.M_.add(1),await xn(e),e.N_.set("Offline"),r||(r=()=>xl(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await r(),e.M_.delete(1),await Ti(e)})}async function eu(e,t){const r=Q(e);r.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const n=pn(r);r.M_.add(3),await xn(r),n&&r.N_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.M_.delete(3),await Ti(r)}async function Ep(e,t){const r=Q(e);t?(r.M_.delete(2),await Ti(r)):t||(r.M_.add(2),await xn(r),r.N_.set("Unknown"))}function dr(e){return e.B_||(e.B_=function(r,n,i){const s=Q(r);return s.m_(),new dp(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:gp.bind(null,e),Io:_p.bind(null,e),Eo:yp.bind(null,e),l_:vp.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.e_(),ta(e)?Zo(e):e.N_.set("Unknown")):(await e.B_.stop(),gl(e))})),e.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t,r,n,i,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,i,s){const o=Date.now()+n,a=new ea(t,r,o,i,s);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _l(e,t){if(xe("AsyncQueue",`${t}: ${e}`),cn(e))return new L(R.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.comparator=t?(r,n)=>t(r,n)||q.comparator(r.key,n.key):(r,n)=>q.comparator(r.key,n.key),this.keyedMap=Sr(),this.sortedSet=new ft(this.comparator)}static emptySet(t){return new Je(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Je)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Je;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.q_=new ft(q.comparator)}track(t){const r=t.doc.key,n=this.q_.get(r);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(r,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(r):t.type===1&&n.type===2?this.q_=this.q_.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(r,{type:2,doc:t.doc}):z():this.q_=this.q_.insert(r,t)}Q_(){const t=[];return this.q_.inorderTraversal((r,n)=>{t.push(n)}),t}}class sr{constructor(t,r,n,i,s,o,a,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,i,s){const o=[];return r.forEach(a=>{o.push({type:0,doc:a})}),new sr(t,r,Je.emptySet(r),o,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Cp{constructor(){this.queries=new fr(t=>$c(t),yi),this.onlineState="Unknown",this.z_=new Set}}async function ra(e,t){const r=Q(e);let n=3;const i=t.query;let s=r.queries.get(i);s?!s.W_()&&t.G_()&&(n=2):(s=new Ap,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await r.onListen(i,!0);break;case 1:s.K_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const a=_l(o,`Initialization of query '${$e(t.query)}' failed`);return void t.onError(a)}r.queries.set(i,s),s.U_.push(t),t.j_(r.onlineState),s.K_&&t.H_(s.K_)&&ia(r)}async function na(e,t){const r=Q(e),n=t.query;let i=3;const s=r.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function wp(e,t){const r=Q(e);let n=!1;for(const i of t){const s=i.query,o=r.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(n=!0);o.K_=i}}n&&ia(r)}function Tp(e,t,r){const n=Q(e),i=n.queries.get(t);if(i)for(const s of i.U_)s.onError(r);n.queries.delete(t)}function ia(e){e.z_.forEach(t=>{t.next()})}var io,nu;(nu=io||(io={})).J_="default",nu.Cache="cache";class sa{constructor(t,r,n){this.query=t,this.Y_=r,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)i.type!==3&&n.push(i);t=new sr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),r=!0):this.ta(t,this.onlineState)&&(this.na(t),r=!0),this.X_=t,r}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let r=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),r=!0),r}ta(t,r){if(!t.fromCache||!this.G_())return!0;const n=r!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const r=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}na(t){t=sr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==io.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t){this.key=t}}class vl{constructor(t){this.key=t}}class Dp{constructor(t,r){this.query=t,this.la=r,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Z(),this.mutatedKeys=Z(),this.Ia=Kc(t),this.Ta=new Je(this.Ia)}get Ea(){return this.la}da(t,r){const n=r?r.Aa:new ru,i=r?r.Ta:this.Ta;let s=r?r.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((l,h)=>{const f=i.get(l),d=vi(this.query,h)?h:null,x=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let m=!1;f&&d?f.data.isEqual(d.data)?x!==p&&(n.track({type:3,doc:d}),m=!0):this.Ra(f,d)||(n.track({type:2,doc:d}),m=!0,(c&&this.Ia(d,c)>0||u&&this.Ia(d,u)<0)&&(a=!0)):!f&&d?(n.track({type:0,doc:d}),m=!0):f&&!d&&(n.track({type:1,doc:f}),m=!0,(c||u)&&(a=!0)),m&&(d?(o=o.add(d),s=p?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),n.track({type:1,doc:l})}return{Ta:o,Aa:n,Zi:a,mutatedKeys:s}}Ra(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((l,h)=>function(d,x){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(d)-p(x)}(l.type,h.type)||this.Ia(l.doc,h.doc)),this.Va(n),i=i!=null&&i;const a=r&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,o.length!==0||u?{snapshot:new sr(this.query,t.Ta,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ru,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(r=>this.la=this.la.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.la=this.la.delete(r)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Z(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const r=[];return t.forEach(n=>{this.Pa.has(n)||r.push(new vl(n))}),this.Pa.forEach(n=>{t.has(n)||r.push(new yl(n))}),r}pa(t){this.la=t.ls,this.Pa=Z();const r=this.da(t.documents);return this.applyChanges(r,!0)}ya(){return sr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Ip{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Rp{constructor(t){this.key=t,this.wa=!1}}class Fp{constructor(t,r,n,i,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new fr(a=>$c(a),yi),this.Da=new Map,this.Ca=new Set,this.va=new ft(q.comparator),this.Fa=new Map,this.Ma=new Go,this.xa={},this.Oa=new Map,this.Na=ir.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Bp(e,t,r=!0){const n=Tl(e);let i;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await El(n,t,r,!0),i}async function Sp(e,t){const r=Tl(e);await El(r,t,!0,!1)}async function El(e,t,r,n){const i=await sp(e.localStore,se(t)),s=i.targetId,o=r?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return n&&(a=await Pp(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&r&&pl(e.remoteStore,i),a}async function Pp(e,t,r,n,i){e.Ba=(h,f,d)=>async function(p,m,v,g){let _=m.view.da(v);_.Zi&&(_=await Y0(p.localStore,m.query,!1).then(({documents:w})=>m.view.da(w,_)));const y=g&&g.targetChanges.get(m.targetId),C=g&&g.targetMismatches.get(m.targetId)!=null,A=m.view.applyChanges(_,p.isPrimaryClient,y,C);return su(p,m.targetId,A.fa),A.snapshot}(e,h,f,d);const s=await Y0(e.localStore,t,!0),o=new Dp(t,s.ls),a=o.da(s.documents),c=dn.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,c);su(e,r,u.fa);const l=new Ip(t,r,o);return e.ba.set(t,l),e.Da.has(r)?e.Da.get(r).push(t):e.Da.set(r,[t]),u.snapshot}async function bp(e,t,r){const n=Q(e),i=n.ba.get(t),s=n.Da.get(i.targetId);if(s.length>1)return n.Da.set(i.targetId,s.filter(o=>!yi(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await no(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Yo(n.remoteStore,i.targetId),so(n,i.targetId)}).catch(Oo)):(so(n,i.targetId),await no(n.localStore,i.targetId,!0))}async function Vp(e,t){const r=Q(e),n=r.ba.get(t),i=r.Da.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Yo(r.remoteStore,n.targetId))}async function Al(e,t){const r=Q(e);try{const n=await np(r.localStore,t);t.targetChanges.forEach((i,s)=>{const o=r.Fa.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?lt(o.wa):i.removedDocuments.size>0&&(lt(o.wa),o.wa=!1))}),await wl(r,n,t)}catch(n){await Oo(n)}}function iu(e,t,r){const n=Q(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Q(o);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(const f of h.U_)f.j_(a)&&(u=!0)}),u&&ia(c)}(n.eventManager,t),i.length&&n.Sa.l_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function kp(e,t,r){const n=Q(e);n.sharedClientState.updateQueryState(t,"rejected",r);const i=n.Fa.get(t),s=i&&i.key;if(s){let o=new ft(q.comparator);o=o.insert(s,vt.newNoDocument(s,j.min()));const a=Z().add(s),c=new Ci(j.min(),new Map,new ft(tt),o,a);await Al(n,c),n.va=n.va.remove(s),n.Fa.delete(t),oa(n)}else await no(n.localStore,t,!1).then(()=>so(n,t,r)).catch(Oo)}function so(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Da.get(t))e.ba.delete(n),r&&e.Sa.ka(n,r);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach(n=>{e.Ma.containsKey(n)||Cl(e,n)})}function Cl(e,t){e.Ca.delete(t.path.canonicalString());const r=e.va.get(t);r!==null&&(Yo(e.remoteStore,r),e.va=e.va.remove(t),e.Fa.delete(r),oa(e))}function su(e,t,r){for(const n of r)n instanceof yl?(e.Ma.addReference(n.key,t),Np(e,n)):n instanceof vl?(M("SyncEngine","Document no longer in limbo: "+n.key),e.Ma.removeReference(n.key,t),e.Ma.containsKey(n.key)||Cl(e,n.key)):z()}function Np(e,t){const r=t.key,n=r.path.canonicalString();e.va.get(r)||e.Ca.has(n)||(M("SyncEngine","New document in limbo: "+r),e.Ca.add(n),oa(e))}function oa(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const r=new q(it.fromString(t)),n=e.Na.next();e.Fa.set(n,new Rp(r)),e.va=e.va.insert(r,n),pl(e.remoteStore,new ye(se(_i(r.path)),n,"TargetPurposeLimboResolution",Lo.oe))}}async function wl(e,t,r){const n=Q(e),i=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((a,c)=>{o.push(n.Ba(c,t,r).then(u=>{if((u||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const l=Qo.Qi(c.targetId,u);s.push(l)}}))}),await Promise.all(o),n.Sa.l_(i),await async function(c,u){const l=Q(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>b.forEach(u,f=>b.forEach(f.ki,d=>l.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>b.forEach(f.qi,d=>l.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!cn(h))throw h;M("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const d=l.ts.get(f),x=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(x);l.ts=l.ts.insert(f,p)}}}(n.localStore,s))}async function Op(e,t){const r=Q(e);if(!r.currentUser.isEqual(t)){M("SyncEngine","User change. New user:",t.toKey());const n=await dl(r.localStore,t);r.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new L(R.CANCELLED,o))})}),s.Oa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await wl(r,n._s)}}function Lp(e,t){const r=Q(e),n=r.Fa.get(t);if(n&&n.wa)return Z().add(n.key);{let i=Z();const s=r.Da.get(t);if(!s)return i;for(const o of s){const a=r.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Tl(e){const t=Q(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Al.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kp.bind(null,t),t.Sa.l_=wp.bind(null,t.eventManager),t.Sa.ka=Tp.bind(null,t.eventManager),t}class ou{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=wi(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return rp(this.persistence,new tp,t.initialUser,this.serializer)}createPersistence(t){return new Yx(Wo.jr,this.serializer)}createSharedClientState(t){return new ap}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mp{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>iu(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Op.bind(null,this.syncEngine),await Ep(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Cp}()}createDatastore(t){const r=wi(t.databaseInfo.databaseId),n=function(s){return new hp(s)}(t.databaseInfo);return function(s,o,a,c){return new xp(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,i,s,o,a){return new mp(n,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,r=>iu(this.syncEngine,r,0),function(){return Z0.D()?new Z0:new up}())}createSyncEngine(t,r){return function(i,s,o,a,c,u,l){const h=new Fp(i,s,o,a,c,u);return l&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t;await async function(n){const i=Q(n);M("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await xn(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):xe("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,s){const o=Q(i),a={documents:s.map(h=>Xn(o.serializer,h))},c=await o.Mo("BatchGetDocuments",o.serializer.databaseId,it.emptyPath(),a,s.length),u=new Map;c.forEach(h=>{const f=Ix(o.serializer,h);u.set(f.key.toString(),f)});const l=[];return s.forEach(h=>{const f=u.get(h.toString());lt(!!f),l.push(f)}),l}(this.datastore,t);return r.forEach(n=>this.recordVersion(n)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new jo(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,n)=>{const i=q.fromPath(n);this.mutations.push(new rl(i,this.precondition(i)))}),await async function(n,i){const s=Q(n),o={writes:i.map(a=>Fx(s.serializer,a))};await s.Do("Commit",s.serializer.databaseId,it.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw z();r=j.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!r.isEqual(n))throw new L(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(j.min())?Kt.exists(!1):Kt.updateTime(r):Kt.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(j.min()))throw new L(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kt.updateTime(r)}return Kt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t,r,n,i,s){this.asyncQueue=t,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=s,this.Za=n.maxAttempts,this.Jo=new Xo(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(async()=>{const t=new Up(this.datastore),r=this.tu(t);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.nu(i)}))}).catch(n=>{this.nu(n)})})}tu(t){try{const r=this.updateFunction(t);return!ln(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}nu(t){this.Za>0&&this.ru(t)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(t)}ru(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!gx(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,r,n,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=kc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{M("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=_l(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Ps(e,t){e.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async i=>{n.isEqual(i)||(await dl(t.localStore,i),n=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function au(e,t){e.asyncQueue.verifyOperationInProgress();const r=await jp(e);M("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>eu(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,i)=>eu(t.remoteStore,i)),e._onlineComponents=t}function Hp(e){return e.name==="FirebaseError"?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function jp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ps(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!Hp(r))throw r;tr("Error using user provided cache. Falling back to memory cache: "+r),await Ps(e,new ou)}}else M("FirestoreClient","Using default OfflineComponentProvider"),await Ps(e,new ou);return e._offlineComponents}async function Dl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),await au(e,e._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),await au(e,new Mp))),e._onlineComponents}function $p(e){return Dl(e).then(t=>t.datastore)}async function Yn(e){const t=await Dl(e),r=t.eventManager;return r.onListen=Bp.bind(null,t.syncEngine),r.onUnlisten=bp.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Sp.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Vp.bind(null,t.syncEngine),r}function Kp(e,t,r={}){const n=new le;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const l=new aa({next:f=>{o.enqueueAndForget(()=>na(s,h));const d=f.docs.has(a);!d&&f.fromCache?u.reject(new L(R.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&f.fromCache&&c&&c.source==="server"?u.reject(new L(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new sa(_i(a.path),l,{includeMetadataChanges:!0,ra:!0});return ra(s,h)}(await Yn(e),e.asyncQueue,t,r,n)),n.promise}function Gp(e,t,r={}){const n=new le;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const l=new aa({next:f=>{o.enqueueAndForget(()=>na(s,h)),f.fromCache&&c.source==="server"?u.reject(new L(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new sa(a,l,{includeMetadataChanges:!0,ra:!0});return ra(s,h)}(await Yn(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(e,t,r){if(!r)throw new L(R.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wp(e,t,r,n){if(t===!0&&n===!0)throw new L(R.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function cu(e){if(!q.isDocumentKey(e))throw new L(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lu(e){if(q.isDocumentKey(e))throw new L(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Di(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":z()}function fe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Di(e);throw new L(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){var r,n;if(t.host===void 0){if(t.ssl!==void 0)throw new L(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new L(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Wp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Il((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ii{constructor(t,r,n,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new L(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hu(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Cd;switch(n.type){case"firstParty":return new Id(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new L(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=uu.get(r);n&&(M("ComponentProvider","Removing Datastore"),uu.delete(r),n.terminate())}(this),Promise.resolve()}}function Qp(e,t,r,n={}){var i;const s=(e=fe(e,Ii))._getSettings(),o=`${t}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,c;if(typeof n.mockUserToken=="string")a=n.mockUserToken,c=Bt.MOCK_USER;else{a=Ph(n.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new L(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bt(u)}e._authCredentials=new wd(new Vc(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ue(this.firestore,t,this._query)}}class Nt{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ve(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nt(this.firestore,t,this._key)}}class ve extends Ue{constructor(t,r,n){super(t,r,_i(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nt(this.firestore,null,new q(t))}withConverter(t){return new ve(this.firestore,t,this._path)}}function fu(e,t,...r){if(e=Jt(e),Rl("collection","path",t),e instanceof Ii){const n=it.fromString(t,...r);return lu(n),new ve(e,null,n)}{if(!(e instanceof Nt||e instanceof ve))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(it.fromString(t,...r));return lu(n),new ve(e.firestore,null,n)}}function jt(e,t,...r){if(e=Jt(e),arguments.length===1&&(t=kc.newId()),Rl("doc","path",t),e instanceof Ii){const n=it.fromString(t,...r);return cu(n),new Nt(e,null,new q(n))}{if(!(e instanceof Nt||e instanceof ve))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(it.fromString(t,...r));return cu(n),new Nt(e.firestore,e instanceof ve?e.converter:null,new q(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Xo(this,"async_queue_retry"),this.hu=()=>{const r=Ss();r&&M("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Jo.Uo()};const t=Ss();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const r=Ss();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const r=new le;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(t){if(!cn(t))throw t;M("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(t){const r=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw xe("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.uu=!1,n))));return this.iu=r,r}enqueueAfterDelay(t,r,n){this.Pu(),this.lu.indexOf(t)>-1&&(r=0);const i=ea.createAndSchedule(this,t,r,n,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&z()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const r of this._u)if(r.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this._u)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const r=this._u.indexOf(t);this._u.splice(r,1)}}function du(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(e,["next","error","complete"])}class or extends Ii{constructor(t,r,n,i){super(t,r,n,i),this.type="firestore",this._queue=function(){return new Xp}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fl(this),this._firestoreClient.terminate()}}function Yp(e,t){const r=Fh(),n="(default)",i=Bh(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Sh("firestore");s&&Qp(i,...s)}return i}function Ri(e){return e._firestoreClient||Fl(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Fl(e){var t,r,n;const i=e._freezeSettings(),s=function(a,c,u,l){return new Ud(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Il(l.experimentalLongPollingOptions),l.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new zp(e._authCredentials,e._appCheckCredentials,e._queue,s),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ke(Vt.fromBase64String(t))}catch(r){throw new L(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new ke(Vt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new L(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new L(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new L(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=/^__.*__$/;class Zp{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Me(t,this.data,this.fieldMask,r,this.fieldTransforms):new fn(t,this.data,r,this.fieldTransforms)}}class Bl{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Me(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Sl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class ca{constructor(t,r,n,i,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new ca(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.gu({path:n,yu:!1});return i.wu(t),i}Su(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.gu({path:n,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Jn(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Sl(this.fu)&&Jp.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class tm{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||wi(t)}Fu(t,r,n,i=!1){return new ca({fu:t,methodName:r,vu:n,path:St.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pl(e){const t=e._freezeSettings(),r=wi(e._databaseId);return new tm(e._databaseId,!!t.ignoreUndefinedProperties,r)}function em(e,t,r,n,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,r,i);ha("Data must be an object, but it was:",o,n);const a=bl(n,o);let c,u;if(s.merge)c=new Gt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const h of s.mergeFields){const f=oo(t,h,r);if(!o.contains(f))throw new L(R.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kl(l,f)||l.push(f)}c=new Gt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Zp(new Lt(a),c,u)}class Si extends Bi{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Si}}class la extends Bi{_toFieldTransform(t){return new hx(t.path,new Yr)}isEqual(t){return t instanceof la}}function rm(e,t,r,n){const i=e.Fu(1,t,r);ha("Data must be an object, but it was:",i,n);const s=[],o=Lt.empty();hr(n,(c,u)=>{const l=fa(t,c,r);u=Jt(u);const h=i.Su(l);if(u instanceof Si)s.push(l);else{const f=mn(u,h);f!=null&&(s.push(l),o.set(l,f))}});const a=new Gt(s);return new Bl(o,a,i.fieldTransforms)}function nm(e,t,r,n,i,s){const o=e.Fu(1,t,r),a=[oo(t,n,r)],c=[i];if(s.length%2!=0)throw new L(R.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(oo(t,s[f])),c.push(s[f+1]);const u=[],l=Lt.empty();for(let f=a.length-1;f>=0;--f)if(!kl(u,a[f])){const d=a[f];let x=c[f];x=Jt(x);const p=o.Su(d);if(x instanceof Si)u.push(d);else{const m=mn(x,p);m!=null&&(u.push(d),l.set(d,m))}}const h=new Gt(u);return new Bl(l,h,o.fieldTransforms)}function im(e,t,r,n=!1){return mn(r,e.Fu(n?4:3,t))}function mn(e,t){if(Vl(e=Jt(e)))return ha("Unsupported field value:",t,e),bl(e,t);if(e instanceof Bi)return function(n,i){if(!Sl(i.fu))throw i.Du(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,i){const s=[];let o=0;for(const a of n){let c=mn(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,i){if((n=Jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ax(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Et.fromDate(n);return{timestampValue:Qn(i.serializer,s)}}if(n instanceof Et){const s=new Et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Qn(i.serializer,s)}}if(n instanceof ua)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ke)return{bytesValue:ol(i.serializer,n._byteString)};if(n instanceof Nt){const s=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ko(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.Du(`Unsupported field value: ${Di(n)}`)}(e,t)}function bl(e,t){const r={};return Nc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hr(e,(n,i)=>{const s=mn(i,t.pu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Vl(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Et||e instanceof ua||e instanceof ke||e instanceof Nt||e instanceof Bi)}function ha(e,t,r){if(!Vl(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=Di(r);throw n==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+n)}}function oo(e,t,r){if((t=Jt(t))instanceof Fi)return t._internalPath;if(typeof t=="string")return fa(e,t);throw Jn("Field path arguments must be of type string or ",e,!1,void 0,r)}const sm=new RegExp("[~\\*/\\[\\]]");function fa(e,t,r){if(t.search(sm)>=0)throw Jn(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Fi(...t.split("."))._internalPath}catch{throw Jn(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function Jn(e,t,r,n,i){const s=n&&!n.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new L(R.INVALID_ARGUMENT,a+e+c)}function kl(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,r,n,i,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new om(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(da("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class om extends Zn{data(){return super.data()}}function da(e,t){return typeof t=="string"?fa(e,t):t instanceof Fi?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new L(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xa{}class am extends xa{}function xu(e,t,...r){let n=[];t instanceof xa&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof pa).length,a=s.filter(c=>c instanceof Pi).length;if(o>1||o>0&&a>0)throw new L(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Pi extends am{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new Pi(t,r,n)}_apply(t){const r=this._parse(t);return Ol(t._query,r),new Ue(t.firestore,t.converter,Zs(t._query,r))}_parse(t){const r=Pl(t.firestore);return function(s,o,a,c,u,l,h){let f;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new L(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){mu(h,l);const d=[];for(const x of h)d.push(pu(c,s,x));f={arrayValue:{values:d}}}else f=pu(c,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||mu(h,l),f=im(a,o,h,l==="in"||l==="not-in");return pt.create(u,l,f)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function um(e,t,r){const n=t,i=da("where",e);return Pi._create(i,n,r)}class pa extends xa{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new pa(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:te.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)Ol(o,c),o=Zs(o,c)}(t._query,r),new Ue(t.firestore,t.converter,Zs(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pu(e,t,r){if(typeof(r=Jt(r))=="string"){if(r==="")throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jc(t)&&r.indexOf("/")!==-1)throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(it.fromString(r));if(!q.isDocumentKey(n))throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return b0(e,new q(n))}if(r instanceof Nt)return b0(e,r._key);throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Di(r)}.`)}function mu(e,t){if(!Array.isArray(e)||e.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ol(e,t){const r=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Ll{convertValue(t,r="none"){switch(Ve(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(be(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 10:return this.convertObject(t.mapValue,r);default:throw z()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return hr(t,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertGeoPoint(t){return new ua(xt(t.latitude),xt(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=Uo(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Wr(t));default:return null}}convertTimestamp(t){const r=Ae(t);return new Et(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=it.fromString(t);lt(fl(n));const i=new Qr(n.get(1),n.get(3)),s=new q(n.popFirst(5));return i.isEqual(r)||xe(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class lm extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new ke(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Nt(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ma extends Zn{constructor(t,r,n,i,s,o){super(t,r,n,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Nn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(da("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Nn extends ma{data(t={}){return super.data(t)}}class Ml{constructor(t,r,n,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new Qe(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new Nn(this._firestore,this._userDataWriter,n.key,n,new Qe(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new L(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Nn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qe(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Nn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qe(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:hm(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function hm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(e){e=fe(e,Nt);const t=fe(e.firestore,or);return Kp(Ri(t),e._key).then(r=>Ul(t,e,r))}class bi extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new ke(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Nt(this.firestore,null,r)}}function dm(e){e=fe(e,Ue);const t=fe(e.firestore,or),r=Ri(t),n=new bi(t);return Nl(e._query),Gp(r,e._query).then(i=>new Ml(t,n,e,i))}function gu(e,...t){var r,n,i;e=Jt(e);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||du(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(du(t[o])){const h=t[o];t[o]=(r=h.next)===null||r===void 0?void 0:r.bind(h),t[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),t[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,l;if(e instanceof Nt)u=fe(e.firestore,or),l=_i(e._key.path),c={next:h=>{t[o]&&t[o](Ul(u,e,h))},error:t[o+1],complete:t[o+2]};else{const h=fe(e,Ue);u=fe(h.firestore,or),l=h._query;const f=new bi(u);c={next:d=>{t[o]&&t[o](new Ml(u,f,h,d))},error:t[o+1],complete:t[o+2]},Nl(e._query)}return function(f,d,x,p){const m=new aa(p),v=new sa(d,m,x);return f.asyncQueue.enqueueAndForget(async()=>ra(await Yn(f),v)),()=>{m.$a(),f.asyncQueue.enqueueAndForget(async()=>na(await Yn(f),v))}}(Ri(u),l,a,c)}function Ul(e,t,r){const n=r.docs.get(t._key),i=new bi(e);return new ma(e,i,t._key,n,new Qe(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm={maxAttempts:5};function Tr(e,t){if((e=Jt(e)).firestore!==t)throw new L(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Pl(r)}get(r){const n=Tr(r,this._firestore),i=new lm(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return z();const o=s[0];if(o.isFoundDocument())return new Zn(this._firestore,i,o.key,o,n.converter);if(o.isNoDocument())return new Zn(this._firestore,i,n._key,null,n.converter);throw z()})}set(r,n,i){const s=Tr(r,this._firestore),o=cm(s.converter,n,i),a=em(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(r,n,i,...s){const o=Tr(r,this._firestore);let a;return a=typeof(n=Jt(n))=="string"||n instanceof Fi?nm(this._dataReader,"Transaction.update",o._key,n,i,s):rm(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,a),this}delete(r){const n=Tr(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=Tr(t,this._firestore),n=new bi(this._firestore);return super.get(t).then(i=>new ma(this._firestore,n,r._key,i._document,new Qe(!1,!1),r.converter))}}function Dr(e,t,r){e=fe(e,or);const n=Object.assign(Object.assign({},xm),r);return function(s){if(s.maxAttempts<1)throw new L(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,a){const c=new le;return s.asyncQueue.enqueueAndForget(async()=>{const u=await $p(s);new qp(s.asyncQueue,u,a,o,c).Xa()}),c.promise}(Ri(e),i=>t(new pm(e,i)),n)}function mm(){return new la("serverTimestamp")}(function(t,r=!0){(function(i){lr=i})(bh),Dh(new Ih("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),a=new or(new Td(n.getProvider("auth-internal")),new Fd(n.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ba(F0,"4.6.1",t),ba(F0,"4.6.1","esm2017")})();function ql(e,t){return function(){return e.apply(t,arguments)}}const{toString:gm}=Object.prototype,{getPrototypeOf:ga}=Object,Vi=(e=>t=>{const r=gm.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ae=e=>(e=e.toLowerCase(),t=>Vi(t)===e),ki=e=>t=>typeof t===e,{isArray:xr}=Array,tn=ki("undefined");function _m(e){return e!==null&&!tn(e)&&e.constructor!==null&&!tn(e.constructor)&&Wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const zl=ae("ArrayBuffer");function ym(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zl(e.buffer),t}const vm=ki("string"),Wt=ki("function"),Hl=ki("number"),Ni=e=>e!==null&&typeof e=="object",Em=e=>e===!0||e===!1,On=e=>{if(Vi(e)!=="object")return!1;const t=ga(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Am=ae("Date"),Cm=ae("File"),wm=ae("Blob"),Tm=ae("FileList"),Dm=e=>Ni(e)&&Wt(e.pipe),Im=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wt(e.append)&&((t=Vi(e))==="formdata"||t==="object"&&Wt(e.toString)&&e.toString()==="[object FormData]"))},Rm=ae("URLSearchParams"),Fm=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gn(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),xr(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(n=0;n<o;n++)a=s[n],t.call(null,e[a],a,e)}}function jl(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const $l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kl=e=>!tn(e)&&e!==$l;function ao(){const{caseless:e}=Kl(this)&&this||{},t={},r=(n,i)=>{const s=e&&jl(t,i)||i;On(t[s])&&On(n)?t[s]=ao(t[s],n):On(n)?t[s]=ao({},n):xr(n)?t[s]=n.slice():t[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&gn(arguments[n],r);return t}const Bm=(e,t,r,{allOwnKeys:n}={})=>(gn(t,(i,s)=>{r&&Wt(i)?e[s]=ql(i,r):e[s]=i},{allOwnKeys:n}),e),Sm=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Pm=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},bm=(e,t,r,n)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&ga(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Vm=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},km=e=>{if(!e)return null;if(xr(e))return e;let t=e.length;if(!Hl(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Nm=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ga(Uint8Array)),Om=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},Lm=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Mm=ae("HTMLFormElement"),Um=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),_u=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),qm=ae("RegExp"),Gl=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};gn(r,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(n[s]=o||i)}),Object.defineProperties(e,n)},zm=e=>{Gl(e,(t,r)=>{if(Wt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Wt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Hm=(e,t)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return xr(e)?n(e):n(String(e).split(t)),r},jm=()=>{},$m=(e,t)=>(e=+e,Number.isFinite(e)?e:t),bs="abcdefghijklmnopqrstuvwxyz",yu="0123456789",Wl={DIGIT:yu,ALPHA:bs,ALPHA_DIGIT:bs+bs.toUpperCase()+yu},Km=(e=16,t=Wl.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Gm(e){return!!(e&&Wt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Wm=e=>{const t=new Array(10),r=(n,i)=>{if(Ni(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const s=xr(n)?[]:{};return gn(n,(o,a)=>{const c=r(o,i+1);!tn(c)&&(s[a]=c)}),t[i]=void 0,s}}return n};return r(e,0)},Qm=ae("AsyncFunction"),Xm=e=>e&&(Ni(e)||Wt(e))&&Wt(e.then)&&Wt(e.catch),I={isArray:xr,isArrayBuffer:zl,isBuffer:_m,isFormData:Im,isArrayBufferView:ym,isString:vm,isNumber:Hl,isBoolean:Em,isObject:Ni,isPlainObject:On,isUndefined:tn,isDate:Am,isFile:Cm,isBlob:wm,isRegExp:qm,isFunction:Wt,isStream:Dm,isURLSearchParams:Rm,isTypedArray:Nm,isFileList:Tm,forEach:gn,merge:ao,extend:Bm,trim:Fm,stripBOM:Sm,inherits:Pm,toFlatObject:bm,kindOf:Vi,kindOfTest:ae,endsWith:Vm,toArray:km,forEachEntry:Om,matchAll:Lm,isHTMLForm:Mm,hasOwnProperty:_u,hasOwnProp:_u,reduceDescriptors:Gl,freezeMethods:zm,toObjectSet:Hm,toCamelCase:Um,noop:jm,toFiniteNumber:$m,findKey:jl,global:$l,isContextDefined:Kl,ALPHABET:Wl,generateString:Km,isSpecCompliantForm:Gm,toJSONObject:Wm,isAsyncFn:Qm,isThenable:Xm};function J(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}I.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ql=J.prototype,Xl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xl[e]={value:e}});Object.defineProperties(J,Xl);Object.defineProperty(Ql,"isAxiosError",{value:!0});J.from=(e,t,r,n,i,s)=>{const o=Object.create(Ql);return I.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),J.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Ym=null;function uo(e){return I.isPlainObject(e)||I.isArray(e)}function Yl(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function vu(e,t,r){return e?e.concat(t).map(function(i,s){return i=Yl(i),!r&&s?"["+i+"]":i}).join(r?".":""):t}function Jm(e){return I.isArray(e)&&!e.some(uo)}const Zm=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function Oi(e,t,r){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=I.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!I.isUndefined(m[p])});const n=r.metaTokens,i=r.visitor||l,s=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(I.isDate(x))return x.toISOString();if(!c&&I.isBlob(x))throw new J("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(x)||I.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function l(x,p,m){let v=x;if(x&&!m&&typeof x=="object"){if(I.endsWith(p,"{}"))p=n?p:p.slice(0,-2),x=JSON.stringify(x);else if(I.isArray(x)&&Jm(x)||(I.isFileList(x)||I.endsWith(p,"[]"))&&(v=I.toArray(x)))return p=Yl(p),v.forEach(function(_,y){!(I.isUndefined(_)||_===null)&&t.append(o===!0?vu([p],y,s):o===null?p:p+"[]",u(_))}),!1}return uo(x)?!0:(t.append(vu(m,p,s),u(x)),!1)}const h=[],f=Object.assign(Zm,{defaultVisitor:l,convertValue:u,isVisitable:uo});function d(x,p){if(!I.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(x),I.forEach(x,function(v,g){(!(I.isUndefined(v)||v===null)&&i.call(t,v,I.isString(g)?g.trim():g,p,f))===!0&&d(v,p?p.concat(g):[g])}),h.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return d(e),t}function Eu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _a(e,t){this._pairs=[],e&&Oi(e,this,t)}const Jl=_a.prototype;Jl.append=function(t,r){this._pairs.push([t,r])};Jl.toString=function(t){const r=t?function(n){return t.call(this,n,Eu)}:Eu;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function t1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zl(e,t,r){if(!t)return e;const n=r&&r.encode||t1,i=r&&r.serialize;let s;if(i?s=i(t,r):s=I.isURLSearchParams(t)?t.toString():new _a(t,r).toString(n),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Au{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(n){n!==null&&t(n)})}}const th={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},e1=typeof URLSearchParams<"u"?URLSearchParams:_a,r1=typeof FormData<"u"?FormData:null,n1=typeof Blob<"u"?Blob:null,i1={isBrowser:!0,classes:{URLSearchParams:e1,FormData:r1,Blob:n1},protocols:["http","https","file","blob","url","data"]},eh=typeof window<"u"&&typeof document<"u",s1=(e=>eh&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),o1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:eh,hasStandardBrowserEnv:s1,hasStandardBrowserWebWorkerEnv:o1},Symbol.toStringTag,{value:"Module"})),ie={...a1,...i1};function u1(e,t){return Oi(e,new ie.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return ie.isNode&&I.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function c1(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function l1(e){const t={},r=Object.keys(e);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}function rh(e){function t(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=r.length;return o=!o&&I.isArray(i)?i.length:o,c?(I.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!I.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],s)&&I.isArray(i[o])&&(i[o]=l1(i[o])),!a)}if(I.isFormData(e)&&I.isFunction(e.entries)){const r={};return I.forEachEntry(e,(n,i)=>{t(c1(n),i,r,0)}),r}return null}function h1(e,t,r){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const _n={transitional:th,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=I.isObject(t);if(s&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(rh(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return u1(t,this.formSerializer).toString();if((a=I.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Oi(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),h1(t)):t}],transformResponse:[function(t){const r=this.transitional||_n.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&I.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?J.from(a,J.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ie.classes.FormData,Blob:ie.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{_n.headers[e]={}});const f1=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d1=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&f1[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Cu=Symbol("internals");function Ir(e){return e&&String(e).trim().toLowerCase()}function Ln(e){return e===!1||e==null?e:I.isArray(e)?e.map(Ln):String(e)}function x1(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const p1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vs(e,t,r,n,i){if(I.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!I.isString(t)){if(I.isString(n))return t.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(t)}}function m1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function g1(e,t){const r=I.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,s,o){return this[n].call(this,t,i,s,o)},configurable:!0})})}class Qt{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function s(a,c,u){const l=Ir(c);if(!l)throw new Error("header name must be a non-empty string");const h=I.findKey(i,l);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=Ln(a))}const o=(a,c)=>I.forEach(a,(u,l)=>s(u,l,c));return I.isPlainObject(t)||t instanceof this.constructor?o(t,r):I.isString(t)&&(t=t.trim())&&!p1(t)?o(d1(t),r):t!=null&&s(r,t,n),this}get(t,r){if(t=Ir(t),t){const n=I.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return x1(i);if(I.isFunction(r))return r.call(this,i,n);if(I.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ir(t),t){const n=I.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Vs(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function s(o){if(o=Ir(o),o){const a=I.findKey(n,o);a&&(!r||Vs(n,n[a],a,r))&&(delete n[a],i=!0)}}return I.isArray(t)?t.forEach(s):s(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!t||Vs(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const r=this,n={};return I.forEach(this,(i,s)=>{const o=I.findKey(n,s);if(o){r[o]=Ln(i),delete r[s];return}const a=t?m1(s):String(s).trim();a!==s&&delete r[s],r[a]=Ln(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return I.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&I.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Cu]=this[Cu]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ir(o);n[a]||(g1(i,o),n[a]=!0)}return I.isArray(t)?t.forEach(s):s(t),this}}Qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Qt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});I.freezeMethods(Qt);function ks(e,t){const r=this||_n,n=t||r,i=Qt.from(n.headers);let s=n.data;return I.forEach(e,function(a){s=a.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function nh(e){return!!(e&&e.__CANCEL__)}function yn(e,t,r){J.call(this,e??"canceled",J.ERR_CANCELED,t,r),this.name="CanceledError"}I.inherits(yn,J,{__CANCEL__:!0});function _1(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const y1=ie.hasStandardBrowserEnv?{write(e,t,r,n,i,s){const o=[e+"="+encodeURIComponent(t)];I.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),I.isString(n)&&o.push("path="+n),I.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function v1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function E1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ih(e,t){return e&&!v1(t)?E1(e,t):t}const A1=ie.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const a=I.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function C1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function w1(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=n[s];o||(o=u),r[i]=c,n[i]=u;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),u-o<t)return;const d=l&&u-l;return d?Math.round(f*1e3/d):void 0}}function wu(e,t){let r=0;const n=w1(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-r,c=n(a),u=s<=o;r=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&u?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const T1=typeof XMLHttpRequest<"u",D1=T1&&function(e){return new Promise(function(r,n){let i=e.data;const s=Qt.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,c;function u(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let l;if(I.isFormData(i)){if(ie.hasStandardBrowserEnv||ie.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((l=s.getContentType())!==!1){const[p,...m]=l?l.split(";").map(v=>v.trim()).filter(Boolean):[];s.setContentType([p||"multipart/form-data",...m].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+m))}const f=ih(e.baseURL,e.url);h.open(e.method.toUpperCase(),Zl(f,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function d(){if(!h)return;const p=Qt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:p,config:e,request:h};_1(function(_){r(_),u()},function(_){n(_),u()},v),h=null}if("onloadend"in h?h.onloadend=d:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(d)},h.onabort=function(){h&&(n(new J("Request aborted",J.ECONNABORTED,e,h)),h=null)},h.onerror=function(){n(new J("Network Error",J.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||th;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),n(new J(m,v.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,h)),h=null},ie.hasStandardBrowserEnv&&(a&&I.isFunction(a)&&(a=a(e)),a||a!==!1&&A1(f))){const p=e.xsrfHeaderName&&e.xsrfCookieName&&y1.read(e.xsrfCookieName);p&&s.set(e.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in h&&I.forEach(s.toJSON(),function(m,v){h.setRequestHeader(v,m)}),I.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",wu(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",wu(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=p=>{h&&(n(!p||p.type?new yn(null,e,h):p),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const x=C1(f);if(x&&ie.protocols.indexOf(x)===-1){n(new J("Unsupported protocol "+x+":",J.ERR_BAD_REQUEST,e));return}h.send(i||null)})},co={http:Ym,xhr:D1};I.forEach(co,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Tu=e=>`- ${e}`,I1=e=>I.isFunction(e)||e===null||e===!1,sh={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let s=0;s<t;s++){r=e[s];let o;if(n=r,!I1(r)&&(n=co[(o=String(r)).toLowerCase()],n===void 0))throw new J(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Tu).join(`
`):" "+Tu(s[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:co};function Ns(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yn(null,e)}function Du(e){return Ns(e),e.headers=Qt.from(e.headers),e.data=ks.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sh.getAdapter(e.adapter||_n.adapter)(e).then(function(n){return Ns(e),n.data=ks.call(e,e.transformResponse,n),n.headers=Qt.from(n.headers),n},function(n){return nh(n)||(Ns(e),n&&n.response&&(n.response.data=ks.call(e,e.transformResponse,n.response),n.response.headers=Qt.from(n.response.headers))),Promise.reject(n)})}const Iu=e=>e instanceof Qt?{...e}:e;function ar(e,t){t=t||{};const r={};function n(u,l,h){return I.isPlainObject(u)&&I.isPlainObject(l)?I.merge.call({caseless:h},u,l):I.isPlainObject(l)?I.merge({},l):I.isArray(l)?l.slice():l}function i(u,l,h){if(I.isUndefined(l)){if(!I.isUndefined(u))return n(void 0,u,h)}else return n(u,l,h)}function s(u,l){if(!I.isUndefined(l))return n(void 0,l)}function o(u,l){if(I.isUndefined(l)){if(!I.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,h){if(h in t)return n(u,l);if(h in e)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l)=>i(Iu(u),Iu(l),!0)};return I.forEach(Object.keys(Object.assign({},e,t)),function(l){const h=c[l]||i,f=h(e[l],t[l],l);I.isUndefined(f)&&h!==a||(r[l]=f)}),r}const oh="1.6.8",ya={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ya[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ru={};ya.transitional=function(t,r,n){function i(s,o){return"[Axios v"+oh+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(t===!1)throw new J(i(o," has been removed"+(r?" in "+r:"")),J.ERR_DEPRECATED);return r&&!Ru[o]&&(Ru[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function R1(e,t,r){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],o=t[s];if(o){const a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new J("option "+s+" must be "+c,J.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new J("Unknown option "+s,J.ERR_BAD_OPTION)}}const lo={assertOptions:R1,validators:ya},ge=lo.validators;class Se{constructor(t){this.defaults=t,this.interceptors={request:new Au,response:new Au}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ar(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&lo.assertOptions(n,{silentJSONParsing:ge.transitional(ge.boolean),forcedJSONParsing:ge.transitional(ge.boolean),clarifyTimeoutError:ge.transitional(ge.boolean)},!1),i!=null&&(I.isFunction(i)?r.paramsSerializer={serialize:i}:lo.assertOptions(i,{encode:ge.function,serialize:ge.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&I.merge(s.common,s[r.method]);s&&I.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),r.headers=Qt.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let l,h=0,f;if(!c){const x=[Du.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,u),f=x.length,l=Promise.resolve(r);h<f;)l=l.then(x[h++],x[h++]);return l}f=a.length;let d=r;for(h=0;h<f;){const x=a[h++],p=a[h++];try{d=x(d)}catch(m){p.call(this,m);break}}try{l=Du.call(this,d)}catch(x){return Promise.reject(x)}for(h=0,f=u.length;h<f;)l=l.then(u[h++],u[h++]);return l}getUri(t){t=ar(this.defaults,t);const r=ih(t.baseURL,t.url);return Zl(r,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){Se.prototype[t]=function(r,n){return this.request(ar(n||{},{method:t,url:r,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(t){function r(n){return function(s,o,a){return this.request(ar(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Se.prototype[t]=r(),Se.prototype[t+"Form"]=r(!0)});class va{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},t(function(s,o,a){n.reason||(n.reason=new yn(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new va(function(i){t=i}),cancel:t}}}function F1(e){return function(r){return e.apply(null,r)}}function B1(e){return I.isObject(e)&&e.isAxiosError===!0}const ho={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ho).forEach(([e,t])=>{ho[t]=e});function ah(e){const t=new Se(e),r=ql(Se.prototype.request,t);return I.extend(r,Se.prototype,t,{allOwnKeys:!0}),I.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return ah(ar(e,i))},r}const mt=ah(_n);mt.Axios=Se;mt.CanceledError=yn;mt.CancelToken=va;mt.isCancel=nh;mt.VERSION=oh;mt.toFormData=Oi;mt.AxiosError=J;mt.Cancel=mt.CanceledError;mt.all=function(t){return Promise.all(t)};mt.spread=F1;mt.isAxiosError=B1;mt.mergeConfig=ar;mt.AxiosHeaders=Qt;mt.formToJSON=e=>rh(I.isHTMLForm(e)?new FormData(e):e);mt.getAdapter=sh.getAdapter;mt.HttpStatusCode=ho;mt.default=mt;class S1{constructor(){Ht(this,"url");this.url="https://api.ipify.org?format=json"}async get(){try{return await mt.create({baseURL:this.url}).get("/").then(n=>n.data)}catch(t){throw console.log(t),t}}}const _t=Nh(),P1=new S1,Rr=new xf,gt=Yp(),bn=P1.get(),ue={"permission-denied":"權限不足","no-such-document":"查無資料"};class U1{constructor(t){Ht(this,"child");this.child=t}async get(t){_t.debounce=!0;try{const r=await fm(jt(gt,this.child,t));if(r.exists())return _t.debounce=!1,this.setData(r.data());throw"no-such-document"}catch(r){if(_t.debounce=!1,r==="no-such-document")throw ue[`${r}`]+`(${this.child}/${t})`;const n=r.code;throw ue[`${n}`]+`(${this.child}/${t})`}}async array(t=""){_t.debounce=!0;try{const r=await dm(xu(fu(gt,`${this.child}/${t}`),um("state","!=","delete"))),n=[];return r.forEach(i=>{if(i.data())n.push(i.data());else throw"no-such-document"}),_t.debounce=!1,n}catch(r){if(_t.debounce=!1,r==="no-such-document")throw ue[`${r}`]+`(${this.child}/${t})`;const n=r.code;throw ue[`${n}`]+`(${this.child}/${t})`}}async set(t,r){_t.debounce=!0;const n=await Cn(()=>import("./useFireStorage-H2zJQsii.js").then(a=>a.u),__vite__mapDeps([0,1,2,3])),i=new n.default,{user:s}=i.getUser(),o=new Date;try{const a=Rr.generateRandomString(10);return await Dr(gt,async c=>{c.set(jt(gt,this.child,t),r),c.set(jt(gt,"syslog",a),{...new wn(this.child,t,"set",o.getTime(),s.value.uid,s.value.email,await bn,"enable",a)})}),_t.debounce=!1,`${this.child}/${t} Set`}catch(a){const c=a.code;throw console.log(c),_t.debounce=!1,ue[`${c}`]+`(${this.child}/${t})`}}async add(t){_t.debounce=!0;const r=await Cn(()=>import("./useFireStorage-H2zJQsii.js").then(o=>o.u),__vite__mapDeps([0,1,2,3])),n=new r.default,{user:i}=n.getUser(),s=new Date;try{const o=Rr.generateRandomString(10),a=Rr.generateRandomString(10);return await Dr(gt,async c=>{c.set(jt(gt,this.child,a),t),c.set(jt(gt,"syslog",o),{...new wn(this.child,a,"add",s.getTime(),i.value.uid,i.value.email,await bn,"enable",o)})}),_t.debounce=!1,`${this.child}/${a} Add`}catch(o){const a=o.code;throw console.log(a),_t.debounce=!1,ue[`${a}`]+`(${this.child})`}}async update(t,r){_t.debounce=!0;const n=await Cn(()=>import("./useFireStorage-H2zJQsii.js").then(a=>a.u),__vite__mapDeps([0,1,2,3])),i=new n.default,{user:s}=i.getUser(),o=new Date;try{const a=Rr.generateRandomString(10);return await Dr(gt,async c=>{c.update(jt(gt,this.child,t),{...r,timestamp:mm()}),c.set(jt(gt,"syslog",a),{...new wn(this.child,t,"update",o.getTime(),s.value.uid,s.value.email,await bn,"enable",a)})}),_t.debounce=!1,`${this.child}/${t} Update`}catch(a){const c=a.code;throw console.log(c),_t.debounce=!1,ue[`${c}`]+`(${this.child}/${t})`}}async delete(t){_t.debounce=!0;const r=await Cn(()=>import("./useFireStorage-H2zJQsii.js").then(o=>o.u),__vite__mapDeps([0,1,2,3])),n=new r.default,{user:i}=n.getUser(),s=new Date;try{const o=Rr.generateRandomString(10);return await Dr(gt,async a=>{a.delete(jt(gt,this.child,t)),a.set(jt(gt,"syslog",o),{...new wn(this.child,t,"delete",s.getTime(),i.value.uid,i.value.email,await bn,"enable",o)})}),_t.debounce=!1,`${this.child}/${t} Delete`}catch(o){const a=o.code;throw console.log(a),_t.debounce=!1,ue[`${a}`]+`(${this.child}/${t})`}}async transaction(t,r){try{await Dr(gt,async n=>{const i=await n.get(jt(gt,this.child,t));if(!i.exists())throw"Document does not exist!";const s=i.data().d+1;n.update(jt(gt,this.child,t),{...r,d:s})}),console.log("Transaction successfully committed!")}catch(n){const i=n.code;throw console.log(i),ue[`${i}`]+`(${this.child}/${t})`}}onSnapshot(t,r){console.log(`onSnapshot: ${this.child}/${t} start`),gu(jt(gt,this.child,t),n=>{console.log(`${this.child}/${t} update, Current data:${n.data()}`),r(n.data())})}arrayOnSnapshot(t,r=""){console.log(`onSnapshot: ${this.child}/${r} start`),gu(xu(fu(gt,`${this.child}/${r}`)),n=>{const i=[];n.forEach(s=>{s.data()&&i.push(s.data())}),console.log(`${this.child}/${r} update, Current data:${i}`),t(i)})}setData(t){return{...t,stateValue:t.state==="enable"?"啟用":t.state==="disabled"?"停用":"異常"}}}export{k1 as C,U1 as D,S1 as I,xf as R,wn as S};

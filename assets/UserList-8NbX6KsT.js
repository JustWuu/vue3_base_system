import{d as V,r as i,b as B,o as S,c as T,a,e as t,f as n,u as $,q as d,k as z,x as b,A as F}from"./index-C2YWHtWb.js";import{U as A}from"./UniversalTable-DDyp3IKG.js";import"./database-BKbkAfuS.js";import E from"./user-DaildQOo.js";import"./useAuth-CUFXkQq0.js";import{s as I,e as j}from"./useToast-Deq2fcpw.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */const q={class:"grid"},L={class:"col-12 px-2"},M={class:"card"},R={class:"my-2"},Y={class:"flex align-items-center justify-content-center"},G=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ee=V({__name:"UserList",setup(H){const c=z(),p=new E,m=i(),h=i([{field:"email",header:"帳號",sortable:!1,style:"min-width:10rem;"},{field:"displayName",header:"名稱",sortable:!1,style:"min-width:10rem;"},{field:"role.displayName",header:"權限身分",sortable:!0,style:"min-width:10rem;"},{field:"uid",header:"UID",sortable:!0,style:"min-width:10rem;"},{type:"boolean",field:"emailVerified",header:"信箱驗證",sortable:!0,style:"min-width:8rem;"},{type:"tag",tag:[{value:"enable",severity:"success",text:"啟用"},{value:"xxx",severity:"warning",text:"異常"},{value:"disabled",severity:"danger",text:"停用"}],field:"state",header:"狀態",sortable:!0,style:"min-width:6rem;"},{type:"date",field:"operateAt",header:"上次操作時間",sortable:!0,style:"min-width:10rem;"}]),y=i([{type:"Dropdown",options:[{value:"true",text:"已驗證"},{value:"false",text:"未驗證"}],placeholder:"信箱驗證",class:"md:mr-1 md:w-3",field:"emailVerified"},{type:"Dropdown",options:[{value:"enable",text:"啟用"},{value:"disabled",text:"停用"}],placeholder:"狀態",class:"md:mr-1 md:w-3",field:"state"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]),f=i([]),u=i(),r=i(!1);B(()=>{v()});const v=()=>{p.array().then(e=>{f.value=e})},_=()=>{c.push("/system/user/add")},x=e=>{c.push(`/system/user/edit/${e.uid}`)},w=e=>{u.value=e,r.value=!0},C=async()=>{await p.update(u.value.uid,{state:"delete"}).then(e=>{I(e),c.push("/system/user/list")}).catch(e=>{j(e)}),v(),r.value=!1},g=()=>{m.value.exportCSV()};return(e,l)=>{const o=d("Button"),k=d("Toolbar"),U=d("Column"),D=d("Dialog");return S(),T("div",q,[a("div",L,[a("div",M,[t(k,{class:"mb-4"},{start:n(()=>[a("div",R,[t(o,{label:"新增",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:_})])]),end:n(()=>[t(o,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:l[0]||(l[0]=s=>g())})]),_:1}),t($(A),{ref_key:"dt",ref:m,data:f.value,columns:h.value,header:"帳號管理",filter:y.value},{footer:n(()=>[t(U,{headerStyle:"min-width:10rem;",header:"操作",alignFrozen:"right",frozen:""},{body:n(s=>[t(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:N=>x(s.data)},null,8,["onClick"]),t(o,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:N=>w(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["data","columns","filter"]),t(D,{visible:r.value,"onUpdate:visible":l[2]||(l[2]=s=>r.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(o,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:l[1]||(l[1]=s=>r.value=!1)}),t(o,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:C})]),default:n(()=>{var s;return[a("div",Y,[G,a("span",null,[b("你確定要刪除 "),a("b",null,F((s=u.value)==null?void 0:s.displayName),1),b(" 嗎?")])])]}),_:1},8,["visible"])])])])}}});export{ee as default};

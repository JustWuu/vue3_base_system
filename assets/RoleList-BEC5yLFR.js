import{d as T,r as l,b as $,o as S,c as U,a as o,e as t,f as i,u as V,q as c,k as E,L as F,E as m,x as b,A as L}from"./index-CYLifkRk.js";import{U as j}from"./UniversalTable-CCueH_O9.js";import"./database-BFU37Xrg.js";import q from"./role-h_K0QeZ_.js";import"./useAuth-C5SUOMAl.js";import{s as z,e as A}from"./useToast-Cq1b9B8o.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */import"./user-CYFzg2Fn.js";const I={class:"grid"},M={class:"col-12 px-2"},Y={class:"card"},G={class:"my-2"},H={class:"flex align-items-center justify-content-center"},J=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),oe=T({__name:"RoleList",setup(K){const d=E(),v=new q,h=l(),y=l([{field:"displayName",header:"名稱",sortable:!0,style:"width:75%; min-width:10rem;"},{type:"tag",tag:[{value:"enable",severity:"success",text:"啟用"},{value:"disabled",severity:"danger",text:"停用"}],field:"state",header:"狀態",sortable:!0,style:"width:25%; min-width:10rem;"}]),x=l([{type:"Dropdown",options:[{value:"enable",text:"啟用"},{value:"disabled",text:"停用"}],placeholder:"狀態",class:"md:mr-1 md:w-3",field:"state"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]),_=l([]),u=l(),a=l(!1);$(()=>{f()});const f=()=>{v.array().then(e=>{_.value=e})},w=()=>{d.push("/system/role/add")},C=e=>{d.push(`/system/role/edit/${e.id}`)},g=e=>{u.value=e,a.value=!0},k=async()=>{await v.update(u.value.id,{state:"delete"}).then(e=>{z(e),d.push("/system/user/list")}).catch(e=>{A(e)}),f(),a.value=!1};return(e,r)=>{const n=c("Button"),D=c("Toolbar"),N=c("Column"),R=c("Dialog"),p=F("role");return S(),U("div",I,[o("div",M,[o("div",Y,[t(D,{class:"mb-4"},{start:i(()=>[o("div",G,[m(t(n,{label:"新增",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:w},null,512),[[p,["role:c"]]])])]),_:1}),t(V(j),{ref_key:"dt",ref:h,data:_.value,columns:y.value,header:"權限管理",filter:x.value},{footer:i(()=>[t(N,{headerStyle:"min-width:10rem;"},{body:i(s=>[m(t(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:B=>C(s.data)},null,8,["onClick"]),[[p,["role:u"]]]),m(t(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:B=>g(s.data)},null,8,["onClick"]),[[p,["role:d"]]])]),_:1})]),_:1},8,["data","columns","filter"]),t(R,{visible:a.value,"onUpdate:visible":r[1]||(r[1]=s=>a.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[t(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:r[0]||(r[0]=s=>a.value=!1)}),t(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:k})]),default:i(()=>{var s;return[o("div",H,[J,o("span",null,[b("你確定要刪除 "),o("b",null,L((s=u.value)==null?void 0:s.displayName),1),b(" 嗎?")])])]}),_:1},8,["visible"])])])])}}});export{oe as default};

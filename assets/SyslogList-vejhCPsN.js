import{d as g,r as s,b as C,o as S,c as k,a as l,e as o,f as a,u as F,q as n,k as B}from"./index-IOU40qfs.js";import{U}from"./UniversalTable-stfXCdpp.js";import"./database-Cw0t9ydm.js";import T from"./user-DVNX4K8t.js";import{S as V}from"./syslog-_uxItRb-.js";import"./useFireStorage-B9wjvMUc.js";/* empty css                                                                       */const z={class:"grid"},N={class:"col-12 px-2"},$={class:"card"},D={class:"flex justify-content-center"},H=g({__name:"SyslogList",setup(E){const p=B(),f=new V,h=new T,i=s([]),d=s([]),c=s(),y=s([{field:"collection",header:"集合",sortable:!0,style:"min-width:6rem;"},{field:"document",header:"文件",sortable:!0,style:"min-width:10rem;"},{field:"methods",header:"操作",sortable:!0,style:"min-width:8rem;"},{field:"useremail",header:"操作者帳號",sortable:!0,style:"min-width:12rem;"},{field:"useruid",header:"操作者UID",sortable:!0,style:"min-width:10rem;"},{type:"date",field:"timestamp",header:"操作時間",sortable:!0,style:"min-width:12rem;"}]),m=s([{type:"Dropdown",options:[],placeholder:"帳號",class:"md:mr-1 md:w-3",field:"useremail"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]);C(()=>{b(),h.array().then(t=>{t.filter(e=>m.value[0].options.push({value:e.email,text:e.email}))})});const b=()=>{f.array().then(t=>{i.value=t})},_=t=>{p.push(`/system/syslog/read/${t.id}`)},v=()=>{c.value.exportCSV()};return(t,e)=>{const u=n("Button"),w=n("Toolbar"),x=n("Column");return S(),k("div",z,[l("div",N,[l("div",$,[o(w,{class:"mb-4"},{end:a(()=>[o(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:e[0]||(e[0]=r=>v())})]),_:1}),o(F(U),{ref_key:"dt",ref:c,data:i.value,columns:y.value,selection:d.value,"onUpdate:selection":e[1]||(e[1]=r=>d.value=r),header:"操作紀錄",checkbox:!1,filter:m.value,sortField:"timestamp",tableStyle:"min-width:1000px;",fixed:"",resizableColumns:""},{footer:a(()=>[o(x,{headerStyle:"'min-width:2rem'",header:"操作",alignFrozen:"right",frozen:""},{body:a(r=>[l("div",D,[o(u,{icon:"pi pi-eye",class:"p-button-rounded p-button-success mr-2",onClick:I=>_(r.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["data","columns","selection","filter"])])])])}}});export{H as default};

import{d as D,r as l,b as B,o as T,c as $,a as o,e as t,f as i,u as S,q as c,k as U,x as f,A as V}from"./index-C2YWHtWb.js";import{U as F}from"./UniversalTable-DDyp3IKG.js";import"./database-BKbkAfuS.js";import j from"./role-p2M_FLkO.js";import"./useAuth-CUFXkQq0.js";import{s as q,e as z}from"./useToast-Deq2fcpw.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */import"./user-DaildQOo.js";const A={class:"grid"},E={class:"col-12 px-2"},I={class:"card"},L={class:"my-2"},M={class:"flex align-items-center justify-content-center"},Y=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ee=D({__name:"RoleList",setup(G){const d=U(),p=new j,_=l(),b=l([{field:"displayName",header:"名稱",sortable:!0,style:"width:75%; min-width:10rem;"},{type:"tag",tag:[{value:"enable",severity:"success",text:"啟用"},{value:"disabled",severity:"danger",text:"停用"}],field:"state",header:"狀態",sortable:!0,style:"width:25%; min-width:10rem;"}]),h=l([{type:"Dropdown",options:[{value:"enable",text:"啟用"},{value:"disabled",text:"停用"}],placeholder:"狀態",class:"md:mr-1 md:w-3",field:"state"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]),m=l([]),u=l(),a=l(!1);B(()=>{v()});const v=()=>{p.array().then(e=>{m.value=e})},y=()=>{d.push("/system/role/add")},x=e=>{d.push(`/system/role/edit/${e.id}`)},w=e=>{u.value=e,a.value=!0},C=async()=>{await p.update(u.value.id,{state:"delete"}).then(e=>{q(e),d.push("/system/user/list")}).catch(e=>{z(e)}),v(),a.value=!1};return(e,r)=>{const n=c("Button"),g=c("Toolbar"),k=c("Column"),N=c("Dialog");return T(),$("div",A,[o("div",E,[o("div",I,[t(g,{class:"mb-4"},{start:i(()=>[o("div",L,[t(n,{label:"新增",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:y})])]),_:1}),t(S(F),{ref_key:"dt",ref:_,data:m.value,columns:b.value,header:"權限管理",filter:h.value},{footer:i(()=>[t(k,{headerStyle:"min-width:10rem;"},{body:i(s=>[t(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:R=>x(s.data)},null,8,["onClick"]),t(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:R=>w(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["data","columns","filter"]),t(N,{visible:a.value,"onUpdate:visible":r[1]||(r[1]=s=>a.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[t(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:r[0]||(r[0]=s=>a.value=!1)}),t(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:C})]),default:i(()=>{var s;return[o("div",M,[Y,o("span",null,[f("你確定要刪除 "),o("b",null,V((s=u.value)==null?void 0:s.displayName),1),f(" 嗎?")])])]}),_:1},8,["visible"])])])])}}});export{ee as default};

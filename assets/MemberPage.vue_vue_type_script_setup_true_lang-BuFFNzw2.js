import"./database-B5mFUmtQ.js";import{M as R}from"./member-CM71EHXB.js";import{C as A}from"./useFireStorage-Bkb40Xyt.js";import{_ as k}from"./InputTextFloat.vue_vue_type_script_setup_true_lang-D630O6UL.js";import{_ as D}from"./StateDropdownFloat.vue_vue_type_script_setup_true_lang-CxnDGka8.js";import{_ as L}from"./DebounceButton.vue_vue_type_script_setup_true_lang-dMutmPpq.js";import{s as M,e as g}from"./useToast-CIqEXRhq.js";/* empty css                                                                       */import{F as f}from"./FloatText-vgkHFlwl.js";import{d as N,o as l,c as u,a as e,A as h,n as _,_ as q,y as P,k as S,r as b,b as j,q as I,e as p,f as z,C as n,u as s,D as i}from"./index-C0IYFN2w.js";import"./Editor-kc3vYnik.js";import{F as x}from"./FloatImg-BUBem7-Z.js";const E={displayName:"",email:"",emailVerified:!1,isAnonymous:!1,phoneNumber:"",photoURL:"",bannerURL:"",uid:"",state:"enable",createdAt:0,updateAt:0,operateAt:0,about:"",animes:!0,follow:!0},O={class:"relative"},T={class:"absolute float-span"},G=N({__name:"FloatBoolean",props:{label:{type:String,default:"-"},content:{type:[Boolean]},disabled:{type:Boolean,default:!1}},setup(t){return(y,V)=>(l(),u("div",O,[e("span",T,h(t.label),1),e("div",{class:_(["p-inputtext",{"opacity-90":t.disabled}])},[e("i",{class:_(["pi",{"pi-check-circle text-green-500":t.content,"pi-times-circle text-red-400":!t.content}])},null,2)],2)]))}}),F=q(G,[["__scopeId","data-v-7478fd42"]]),H={class:"grid"},J={class:"col-12 px-2"},K={class:"card p-fluid"},Q={class:"flex"},W={class:"flex align-items-center"},X={key:0},Y={key:1,class:"m-0"},Z={key:0,class:"flex-1"},ee={class:"flex justify-content-end align-items-center"},te={class:"mr-1"},ae={class:"flex justify-content-end"},le={class:"grid p-fluid mt-3"},oe={class:"col-12 md:col-6"},se={class:"col-12 md:col-6"},ne={class:"col-12 md:col-6"},ie={class:"col-12 md:col-6"},de={class:"col-6 md:col-3"},ce={class:"col-6 md:col-3"},me={class:"col-12"},ue={class:"col-12"},Fe=N({__name:"MemberPage",props:{mode:{type:String,default:""}},setup(t){const y=P(),V=S(),U=new A,$=t,r=new R,c=b(""),o=b({...E}),d=b({photoURL:"",bannerURL:"",displayName:"...",about:""}),w=async v=>{r.update(`${c.value}`,{state:v.state}).then(()=>{r.update(`${c.value}/public/${c.value}`,{state:v.state}).then(a=>{M(a),V.push("/front/member/list")}).catch(a=>{g(a)})}).catch(a=>{g(a)})},B=async()=>{[o.value,d.value]=await Promise.all([r.get(c.value),r.getPublic(c.value)])};return j(async()=>{$.mode==="edit"&&(c.value=y.params.id,await B())}),(v,a)=>{const C=I("VForm");return l(),u("div",H,[e("div",J,[p(C,{ref:"signupForm",onSubmit:a[3]||(a[3]=m=>w(o.value))},{default:z(()=>[e("div",K,[e("div",Q,[e("div",W,[t.mode==="add"?(l(),u("h5",X,"新增會員")):t.mode==="edit"?(l(),u("h5",Y,"編輯會員")):n("",!0)]),t.mode==="edit"?(l(),u("div",Z,[e("div",ee,[e("span",te,h(o.value.emailVerified?"已驗證信箱":"未驗證信箱"),1),e("i",{id:"emailVerified",class:_(["pi",{"pi-check-circle text-green-500":o.value.emailVerified,"pi-times-circle text-red-400":!o.value.emailVerified}])},null,2)]),e("div",ae,[e("span",null,"上次登入時間 "+h(s(U).convertDate(o.value.operateAt)),1)])])):n("",!0)]),e("div",le,[e("div",oe,[t.mode==="add"?(l(),i(s(k),{key:0,label:"信箱",modelValue:o.value.email,"onUpdate:modelValue":a[0]||(a[0]=m=>o.value.email=m),name:"email",rules:"required|email"},null,8,["modelValue"])):n("",!0),t.mode==="edit"?(l(),i(s(f),{key:1,label:"信箱",content:o.value.email,"copy-button":""},null,8,["content"])):n("",!0)]),e("div",se,[t.mode==="edit"?(l(),i(s(f),{key:0,label:"UID",content:o.value.uid,"copy-button":""},null,8,["content"])):n("",!0)]),e("div",ne,[t.mode==="add"?(l(),i(s(k),{key:0,label:"名稱",modelValue:d.value.displayName,"onUpdate:modelValue":a[1]||(a[1]=m=>d.value.displayName=m),name:"displayName",rules:"required"},null,8,["modelValue"])):n("",!0),t.mode==="edit"?(l(),i(s(f),{key:1,label:"名稱",content:d.value.displayName,"copy-button":""},null,8,["content"])):n("",!0)]),e("div",ie,[p(s(D),{modelValue:o.value.state,"onUpdate:modelValue":a[2]||(a[2]=m=>o.value.state=m),name:"state",rules:"required"},null,8,["modelValue"])]),e("div",de,[t.mode==="edit"?(l(),i(s(F),{key:0,label:"動畫是否公開",content:d.value.animes},null,8,["content"])):n("",!0)]),e("div",ce,[t.mode==="edit"?(l(),i(s(F),{key:0,label:"追蹤是否公開",content:d.value.follow},null,8,["content"])):n("",!0)]),e("div",me,[t.mode==="edit"?(l(),i(s(x),{key:0,label:"大頭照",src:d.value.photoURL,width:"200",height:"200"},null,8,["src"])):n("",!0)]),e("div",ue,[t.mode==="edit"?(l(),i(s(x),{key:0,label:"橫幅",src:d.value.bannerURL,width:"100%",height:"200"},null,8,["src"])):n("",!0)])]),p(s(L),{label:"送出",type:"submit"})])]),_:1},512)])])}}});export{Fe as _};

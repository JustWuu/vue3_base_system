import{d as C,r as s,b as g,o as S,c as k,a as r,e as o,f as a,u as B,q as n,k as F}from"./index-CYLifkRk.js";import{U}from"./UniversalTable-CCueH_O9.js";import"./database-BFU37Xrg.js";import T from"./user-CYFzg2Fn.js";import{S as V}from"./syslog-MbsC9y6x.js";import"./useAuth-C5SUOMAl.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */const N={class:"grid"},$={class:"col-12 px-2"},D={class:"card"},E={class:"flex justify-content-center"},J=C({__name:"SyslogList",setup(I){const p=F(),f=new V,h=new T,i=s([]),d=s([]),c=s(),y=s([{field:"collection",header:"集合",sortable:!0,style:"min-width:6rem;"},{field:"document",header:"文件",sortable:!0,style:"min-width:10rem;"},{field:"methods",header:"操作",sortable:!0,style:"min-width:8rem;"},{field:"useremail",header:"操作者帳號",sortable:!0,style:"min-width:12rem;"},{field:"useruid",header:"操作者UID",sortable:!0,style:"min-width:10rem;"},{type:"date",field:"timestamp",header:"操作時間",sortable:!0,style:"min-width:12rem;"}]),m=s([{type:"Dropdown",options:[],placeholder:"帳號",class:"md:mr-1 md:w-3",field:"useremail"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]);g(()=>{b(),h.array().then(t=>{t.filter(e=>m.value[0].options.push({value:e.email,text:e.email}))})});const b=()=>{f.array().then(t=>{i.value=t})},_=t=>{p.push(`/system/syslog/read/${t.id}`)},v=()=>{c.value.exportCSV()};return(t,e)=>{const u=n("Button"),w=n("Toolbar"),x=n("Column");return S(),k("div",N,[r("div",$,[r("div",D,[o(w,{class:"mb-4"},{end:a(()=>[o(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:e[0]||(e[0]=l=>v())})]),_:1}),o(B(U),{ref_key:"dt",ref:c,data:i.value,columns:y.value,selection:d.value,"onUpdate:selection":e[1]||(e[1]=l=>d.value=l),header:"操作紀錄",checkbox:!1,filter:m.value,sortField:"timestamp",tableStyle:"min-width:1000px;",fixed:"",resizableColumns:""},{footer:a(()=>[o(x,{style:"min-width:2rem"},{body:a(l=>[r("div",E,[o(u,{icon:"pi pi-eye",class:"p-button-rounded p-button-success mr-2",onClick:j=>_(l.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["data","columns","selection","filter"])])])])}}});export{J as default};

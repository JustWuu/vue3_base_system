import{d as T,r as l,b as $,o as z,c as F,a as o,e as t,f as i,u as S,q as c,k as U,L as V,E as m,x as h,A as E}from"./index-C0IYFN2w.js";import{U as L}from"./UniversalTable-BIqBLIsS.js";import"./database-B5mFUmtQ.js";import j from"./role-MHEn8tqF.js";import"./useFireStorage-Bkb40Xyt.js";import{s as q,e as A}from"./useToast-CIqEXRhq.js";/* empty css                                                                       */import"./user-CRyQV22G.js";const I={class:"grid"},M={class:"col-12 px-2"},Y={class:"card"},G={class:"my-2"},H={class:"flex align-items-center justify-content-center"},J=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),se=T({__name:"RoleList",setup(K){const d=U(),v=new j,b=l(),y=l([{field:"displayName",header:"名稱",sortable:!0,style:"width:75%; min-width:10rem;"},{type:"tag",tag:[{value:"enable",severity:"success",text:"啟用"},{value:"disabled",severity:"danger",text:"停用"}],field:"state",header:"狀態",sortable:!0,style:"width:25%; min-width:10rem;"}]),x=l([{type:"Dropdown",options:[{value:"enable",text:"啟用"},{value:"disabled",text:"停用"}],placeholder:"狀態",class:"md:mr-1 md:w-3",field:"state"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]),f=l([]),u=l(),a=l(!1);$(()=>{_()});const _=()=>{v.array().then(e=>{f.value=e})},g=()=>{d.push("/system/role/add")},w=e=>{d.push(`/system/role/edit/${e.id}`)},C=e=>{u.value=e,a.value=!0},k=async()=>{await v.update(u.value.id,{state:"delete"}).then(e=>{q(e),d.push("/system/user/list")}).catch(e=>{A(e)}),_(),a.value=!1};return(e,r)=>{const n=c("Button"),D=c("Toolbar"),N=c("Column"),R=c("Dialog"),p=V("role");return z(),F("div",I,[o("div",M,[o("div",Y,[t(D,{class:"mb-4"},{start:i(()=>[o("div",G,[m(t(n,{label:"新增",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:g},null,512),[[p,["role:c"]]])])]),_:1}),t(S(L),{ref_key:"dt",ref:b,data:f.value,columns:y.value,header:"權限管理",filter:x.value},{footer:i(()=>[t(N,{headerStyle:"min-width:10rem;",header:"操作",alignFrozen:"right",frozen:""},{body:i(s=>[m(t(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:B=>w(s.data)},null,8,["onClick"]),[[p,["role:u"]]]),m(t(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:B=>C(s.data)},null,8,["onClick"]),[[p,["role:d"]]])]),_:1})]),_:1},8,["data","columns","filter"]),t(R,{visible:a.value,"onUpdate:visible":r[1]||(r[1]=s=>a.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[t(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:r[0]||(r[0]=s=>a.value=!1)}),t(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:k})]),default:i(()=>{var s;return[o("div",H,[J,o("span",null,[h("你確定要刪除 "),o("b",null,E((s=u.value)==null?void 0:s.displayName),1),h(" 嗎?")])])]}),_:1},8,["visible"])])])])}}});export{se as default};

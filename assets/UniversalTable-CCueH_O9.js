import{d as U,r as b,z as A,N as I,q as c,o as a,D as o,f as y,a as v,A as S,c as m,h as C,F as g,n,C as d,e as P,O as T,P as w,x as O,u as M,t as R,v as _,_ as $}from"./index-CYLifkRk.js";import{C as q}from"./useDate-CVzJcmyJ.js";import"./database-BFU37Xrg.js";/* empty css                                                                       */const E=t=>(R("data-v-f7261d27"),t=t(),_(),t),G={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},H={class:"m-0 w-8rem"},J={class:"flex flex-column flex-wrap w-full md:flex-row md:justify-content-end md:align-items-center"},K=E(()=>v("i",{class:"pi pi-search"},null,-1)),Q=U({__name:"UniversalTable",props:{data:{type:[Object,Array]},columns:{type:Array,default(){return[]}},header:{type:String,default:""},paginator:{type:Boolean,default:!0},rows:{type:Number,default:10},rowsPer:{type:Array,default(){return[5,10,25]}},paginatorTemplate:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown"},checkbox:{type:Boolean,default:!1},filter:{type:Array,default(){return[]}},tableStyle:{type:String,default:""},fixed:{type:Boolean,default:!1},sortField:{type:String,default:""},resizableColumns:{type:Boolean,default:!1}},setup(t,{expose:V}){const D=new q,u=t,i=b({}),x=b(""),k=b(),B=()=>{k.value.exportCSV()},L=(r,h)=>{const s=h.find(f=>f.value===r);return(s==null?void 0:s.text)||"資料有誤，請檢查"},N=(r,h)=>{const s=h.find(f=>f.value===r);return(s==null?void 0:s.severity)||"danger"};return V({exportCSV:B}),A(()=>{if(u.filter.length!==0)for(const r of u.filter)i.value[r.field]={value:null,matchMode:I.CONTAINS};u.fixed?x.value="table-layout: fixed;"+u.tableStyle:x.value=u.tableStyle}),(r,h)=>{const s=c("Dropdown"),f=c("InputText"),p=c("Column"),F=c("Tag"),z=c("DataTable");return a(),o(z,{ref_key:"dt",ref:k,value:t.data,paginator:t.paginator,rows:t.rows,filters:i.value,paginatorTemplate:t.paginatorTemplate,rowsPerPageOptions:t.rowsPer,currentPageReportTemplate:"{first} - {last} 共 {totalRecords} 項目",responsiveLayout:"scroll",responsive:!0,tableStyle:x.value,sortField:t.sortField,sortOrder:-1,resizableColumns:t.resizableColumns},{header:y(()=>[v("div",G,[v("h5",H,S(t.header),1),v("div",J,[(a(!0),m(g,null,C(t.filter,e=>(a(),m(g,{key:e.field},[e.type==="Dropdown"?(a(),o(s,{key:0,modelValue:i.value[e.field].value,"onUpdate:modelValue":l=>i.value[e.field].value=l,options:e.options,placeholder:e.placeholder,class:n(["mt-2 md:mt-0",e.class]),optionLabel:"text",optionValue:"value",showClear:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder","class"])):d("",!0),e.type==="InputText"?(a(),m("span",{key:1,class:n([e.class,"block mt-2 md:mt-0 p-input-icon-left"])},[K,P(f,{modelValue:i.value[e.field].value,"onUpdate:modelValue":l=>i.value[e.field].value=l,placeholder:e.placeholder,class:"w-full"},null,8,["modelValue","onUpdate:modelValue","placeholder"])],2)):d("",!0)],64))),128))])])]),default:y(()=>[t.checkbox?(a(),o(p,{key:0,selectionMode:"multiple",headerStyle:"width: 3rem"})):d("",!0),T(r.$slots,"header",{},void 0,!0),(a(!0),m(g,null,C(t.columns,e=>(a(),m(g,{key:e.field},[e.type?d("",!0):(a(),o(p,{key:0,field:e.field,header:e.header,sortable:e.sortable,style:w(e.style),class:n([e.class,{"text-overflow-ellipsis overflow-hidden":t.fixed}])},null,8,["field","header","sortable","style","class"])),e.type==="date"?(a(),o(p,{key:1,field:e.field,header:e.header,sortable:e.sortable,style:w(e.style),class:n([[e.class,{"text-overflow-ellipsis overflow-hidden":t.fixed}],"white-space-nowrap"])},{body:y(({data:l})=>[O(S(M(D).convertDate(l[e.field])),1)]),_:2},1032,["field","header","sortable","style","class"])):d("",!0),e.type==="boolean"?(a(),o(p,{key:2,field:e.field,header:e.header,sortable:e.sortable,style:w(e.style),class:n([e.class,{"text-overflow-ellipsis overflow-hidden":t.fixed}]),dataType:"boolean"},{body:y(({data:l})=>[v("i",{class:n(["pi",{"pi-check-circle text-green-500":l[e.field],"pi-times-circle text-red-400":!l[e.field]}])},null,2)]),_:2},1032,["field","header","sortable","style","class"])):d("",!0),e.type==="tag"?(a(),o(p,{key:3,field:e.field,header:e.header,sortable:e.sortable,style:w(e.style),class:n([e.class,{"text-overflow-ellipsis overflow-hidden":t.fixed}])},{body:y(({data:l})=>[P(F,{value:L(l[e.field],e.tag),severity:N(l[e.field],e.tag)},null,8,["value","severity"])]),_:2},1032,["field","header","sortable","style","class"])):d("",!0)],64))),128)),T(r.$slots,"footer",{},void 0,!0)]),_:3},8,["value","paginator","rows","filters","paginatorTemplate","rowsPerPageOptions","tableStyle","sortField","resizableColumns"])}}}),j=$(Q,[["__scopeId","data-v-f7261d27"]]);export{j as U};

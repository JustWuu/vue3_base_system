import{d as x,r as s,b as C,c as k,a as l,e as o,f as a,u as S,q as n,k as g,o as B}from"./index-BAnCtb42.js";import{U as F}from"./UniversalTable-De1ynEdV.js";import"./database-B5yYN_Wa.js";import U from"./user-QzlZX5LK.js";import{S as T}from"./syslog-C6ygSN7A.js";import"./useFireStorage-H2zJQsii.js";import{e as V}from"./useToast-DKlWDkpx.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */const N={class:"grid"},$={class:"col-12 px-2"},D={class:"card"},E={class:"flex justify-content-center"},K=x({__name:"SyslogList",setup(I){const p=g(),f=new T,h=new U,i=s([]),d=s([]),c=s(),y=s([{field:"collection",header:"集合",sortable:!0,style:"min-width:6rem;"},{field:"document",header:"文件",sortable:!0,style:"min-width:10rem;"},{field:"methods",header:"操作",sortable:!0,style:"min-width:8rem;"},{field:"useremail",header:"操作者帳號",sortable:!0,style:"min-width:12rem;"},{field:"useruid",header:"操作者UID",sortable:!0,style:"min-width:10rem;"},{type:"date",field:"timestamp",header:"操作時間",sortable:!0,style:"min-width:12rem;"}]),m=s([{type:"Dropdown",options:[],placeholder:"帳號",class:"md:mr-1 md:w-3",field:"useremail"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]);C(()=>{f.array().then(e=>{i.value=e}).catch(e=>{V(e)}),h.array().then(e=>{e.filter(t=>m.value[0].options.push({value:t.email,text:t.email}))})});const b=e=>{p.push(`/system/syslog/read/${e.id}`)},_=()=>{c.value.exportCSV()};return(e,t)=>{const u=n("Button"),v=n("Toolbar"),w=n("Column");return B(),k("div",N,[l("div",$,[l("div",D,[o(v,{class:"mb-4"},{end:a(()=>[o(u,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=r=>_())})]),_:1}),o(S(F),{ref_key:"dt",ref:c,data:i.value,columns:y.value,selection:d.value,"onUpdate:selection":t[1]||(t[1]=r=>d.value=r),header:"操作紀錄",checkbox:!1,filter:m.value,sortField:"timestamp",tableStyle:"min-width:1000px;",fixed:"",resizableColumns:""},{footer:a(()=>[o(w,{style:"min-width:2rem"},{body:a(r=>[l("div",E,[o(u,{icon:"pi pi-eye",class:"p-button-rounded p-button-success mr-2",onClick:j=>b(r.data)},null,8,["onClick"])])]),_:1})]),_:1},8,["data","columns","selection","filter"])])])])}}});export{K as default};

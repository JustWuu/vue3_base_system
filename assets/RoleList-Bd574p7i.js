import{d as T,r as s,b as U,c as $,a as l,e as t,f as r,u as S,q as c,k as V,L as E,o as F,E as f,x as b,A as L}from"./index-BAnCtb42.js";import{U as j}from"./UniversalTable-De1ynEdV.js";import"./database-B5yYN_Wa.js";import q from"./role-D5Fe5TFx.js";import"./useFireStorage-H2zJQsii.js";import{e as z}from"./useToast-DKlWDkpx.js";import"./useDate-CVzJcmyJ.js";/* empty css                                                                       */import"./user-QzlZX5LK.js";const A={class:"grid"},I={class:"col-12 px-2"},M={class:"card"},Y={class:"my-2"},G={class:"flex align-items-center justify-content-center"},H=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),oe=T({__name:"RoleList",setup(J){const d=V(),_=new q,h=s(),y=s([{field:"displayName",header:"名稱",sortable:!0,style:"width:75%; min-width:10rem;"},{type:"tag",tag:[{value:"enable",severity:"success",text:"啟用"},{value:"disabled",severity:"danger",text:"停用"}],field:"state",header:"狀態",sortable:!0,style:"width:25%; min-width:10rem;"}]),x=s([{type:"Dropdown",options:[{value:"enable",text:"啟用"},{value:"disabled",text:"停用"}],placeholder:"狀態",class:"md:mr-1 md:w-3",field:"state"},{type:"InputText",placeholder:"Search...",class:"md:w-3",field:"displayName"}]),u=s([]),p=s(),m=s([]),n=s(!1);U(()=>{_.array().then(o=>{u.value=o}).catch(o=>{z(o)})});const k=()=>{d.push("/system/role/add")},w=o=>{d.push(`/system/role/edit/${o.id}`)},C=o=>{p.value=o,n.value=!0},g=()=>{n.value=!1};return(o,a)=>{const i=c("Button"),D=c("Toolbar"),N=c("Column"),R=c("Dialog"),v=E("role");return F(),$("div",A,[l("div",I,[l("div",M,[t(D,{class:"mb-4"},{start:r(()=>[l("div",Y,[t(i,{label:"新增",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:k})])]),_:1}),t(S(j),{ref_key:"dt",ref:h,data:u.value,columns:y.value,selection:m.value,"onUpdate:selection":a[0]||(a[0]=e=>m.value=e),header:"權限管理",checkbox:!0,filter:x.value},{footer:r(()=>[t(N,{headerStyle:"min-width:10rem;"},{body:r(e=>[f(t(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:B=>w(e.data)},null,8,["onClick"]),[[v,["role:u"]]]),f(t(i,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:B=>C(e.data)},null,8,["onClick"]),[[v,["role:d"]]])]),_:1})]),_:1},8,["data","columns","selection","filter"]),t(R,{visible:n.value,"onUpdate:visible":a[2]||(a[2]=e=>n.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[t(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[1]||(a[1]=e=>n.value=!1)}),t(i,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:g})]),default:r(()=>{var e;return[l("div",G,[H,l("span",null,[b("你確定要刪除 "),l("b",null,L((e=p.value)==null?void 0:e.displayName),1),b(" 嗎?")])])]}),_:1},8,["visible"])])])])}}});export{oe as default};
